/*** VERSION: 1.0.0 ***/
/*** SHA: 23922c38004f228b06f9fc0412b3c262dc475fac ***/
/*! For license information please see foundation.d7d69f2d80ab2ca705d4.js.LICENSE */
var foundation=function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)__webpack_require__.d(n,o,function(t){return e[t]}.bind(null,o));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){console.log("e=");console.log(e);return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=109)}([function(e,t,n){var o,r,i;r=[t],void 0===(i="function"==typeof(o=function(e){var t=e;t.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.createClass=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),t.defineEnumerableProperties=function(e,t){for(var n in t){var o=t[n];o.configurable=o.enumerable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n,o)}return e},t.defaults=function(e,t){for(var n=Object.getOwnPropertyNames(t),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(t,r);i&&i.configurable&&void 0===e[r]&&Object.defineProperty(e,r,i)}return e},t.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},t.get=function get(e,t,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:get(r,t,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},t.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},t.instanceof=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},t.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},t.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},t.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},t.objectWithoutProperties=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n},t.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},t.selfGlobal=void 0===e?self:e,t.set=function set(e,t,n,o){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var i=Object.getPrototypeOf(e);null!==i&&set(i,t,n,o)}else if("value"in r&&r.writable)r.value=n;else{var s=r.set;void 0!==s&&s.call(o,n)}return n},t.slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},t.slicedToArrayLoose=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,o=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(o.push(n.value),!t||o.length!==t););return o}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t.taggedTemplateLiteral=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},t.taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},t.temporalRef=function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},t.temporalUndefined={},t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},t.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}})?o.apply(t,r):o)||(e.exports=i)},function(e,t,n){e.exports=n(41)(11)},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var i=n(1),s=e.interopRequireDefault(i),a=n(15),c=e.interopRequireWildcard(a),u=n(7),l=n(46),p=n(14),d=n(65),f=n(18),h=n(47),m=n(130),g=n(67),_=n(23),y=n(131).LifeCycleManager.getInstance(),b={add:0,remove:1},v=function getExpandedID(e,t){return t instanceof C?t.gid+"."+e:e},C=t.Component=(r=o=function(t){function Component(n,o,r){if(e.classCallCheck(this,Component),!o)throw new Error("Component id not specified.");var i=e.possibleConstructorReturn(this,t.call(this));if(n===i)throw new Error("Owner cannot be 'this'");i._autoInitialize=null===(r||{}).autoInitialize||void 0===(r||{}).autoInitialize||r.autoInitialize,i._id=o;for(var s=arguments.length,a=Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];return i._args=a,i._owner=n,i._gid=v(o,n),i.__componentMap={},i.__componentList=[],i.__stateMachineMap={},i.__animationMap={},i.__modelMap={},i._activityCount=0,i.__selfInitializing=!1,i._lifeInitSubsAdded=!1,i._store={createModel:i._createStoreModel.bind(i)},n&&(i._scene=n._scene,i._game=n._game),i._properties=i._createProperties(),i._defineProperties(i._properties.add.bind(i._properties)),i._lifeState=new g.ScheduledBehaviorSubject(p.LifeCycleState.undefined),i._properties.init(r),i.__componentAddNotification(n),i}return e.inherits(Component,t),Component.prototype.getLifeCycleMethods=function getLifeCycleMethods(e){var t=this;this._beforePreload!==Component.prototype._beforePreload&&e(_.LifeCycleStep.PRELOAD_BEFORE,this._beforePreload),this._preload!==Component.prototype._preload&&e(_.LifeCycleStep.PRELOAD,this._preload),e(_.LifeCycleStep.PRELOAD_AFTER,this._afterPreload),this._beforeInit!==Component.prototype._beforeInit&&e(_.LifeCycleStep.INIT_BEFORE,this._beforeInit),this._init!==Component.prototype._init&&e(_.LifeCycleStep.INIT,this._init),e(_.LifeCycleStep.INIT_AFTER,this._afterInit),this._beforeBind!==Component.prototype._beforeBind&&e(_.LifeCycleStep.BIND_BEFORE,this._beforeBind),this._bind!==Component.prototype._bind&&e(_.LifeCycleStep.BIND,this._bind),this._afterBind!==Component.prototype._afterBind&&e(_.LifeCycleStep.BIND_AFTER,this._afterBind),this._beforeReady!==Component.prototype._beforeReady&&e(_.LifeCycleStep.READY_BEFORE,this._beforeReady),this._ready!==Component.prototype._ready&&e(_.LifeCycleStep.READY,this._ready),this._afterReady!==Component.prototype._afterReady&&e(_.LifeCycleStep.READY_AFTER,this._afterReady),e(_.LifeCycleStep.UNBIND,this._unbind),this._afterUnbind!==Component.prototype._afterUnbind&&e(_.LifeCycleStep.UNBIND_AFTER,this._afterUnbind),this._destroy!==Component.prototype._destroy&&e(_.LifeCycleStep.FINALIZE,this._destroy),this._afterDestroy!==Component.prototype._afterDestroy&&e(_.LifeCycleStep.FINALIZE_AFTER,this._afterDestroy),e(_.LifeCycleStep.DESTROY,(function(){t.__componentRemoveNotification(),t._dispose()}))},Component._enterLifeCycleBusySection=function _enterLifeCycleBusySection(){0==Component._lifeCycleBusyCounter++&&Component.lifeCycleBusy.next(!0)},Component._leaveLifeCycleBusySection=function _leaveLifeCycleBusySection(){0==--Component._lifeCycleBusyCounter&&Component.lifeCycleBusy.next(!1)},Component.prototype._internalAfterConstruction=function _internalAfterConstruction(){this._afterConstruction(),!0===this._autoInitialize&&this.owner&&!0===this.owner._lifeInitSubsAdded&&(this.__selfInitializing=!0,this.init())},Component.prototype._afterConstruction=function _afterConstruction(){},Component.getAutoID=function getAutoID(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=0,o=e;t&&t.getComponent(o);)o=e+"_"+ ++n;return o},Component.waitForCreated=function waitForCreated(e){if(!(e instanceof Component))throw Error("Component.waitForLifeState(): Specified component must be of type 'Component'.");return e.lifeState.filter((function(e){return e===p.LifeCycleState.ready})).first().mapTo(e)},Component.waitForDestroyed=function waitForDestroyed(e){if(!(e instanceof Component))throw Error("Component.waitForLifeState(): Specified component must be of type 'Component'.");return e&&e.lifeState?e.lifeState.filter((function(e){return e===p.LifeCycleState.null})).first().mapTo(e):s.default.Observable.of(e)},Component._componentNotification=function _componentNotification(e,t){var n=Component._classComponentMap[e.className]=Component._classComponentMap[e.className]||[];switch(t){case Component.Operation.add:if(Component._flatComponentMap[e.gid])throw new Error("Scene sub-component with gid "+e.gid+" already exists.}");Component._flatComponentMap[e.gid]=e,n.push(e),Component.onComponentAdd.next(e);break;case Component.Operation.remove:Component.onComponentRemove.next(e),n.splice(n.indexOf(e),1),delete Component._flatComponentMap[e.gid]}},Component.getClassName=function getClassName(e){if(null!=e){if(e.className)return e.className;if(e.name)return e.name;if("string"==typeof e)return e}},Component.getComponentsByClass=function getComponentsByClass(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e&&e.name&&Component._classComponentMap.hasOwnProperty(e.name)){var n=Component._classComponentMap[e.name];return t instanceof Component?n.filter((function(e){return e.owner===t})):n}},Component.classInstanceExists=function classInstanceExists(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e&&e.name&&Component._classComponentMap.hasOwnProperty(e.name)){var n=Component._classComponentMap[e.name];return t instanceof Component?n.some((function(e){return e.owner===t})):n.length>0}return!1},Component.registerClass=function registerClass(e){if(!(e.prototype instanceof Component))throw new Error("Component.registerClass: ComponentClass must be of type Component.");if(Component._registeredClasses.hasOwnProperty(e.name))throw new Error("Component.registerClass: Component of type '"+e.name+"' is already registered.");Component._registeredClasses[e.name]=e},Component.unregisterClass=function unregisterClass(e){if(!(e.prototype instanceof Component))throw new Error("Component.unregisterClass: ComponentClass must be of type Component.");Component._registeredClasses.hasOwnProperty(e.name)&&delete Component._registeredClasses[e.name]},Component.classIsRegistered=function classIsRegistered(e){var t=Component.getClassName(e);return void 0!==t&&Component._registeredClasses.hasOwnProperty(t)},Component.getRegisteredClass=function getRegisteredClass(e){var t=Component.getClassName(e);return void 0!==t&&Component._registeredClasses.hasOwnProperty(t)?Component._registeredClasses[t]:void 0},Component.defineReferenceProperty=function defineReferenceProperty(e,t){var n=void 0;Object.defineProperty(e,t,{get:function get(){return Component._flatComponentMap.hasOwnProperty(n)?Component._flatComponentMap[n]:void 0},set:function set(e){e instanceof Component&&(n=e.gid)}})},Component.prototype.assets=function assets(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"string"==typeof e&&(e=[e]);for(var assets=[],t=e.length,n=0;n<t;n++){var o=h.ResourceIO.getInstance().getAssetFromManifest(e[n],this);o&&assets.push(o)}return new m.AssetBundle(this,assets)},Component.prototype.createControl=function createControl(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return this.createComponent.apply(this,[e,t].concat(o))},Component.prototype.createComponent=function createComponent(e,t){e.prototype,c.Core.Control;for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];var i=this.__internalCreateComponent.apply(this,[e,t].concat(o));return i._internalAfterConstruction(),i},Component.prototype.createControlAsync=function createControlAsync(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return this.createComponentAsync.apply(this,[e,t].concat(o))},Component.prototype.createComponentAsync=function createComponentAsync(e,t){e.prototype,c.Core.Control;for(var n=arguments.length,o=Array(n>2?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];var i=this.__internalCreateComponent.apply(this,[e,t].concat(o));return i._internalAfterConstruction(),Component.waitForCreated(i)},Component.prototype.removeComponent=function removeComponent(e){if(e instanceof Component){var t=this.__componentList.indexOf(e);t>-1&&this.__componentList.splice(t,1),delete this.__componentMap[e.id]}},Component.prototype.__getComponentsRecursive=function __getComponentsRecursive(){var e=Object.values(this.__componentMap);return void 0!==e&&e.forEach((function(t){e=e.concat(t.__getComponentsRecursive())})),e},Component.prototype.getComponents=function getComponents(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0===e?this.__getComponentsRecursive():Object.values(this.__componentMap)},Component.prototype.getComponent=function getComponent(e){return this.__componentMap[e]},Component.prototype.getAnimation=function getAnimation(e){return this._animationMap[e]},Component.prototype.createStateMachine=function createStateMachine(e,t,n){if(!e)throw new Error("State machine 'id' is not specified.");if(!this.__stateMachineMap[e])return this.__stateMachineMap[e]=l.StateMachine.create(t,n,this.lifeState.map((function(e){return e===p.LifeCycleState.ready}))),this.__stateMachineMap[e];throw new Error("State machine with id '"+e+"' already exists.")},Component.prototype.removeStateMachine=function removeStateMachine(e){e instanceof l.StateMachine&&delete this.__stateMachineMap[e.id]},Component.prototype.getStateMachine=function getStateMachine(e){return this.__stateMachineMap[e]},Component.prototype.getStateMachines=function getStateMachines(){var e=[];for(var t in this.__stateMachineMap)e.push(this.__stateMachineMap[t]);return e},Component.prototype.createPopup=function createPopup(e){var t=this._scene.getComponent("Popup");if(!t)throw new Error("Popup component not added to scene");t.addPopup(e)},Component.prototype.createAnimation=function createAnimation(e,t){var n=this;if(!t)throw new Error("Animation 'id' is not specified.");for(var o=arguments.length,r=Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];var s=new(Function.prototype.bind.apply(e,[null].concat([this._gid+"."+t],r)));if(!s)throw new Error("Animation not created");if(!this.__animationMap[s.objectId])return this.__animationMap[s.objectId]=s,s._compositeDisposable.add((function(){n.__animationMap&&n.__animationMap[s.objectId]&&delete n.__animationMap[s.objectId]})),s;throw new Error("Animation with id '"+s.objectId+"' already exists.")},Component.prototype.createModel=function createModel(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(!t)throw new Error("Model 'id' is not specified.");if(void 0!==o)throw new Error("Model 'MessageClass' is specified.");if(!this.__modelMap[t]){var r=new e({template:n,initObs:this._lifeState.map((function(e){return e>=p.LifeCycleState.bind&&e<=p.LifeCycleState.ready}))});return this.__modelMap[t]=r,r}throw new Error("Model with id '"+t+"' already exists.")},Component.prototype.getModel=function getModel(e){if(e.prototype)for(var t in this.__modelMap)if(this.__modelMap[t]instanceof e)return this.__modelMap[t];return this.__modelMap[e]},Component.prototype._createStoreModel=function _createStoreModel(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!(e.prototype instanceof c.Core.ObservableModel))throw new Error("Component.createStoreModel: ModelClass must be of type ObservableModel");n=n||e.name,this.createComponent(e,n,{},t)},Component.prototype.beginActivity=function beginActivity(){0==this._activityCount++&&(this._onActivityChanged(!0),this._owner&&this._owner.beginActivity())},Component.prototype.endActivity=function endActivity(){this._activityCount>0&&0==--this._activityCount&&(this._onActivityChanged(!1),this._owner&&this._owner.endActivity())},Component.prototype.init=function init(){y.initialize(this)},Component.prototype.dispose=function dispose(){return y.finalize(this),this},Component.prototype.sendMessage=function sendMessage(e){var t=this.__getBus(e);t&&t.sendMessage(e)},Component.prototype.postMessage=function postMessage(e){var t=this.__getBus(e);t&&t.postMessage(e)},Component.prototype.__internalCreateComponent=function __internalCreateComponent(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=t||Component.getAutoID(e.name,this),!this.__componentMap[t]){for(var o=arguments.length,r=Array(o>3?o-3:0),i=3;i<o;i++)r[i-3]=arguments[i];var s=this.__componentMap[t]=y.create.apply(y,[e,this,t,n].concat(r));return this.__componentList.push(s),s}throw new Error("Component with id '"+t+"' already exists. [Owner id: "+this.id+"]")},Component.prototype._dispose=function _dispose(){for(var e in this._id=null,this._gid=null,this._scene=null,this._game=null,this._activityCount=null,this._store=null,this._properties.dispose(),this._properties=null,this.__modelMap)this.__modelMap[e].dispose();for(var n in this._owner=null,this.__modelMap=null,this.__stateMachineMap)this.__stateMachineMap[n].dispose();for(var o in this.__stateMachineMap=null,this.__animationMap)this.__animationMap[o].dispose();this.__animationMap=null,this.__componentMap=null,this.__componentList=null,this._lifeState=null,t.prototype._dispose.call(this)},Component.prototype._registerAssets=function _registerAssets(e){},Component.prototype._beforePreload=function _beforePreload(){},Component.prototype._preload=function _preload(){},Component.prototype._afterPreload=function _afterPreload(){this.ownerScene&&this._registerAssets(this.ownerScene._assetQueue)},Component.prototype._beforeInit=function _beforeInit(){},Component.prototype._init=function _init(){},Component.prototype._afterInit=function _afterInit(){this._properties.bind()},Component.prototype._beforeBind=function _beforeBind(){},Component.prototype._bind=function _bind(){},Component.prototype._afterBind=function _afterBind(){},Component.prototype._beforeReady=function _beforeReady(){},Component.prototype._ready=function _ready(){},Component.prototype._afterReady=function _afterReady(){},Component.prototype._unbind=function _unbind(){return t.prototype._unbind.call(this)},Component.prototype._afterUnbind=function _afterUnbind(){},Component.prototype._destroy=function _destroy(){},Component.prototype._afterDestroy=function _afterDestroy(){},Component.prototype._onActivityChanged=function _onActivityChanged(e){},Component.prototype._createProperties=function _createProperties(){return new d.ComponentProperties(this)},Component.prototype._defineProperties=function _defineProperties(e){var t=this;e({model:{readonly:!0,get:function get(){return t.__model},set:function set(e){t.__model=e}}})},Component.prototype._executeClassMethod=function _executeClassMethod(e,t){var n=Component._classComponentMap[e];if(n&&n.length){for(var o={},r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];var a=!0,c=!1,u=void 0;try{for(var l,p=n[Symbol.iterator]();!(a=(l=p.next()).done);a=!0){var d=l.value,f=d[t];f&&(o[d.gid]=f.apply(void 0,i))}}catch(e){c=!0,u=e}finally{try{!a&&p.return&&p.return()}finally{if(c)throw u}}return o}return null},Component.prototype._executeInstanceMethod=function _executeInstanceMethod(e,t){var n=Component._flatComponentMap[e];if(n){var o=n[t];if(o){for(var r=arguments.length,i=Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return o.apply(void 0,i)}}return null},Component.prototype.__getBus=function __getBus(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return e instanceof f.BaseGameMessage&&this._game?this._game._bus:this._scene?this._scene._bus:this._game?this._game._bus:void 0},Component.prototype.__getStore=function __getStore(){return this._scene?this._scene._store:this._game?this._game._store:void 0},Component.prototype.__componentAddNotification=function __componentAddNotification(e){Component._componentNotification(this,b.add),e&&(e._scene&&this!==e._scene&&this._scene._componentNotification(this,b.add),e._game&&this!==e._game&&this._game._componentNotification(this,b.add))},Component.prototype.__componentRemoveNotification=function __componentRemoveNotification(){this._owner&&(this.isBusy&&this._owner.endActivity(),this._owner.removeComponent(this)),Component._componentNotification(this,b.remove),this._scene&&this._scene._componentNotification(this,b.remove),this._game&&this._game._componentNotification(this,b.remove)},e.createClass(Component,[{key:"id",get:function get(){return this._id}},{key:"gid",get:function get(){return this._gid}},{key:"owner",get:function get(){return this._owner}},{key:"ownerScene",get:function get(){return this._scene}},{key:"ownerGame",get:function get(){return this._game}},{key:"isBusy",get:function get(){return this._activityCount>0}},{key:"lifeState",get:function get(){return this._lifeState}},{key:"_lifeStateMachine",get:function get(){return y._getObjectContext(this).lifeCycleExecutingState}},{key:"store",get:function get(){return this._store}}],[{key:"Operation",get:function get(){return b}}]),Component}(u.DisposableObject),o._flatComponentMap={},o._classComponentMap={},o._registeredClasses={},o.onComponentAdd=new s.default.Subject,o.onComponentRemove=new s.default.Subject,o._lifeCycleBusyCounter=0,o.lifeCycleBusy=new s.default.BehaviorSubject(!0),o._autoInitialize=!0,r)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.XManCommand=void 0;var o=n(157);t.XManCommand=function(t){function XManCommand(n){e.classCallCheck(this,XManCommand);var o=e.possibleConstructorReturn(this,t.call(this,n));return o._commandInfo=o._getCommandInfo(),o._requestSub=o._request.map(o._requestToDto.bind(o)).subscribe(o.commsIO),o._responseSub=n.filter(XManCommand._filterResponseCommand(o.commandInfo).bind(o)).map(o._toResponseDto.bind(o)).subscribe(o._response),o}return e.inherits(XManCommand,t),XManCommand._filterResponseCommand=function _filterResponseCommand(e){return function(t){if(null==t.Id)return!1;var n=t.Id.verbex||t.Id.verb;return(n===e.verb||n===e.verbex)&&"Error"!==t.Id.verb}},XManCommand.prototype.dispose=function dispose(){this._responseSub.unsubscribe(),this._responseSub=null,this._requestSub.unsubscribe(),this._requestSub=null,this._commandInfo=null,t.prototype.dispose.call(this)},XManCommand.prototype._requestToDto=function _requestToDto(e){return{command:this.commandInfo,data:{}}},XManCommand.prototype._toResponseDto=function _toResponseDto(e){var t=e.response;return t.Id=e.Id,t},XManCommand.prototype._getCommandInfo=function _getCommandInfo(){throw new Error("XManCommand._getCommandInfo() not implemented.")},XManCommand.prototype._toXManRequestPacket=function _toXManRequestPacket(e){var t=e.data;return e.command.verbex&&(t.verbex=e.command.verbex),this._xMan={},{Pkt:{version:5,Id:{mid:e.command.mid,cid:e.command.cid,sid:this._xMan.sid,sessionid:this._xMan.sessionID?this._xMan.sessionID:"",verb:e.command.verb,clientLang:this._xMan.lang},Request:t}}},e.createClass(XManCommand,[{key:"commandInfo",get:function get(){return this._commandInfo}}]),XManCommand}(o.CommsCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Line=t.Point=t.Rect=t.Control=void 0;var i=n(15),s=e.interopRequireWildcard(i),a=n(34),c=n(2),u=n(5),l=n(68),p=n(134),d=n(23),f=(t.Control=(r=o=function(t){function Control(n,o,r){e.classCallCheck(this,Control);for(var i=arguments.length,s=Array(i>3?i-3:0),c=3;c<i;c++)s[c-3]=arguments[c];var u=e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,r].concat(s))),l=u._getSceneObjectType(r),p=null!==u.ownerScene&&void 0!==u.ownerScene?u.ownerScene.gid:void 0;return u._sceneObject=a.SceneIO.createObject(l,e.extends({},u._properties.toSOCreateProperties(),{ownerSceneId:p})),u._parent=u._properties.parent,u._properties.isGhostElement||a.SceneIO.addObject(u._sceneObject,u._properties.parent?u._properties.parent._sceneObject:u._properties.parent),u._properties.onChanged.subscribeExt(u,(function(){return u.update()})),u._events={},u.__hidMap={},u.__hidCount=0,u._updateCount=0,u._fillsUnsafeArea=!1,u._unsafeAreaFillerCounter=0,u}return e.inherits(Control,t),Control.prototype.__createAndAddSceneObject=function __createAndAddSceneObject(e){var t=this._getSceneObjectType(e);this._sceneObject=a.SceneIO.createObject(t,this._properties.toSOCreateProperties()),a.SceneIO.addObject(this._sceneObject,this._properties.parent?this._properties.parent._sceneObject:this._properties.parent)},Control.prototype.__calculateViewDataObs=function __calculateViewDataObs(){},Control.prototype._createProperties=function _createProperties(){var e=new p.ControlProperties(this),t=this.layoutManager.currentOrientation;return e.updateOrientation(t),e},Control.prototype.createHID=function createHID(e,t){e.properties.blocksInput=!0;var n=new l.HID(e,t),o=this.id+"."+e.id+"."+t+"."+ ++this.__hidCount;if(!this.__hidMap[o])return this.__hidMap[o]=n,n;throw new Error("HID binding already exists for control with id='"+e.gid+"' and gesture='"+t+"'.")},Control.prototype.update=function update(){!0===this.properties.isReady&&this._sceneObject&&0===this._updateCount&&a.SceneIO.modifyObject(this._sceneObject)},Control.prototype.beginUpdate=function beginUpdate(){this._updateCount++},Control.prototype.endUpdate=function endUpdate(){this._updateCount>0&&0==--this._updateCount&&this.update()},Control.prototype.rect=function rect(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new f(this,e,t)},Control.prototype.globalToLocal=function globalToLocal(e){return a.SceneIO.globalToLocal(e,this)},Control.prototype.align=function align(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.layoutManager.alignControl(this,!0===e)},Control.prototype._alignControl=function _alignControl(e){e&&(0===e.width&&this.properties.texture&&0===this.properties.width?e.width=this.properties.texture.width:0===e.width&&0!==this.properties.width&&(e.width=this.properties.width),0===e.height&&this.properties.texture&&0===this.properties.height?e.height=this.properties.texture.height:0===e.height&&0!==this.properties.height&&(e.height=this.properties.height),this.properties.updateValues(e))},Control.prototype._afterAlign=function _afterAlign(){},Control.prototype.getLifeCycleMethods=function getLifeCycleMethods(e){t.prototype.getLifeCycleMethods.call(this,e),e(d.LifeCycleStep.INIT_AFTER,this._internalAfterInit)},Control.prototype._internalAfterInit=function _internalAfterInit(){this.layoutManager.alignControlAfterInit(this)},Control.prototype._orientationUpdate=function _orientationUpdate(e){},Control.prototype._show=function _show(){},Control.prototype._hide=function _hide(){},Control.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e);var o=void 0,r=void 0;e({type:{sceneObjectProperty:!0,enumerable:!1,get:function get(){return n._sceneObject.type}},id:{get:function get(){return n._gid}},cacheAsBitmap:{type:u.DataType.boolean,sceneObjectProperty:"cacheAsBitmap",default:!1,get:function get(){return n._sceneObject.cacheAsBitmap},set:function set(e){n._sceneObject.cacheAsBitmap=e}},changes:{sceneObjectProperty:!0,enumerable:!1,get:function get(){return n._sceneObject.changes}},x:{default:0,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.x},set:function set(e){n._sceneObject.x!==e&&(n._sceneObject.x=e)}},y:{default:0,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.y},set:function set(e){n._sceneObject.y!==e&&(n._sceneObject.y=e)}},z:{default:0,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.z},set:function set(e){n._sceneObject.z!==e&&(n._sceneObject.z=e)}},width:{default:0,type:u.DataType.int(),sceneObjectProperty:"w",get:function get(){return n._sceneObject.w},set:function set(e){n._sceneObject.w=e}},height:{default:0,type:u.DataType.int(),sceneObjectProperty:"h",get:function get(){return n._sceneObject.h},set:function set(e){n._sceneObject.h=e}},globalX:{default:0,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.globalX},set:function set(e){n._sceneObject.globalX=e}},globalY:{default:0,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.globalY},set:function set(e){n._sceneObject.globalY=e}},originX:{default:0,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.originX},set:function set(e){n._sceneObject.originX=e}},originY:{default:0,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.originY},set:function set(e){n._sceneObject.originY=e}},originAligned:{default:!0,type:u.DataType.boolean,sceneObjectProperty:!0,get:function get(){return n._sceneObject.originAligned},set:function set(e){n._sceneObject.originAligned=e}},alpha:{default:1,type:u.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.alpha},set:function set(e){n._sceneObject.alpha=e,void 0===r&&0===e?(r=n._sceneObject.visible,n._sceneObject.visible=!1):void 0!==r&&e>0&&(n._sceneObject.visible=r,r=void 0)}},mask:{sceneObjectProperty:!0,get:function get(){return o},set:function set(e){o!==e&&(o=e,n._sceneObject.mask=o?o._sceneObject:void 0)}},filters:{sceneObjectProperty:!0,type:u.DataType.array,get:function get(){return n._sceneObject.filters},set:function set(e){n._sceneObject.filters=e}},rotation:{default:0,type:u.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.rotation},set:function set(e){n._sceneObject.rotation=e}},visible:{default:!0,type:u.DataType.boolean,sceneObjectProperty:!0,get:function get(){return n._sceneObject.visible},set:function set(e){0===n._sceneObject.alpha&&void 0!==r?r=e:n._sceneObject.visible=e}},scaleX:{default:1,type:u.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.scaleX},set:function set(e){n._sceneObject.scaleX=e}},scaleY:{default:1,type:u.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.scaleY},set:function set(e){n._sceneObject.scaleY=e}},parent:{sceneObjectProperty:!0,get:function get(){return n._parent},set:function set(e){if(e===n)throw new Error("Parent of class "+n.className+" cannot be 'this'");n._parent!==e&&(n._parent&&system.scene.removeObject(n._sceneObject,n._parent._sceneObject),n._parent=e,n._parent&&system.scene.addObject(n._sceneObject,n._parent._sceneObject))}},isGhostElement:{default:!1,type:u.DataType.boolean,get:function get(){return n._sceneObject.isGhostElement},set:function set(e){return n._sceneObject.isGhostElement=e}},interactive:{default:null,type:u.DataType.boolean,sceneObjectProperty:!0,get:function get(){return n._sceneObject.interactive},set:function set(e){n._sceneObject.interactive=e}},blocksInput:{default:null==system.config.blocksInputDefaultValue||system.config.blocksInputDefaultValue,type:u.DataType.boolean,sceneObjectProperty:!0,get:function get(){return n._sceneObject.blocksInput},set:function set(e){n._sceneObject.blocksInput=e}},enableSpatialUpdates:{default:!0,type:u.DataType.boolean,sceneObjectProperty:!0,get:function get(){return n._sceneObject.enableSpatialUpdates},set:function set(e){n._sceneObject.enableSpatialUpdates=e}},enabled:{default:!0,type:u.DataType.boolean,get:function get(){return n._enabled},set:function set(e){n._enabled!==e&&(n._enabled=e,n._onEnabledStateChanged(e))}},fillsUnsafeArea:{default:!1,type:u.DataType.boolean,get:function get(){return n._fillsUnsafeArea},set:function set(e){if(n._fillsUnsafeArea!==e){var t=e;null!=e.landscape&&0===n.properties.orientationIndex?t=e.landscape:null!=e.portrait&&1===n.properties.orientationIndex&&(t=e.portrait),n._fillsUnsafeArea=t,!0===t?n._incrementUnsafeAreaFillerCounter():n._decrementUnsafeAreaFillerCounter()}}}})},Control.prototype._incrementUnsafeAreaFillerCounter=function _incrementUnsafeAreaFillerCounter(){this._unsafeAreaFillerCounter++,null!=this._parent&&this._parent._incrementUnsafeAreaFillerCounter()},Control.prototype._decrementUnsafeAreaFillerCounter=function _decrementUnsafeAreaFillerCounter(){null!=this._parent&&this._parent._decrementUnsafeAreaFillerCounter(),this._unsafeAreaFillerCounter--},Control.prototype._onEnabledStateChanged=function _onEnabledStateChanged(e){},Control.prototype._destroy=function _destroy(){this.parent=void 0,null!=this.properties&&(this.properties.visible=!1,null!=this.properties.mask&&(this.properties.mask=null)),null!=this._sceneObject&&this._sceneObject.disableVisible(),t.prototype._destroy.call(this)},Control.prototype._dispose=function _dispose(){for(var e in this._parent=void 0,this._updateCount=null,a.SceneIO.removeObject(this._sceneObject),a.SceneIO.destroyObject(this._sceneObject),this._sceneObject=null,this.__hidMap)this.__hidMap[e].dispose();this.__hidMap=null,t.prototype._dispose.call(this)},Control.prototype._getSceneObjectType=function _getSceneObjectType(){throw new Error("_getSceneObjectType() method not implemented.")},e.createClass(Control,[{key:"layoutManager",get:function get(){return s.System.LayoutManager.getInstance()}},{key:"properties",get:function get(){return this._properties}},{key:"events",get:function get(){return this._events}},{key:"isPartOfUnsafeAreaFiller",get:function get(){return!0===this.properties.fillsUnsafeArea||null!=this._parent&&this._parent.isPartOfUnsafeAreaFiller}}]),Control}(c.Component),o.SceneObjectType={CONTAINER:"CONTAINER",SPRITE:"SPRITE",MASK:"MASK",TEXT:"TEXT",GRAPHICS:"GRAPHICS",TILINGSPRITE:"TILINGSPRITE",SCALE9SPRITE:"SCALE9SPRITE",VIDEO:"VIDEO",PIXISPINE:"PIXISPINE",SYSTEMTEXT:"SYSTEMTEXT",RICHTEXTSPRITE:"RICHTEXTSPRITE"},r),t.Rect=function(){function Rect(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.classCallCheck(this,Rect);var r=void 0,i=void 0,s=void 0,a=void 0,c=1,u=1,l=t.properties;if(!1===n)r=l.x,i=l.y,s=l.width,a=l.height;else{var p=t._sceneObject,d=p.originAligned,f=0,g=0;for(c=p.scaleX?p.scaleX:1,u=p.scaleY?p.scaleY:1,p.x!=p.x||p.y!=p.y||p.w!=p.w||(p.h,p.h),d?(f=p.x-p.w*p.originX*p.scaleX,g=p.y-p.h*p.originY*p.scaleY):(f=p.x+(p.w-p.w*p.scaleX)*p.originX,g=p.y+(p.h-p.h*p.scaleY)*p.originY);t.owner&&t.owner!==o;){d=(p=(t=t.owner)._sceneObject).originAligned;var _=p.scaleX?p.scaleX:1,y=p.scaleY?p.scaleY:1;c*=_,u*=y,d?(f=f*_+(p.x-p.w*p.originX*p.scaleX),g=g*y+(p.y-p.h*p.originY*p.scaleY)):(f=f*_+(p.x+(p.w-p.w*_)*p.originX),g=g*y+(p.y+(p.h-p.h*y)*p.originY))}r=f,i=g,s=l.width*c,a=l.height*u}this._w=s.toFixed(2)/1,this._h=a.toFixed(2)/1,this._topLeft=new h(r,i),this._topRight=new h(r+s,i),this._bottomLeft=new h(r,i+a),this._bottomRight=new h(r+s,i+a),this._center=new h(r+.5*s,i+.5*a),this._leftLine=new m(this._topLeft,this._bottomLeft),this._rightLine=new m(this._topRight,this._bottomRight),this._topLine=new m(this._topLeft,this._topRight),this._bottomLine=new m(this._bottomLeft,this._bottomRight),this._globalScaleX=c,this._globalScaleY=u}return Rect.prototype.dispose=function dispose(){this._w=null,this._h=null,this._topLeft.dispose(),this._topLeft=null,this._topRight.dispose(),this._topRight=null,this._bottomLeft.dispose(),this._bottomLeft=null,this._bottomRight.dispose(),this._bottomRight=null,this._center.dispose(),this._center=null,this._leftLine.dispose(),this._leftLine=null,this._rightLine.dispose(),this._rightLine=null,this._topLine.dispose(),this._topLine=null,this._bottomLine.dispose(),this._bottomLine=null,this._globalScaleX=null,this._globalScaleY=null},e.createClass(Rect,[{key:"globalScaleX",get:function get(){return this._globalScaleX}},{key:"globalScaleY",get:function get(){return this._globalScaleY}},{key:"w",get:function get(){return this._w}},{key:"h",get:function get(){return this._h}},{key:"topLeft",get:function get(){return this._topLeft}},{key:"topRight",get:function get(){return this._topRight}},{key:"bottomLeft",get:function get(){return this._bottomLeft}},{key:"bottomRight",get:function get(){return this._bottomRight}},{key:"center",get:function get(){return this._center}},{key:"leftLine",get:function get(){return this._leftLine}},{key:"rightLine",get:function get(){return this._rightLine}},{key:"topLine",get:function get(){return this._topLine}},{key:"bottomLine",get:function get(){return this._bottomLine}}]),Rect}()),h=t.Point=function(){function Point(t,n){e.classCallCheck(this,Point),this._x=t.toFixed(2)/1,this._y=n.toFixed(2)/1}return Point.prototype.dispose=function dispose(){this._x=null,this._y=null},e.createClass(Point,[{key:"x",get:function get(){return this._x}},{key:"y",get:function get(){return this._y}}]),Point}(),m=t.Line=function(){function Line(t,n){e.classCallCheck(this,Line),this._start=t,this._end=n,this._center=new h((this._start.x+this._end.x)/2,(this._start.y+this._end.y)/2)}return Line.prototype.dispose=function dispose(){this._start=null,this._end=null,this._center.dispose(),this._center=null},e.createClass(Line,[{key:"start",get:function get(){return this._start}},{key:"end",get:function get(){return this._end}},{key:"center",get:function get(){return this._center}}]),Line}()}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DataType={int:function int(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n={name:"int"};return null!=e&&(n.lowerLimit=e),null!=t&&(n.upperLimit=t),n},float:function float(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n={name:"float"};return null!=e&&(n.lowerLimit=e),null!=t&&(n.upperLimit=t),n},string:{name:"string"},array:{name:"array"},map:{name:"map"},boolean:{name:"boolean",values:[!1,!0]},enum:function _enum(e,t){return{name:"enum<"+e+">",values:Object.keys(t)}},object:{name:"object"},color:{name:"color"},sound:{name:"sound",asset:!0},texture:{name:"texture",asset:!0},font:{name:"font",asset:!0},event:{name:"event"}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.MacawTypes=void 0;var o=n(13);t.MacawTypes=function(t){function MacawTypes(n){e.classCallCheck(this,MacawTypes);var o=e.possibleConstructorReturn(this,t.call(this,n));return o._types=new Map,o}return e.inherits(MacawTypes,t),MacawTypes.prototype.getType=function getType(e){var t=this._types.get(e);if(null==t)throw new Error("MacawTypes: getType() could not find the type of "+e+". Make sure that the function MacawTypes.instance.registerType(...) is called in the "+e+" class.");return t},MacawTypes.prototype.registerType=function registerType(e,t){this._types.set(e,t)},MacawTypes}(o.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.DisposableObject=void 0;var i=n(1),s=e.interopRequireDefault(i),a=n(22);t.DisposableObject=(r=o=function(){function DisposableObject(){e.classCallCheck(this,DisposableObject),this._compositeDisposable=new s.default.Subscription,this._objectId=DisposableObject.__autoIDCount++,this._eventsList=[],this.__isDisposed=!1}return DisposableObject.prototype._createEvent=function _createEvent(){var e=new a.Event;return this._eventsList.push(e),e},DisposableObject.prototype._unbind=function _unbind(){this._compositeDisposable.unsubscribe(),this._compositeDisposable=new s.default.Subscription},DisposableObject.prototype._dispose=function _dispose(){this._eventsList=null,this._compositeDisposable.unsubscribe(),this._compositeDisposable=null,this._objectId=null},DisposableObject.prototype.dispose=function dispose(){if(!1===this.__isDisposed)try{DisposableObject.onObjectDispose.next(this),this._dispose()}finally{this.__isDisposed=!0}},e.createClass(DisposableObject,[{key:"objectId",get:function get(){return this._objectId}},{key:"isDisposed",get:function get(){return this.__isDisposed}},{key:"className",get:function get(){return this.constructor.name}}]),DisposableObject}(),o.onObjectDispose=new s.default.Subject,o.__autoIDCount=1,r)}).call(this,n(0))},function(e,t){e.exports=vendor},function(e,t,n){"use strict";(function(e){var n,o;Object.defineProperty(t,"__esModule",{value:!0});t.BaseMessage=(o=n=function(){function BaseMessage(t){if(e.classCallCheck(this,BaseMessage),null==t)throw new Error("Message source not defined");this._source=t,this._className=this.constructor.name,this._instanceId=++BaseMessage.messageCounters}return e.createClass(BaseMessage,[{key:"source",get:function get(){return this._source}},{key:"className",get:function get(){return this._className}},{key:"instanceId",get:function get(){return this._instanceId}}]),BaseMessage}(),n.messageCounters=0,o)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var o=n(9);t.Message=function(t){function Message(n,o){e.classCallCheck(this,Message);var r=e.possibleConstructorReturn(this,t.call(this,n));return r._data=o,r}return e.inherits(Message,t),e.createClass(Message,[{key:"data",get:function get(){return this._data}}]),Message}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Asset=void 0;var i=n(1),s=e.interopRequireDefault(i),a=n(7);t.Asset=(r=o=function(t){function Asset(n,o){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];e.classCallCheck(this,Asset);var a=e.possibleConstructorReturn(this,t.call(this));return a._id=n,a._sources=o,a._loadingObs=void 0,a._downloadObs=new s.default.BehaviorSubject(!1),a._contentCompanionArrivedObs=new s.default.BehaviorSubject(!1),a._isLoaded=!1,a._isDownloaded=!1,a._downloadingObs=null,a._autoLoad=r,a.isBkg="background"===i,a}return e.inherits(Asset,t),Asset.nextNumberInSequence=function nextNumberInSequence(){return Asset._numberSequence++},Asset.prototype.loadAndGet=function loadAndGet(){var e=this;return this.load().map((function(){return e.get()}))},Asset.prototype.get=function get(){if(!0===this._isLoaded)return this.id},Asset.prototype.load=function load(){var e=this;return this._isLoaded?s.default.Observable.of([]):void 0===this._loadingObs?(this._loadingObs=new s.default.Subject,this._loadingObs.subscribeExt(this,(function(t){e._isLoaded=void 0!==t})),this._downloadObs.filter((function(e){return!0===e})).switchMap((function(){return s.default.Observable.from(e.sources).concatMap((function(t){return null!=t.content?function handleMegajsonContent(e){if("application/json"===e.type)return s.default.Observable.of({data:e.content,type:e.type});if(e.type.includes("atlas"))return s.default.Observable.of({data:e.content,type:e.type});if(e.type.includes("image")){var t=new Image;return t.src=e.content,s.default.Observable.fromEvent(t,"load").first().mapTo({data:t,type:e.type})}if(e.type.includes("xml")){var n=void 0;if(window.DOMParser){n=(new DOMParser).parseFromString(e.content,"text/xml")}else{var o=document.createElement("div");o.innerHTML=e.content,n=o}return s.default.Observable.of({data:n,type:e.type})}}(t):system.resource.getResourceData(t,e.isBkg).map((function(e){if(void 0!==e)return{data:e,type:t.type}}))})).toArray()})).map((function(e){return e.filter((function(e){return void 0!==e}))})).switchMap((function(t){return e._loadToMemory(t)})).first().switchMap((function(t){return e._loadingObs.next(t),e._loadingObs.complete(),s.default.Observable.of([])}))):this._loadingObs},Asset.prototype._loadToMemory=function _loadToMemory(e){},Asset.prototype._setupSources=function _setupSources(){},Asset.prototype._getFileExtension=function _getFileExtension(e){return e.substr(e.lastIndexOf(".")+1)},Asset.prototype.download=function download(){var t,n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._autoLoad;if(!0===this._isDownloaded)return!this._isLoaded&&o&&system.scheduler.schedule((function(){n.load().observeOn(s.default.Scheduler.playnextAsap).subscribe()})),[s.default.Observable.NULL];if(null!=this._downloadingObs)return this._downloadingObs;this._downloadingObs=this.sources.filter((function(e){return null==e.content||!0===e.content})).map((function(e){return!0===e.content?n._contentCompanionArrivedObs.filter((function(e){return e})).take(1):system.resource.loadResourceData(e,n.isBkg).share()}));var r=s.default.Observable.ONE;return(t=s.default.Observable).zip.apply(t,[r].concat(e.toConsumableArray(this._downloadingObs))).subscribe((function(){n._downloadObs.next(!0),n._isDownloaded=!0,!0===o&&system.scheduler.schedule((function(){n.load().observeOn(s.default.Scheduler.playnextAsap).subscribe()}))})),this._downloadingObs},Asset.prototype.unload=function unload(){!0===this._isLoaded&&(this._isLoaded=!1,this._loadingObs=void 0)},Asset.prototype.dispose=function dispose(){this._id=null,this._sources=null,this._loadingObs=null,this._downloadObs=null,this._isLoaded=null,this._isDownloaded=null,this._autoLoad=null,this.isBkg=null,t.prototype.dispose.call(this)},e.createClass(Asset,[{key:"id",get:function get(){return this._id}},{key:"sources",get:function get(){return this._sources},set:function set(e){this._sources=e}},{key:"isLoaded",get:function get(){return this._isLoaded}},{key:"autoLoad",get:function get(){return this._autoLoad}}]),Asset}(a.DisposableObject),o._numberSequence=0,r)}).call(this,n(0))},,function(e,t,n){"use strict";(function(e){var n,o;Object.defineProperty(t,"__esModule",{value:!0});t.Singleton=(o=n=function(){function Singleton(t){if(e.classCallCheck(this,Singleton),Singleton.__symbol!==t)throw new Error("Singleton class. Use getInstance() method.")}return Singleton.prototype._init=function _init(e){},Singleton.prototype._destroy=function _destroy(){},Singleton.getInstance=function getInstance(){var e=this.name;if(Singleton.__singletons[e])return Singleton.__singletons[e];var t=Singleton.__singletons[e]=new this(Singleton.__symbol);return t.__Class=this,t._init.call(t,Singleton.__args[e]),t},Singleton.dispose=function dispose(){var e=Singleton.__singletons[this.name];e&&e._destroy(),delete Singleton.__singletons[this.name]},Singleton.disposeAll=function disposeAll(){for(var e in Singleton.__singletons){Singleton.__singletons[e].__Class.dispose()}},e.createClass(Singleton,null,[{key:"args",get:function get(){return Singleton.__args[this.name]},set:function set(e){Singleton.__args[this.name]=e}}]),Singleton}(),n.__args={},n.__singletons={},n.__symbol={},o)}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LifeCycleState={undefined:0,preload:1,init:2,bind:3,ready:4,unbind:5,destroy:6,null:7}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Capability=t.States=t.Macaw=t.Animation=t.Sound=t.Util=t.Type=t.System=t.IO=t.DataStructure=t.Logic=t.Messaging=t.Network=t.Control=t.Decorators=t.Core=void 0,n(114),n(115);var o=n(116),r=n(63),i=n(43),s=n(21),a=n(44),c=n(2),u=n(133),l=n(4),p=n(7),d=n(19),f=n(50),h=n(69),m=n(70),g=n(135),_=n(36),y=n(17),b=n(141),v=n(143),C=n(46),S=n(34),M=n(42),O=n(47),w=n(24),P=n(68),x=n(144),I=n(145),A=n(53),T=n(146);n(147),n(148);var k=n(149),E=n(175),R=e.interopRequireWildcard(E),j=n(35),D=n(9),L=n(10),N=n(81),B=n(14),F=n(77),G=n(176),U=n(177),V=n(38),q=n(178),X=n(179),H=n(180),z=n(181),W=n(182),Y=n(16),J=n(183),K=n(184),Q=n(185),$=n(186),Z=n(84),ee=n(187),te=n(54),ne=n(5),oe=n(64),re=n(188),ie=n(85),se=n(90),ae=n(86),ce=n(87),ue=n(89),le=n(88),pe=n(55),de=n(190),fe=n(191),he=n(192),me=n(193),ge=n(91),_e=n(92),ye=n(194),be=n(195),ve=n(78),Ce=n(74),Se=n(79),Me=n(75),Oe=n(51),we=n(196),Pe=n(197),xe=n(80),Ie=n(52),Ae=n(76),Te=n(198),ke=n(199),Ee=n(73),Re=n(6),je=n(200),De=n(25),Le=n(201),Ne=n(93);t.Core={Game:_.Game,Scene:y.Scene,Component:c.Component,Fallback:u.Fallback,Control:l.Control,DisposableObject:p.DisposableObject,CommandObject:d.CommandObject,StateMachine:C.StateMachine,Repository:I.Repository,Model:A.AggregateModel,AggregateModel:A.AggregateModel,ObservableModel:T.ObservableModel},t.Decorators={Deprecated:a.Deprecated,Layout:a.Layout,Manifest:a.Manifest,SoundFile:a.SoundFile,Mixin:a.Mixin,GameMessageBinding:a.GameMessageBinding,GameMessageObsBinding:a.GameMessageObsBinding,MessageBinding:a.MessageBinding,MessageObsBinding:a.MessageObsBinding,GameModelBinding:a.GameModelBinding,GameModelObsBinding:a.GameModelObsBinding,ModelBinding:a.ModelBinding,ModelObsBinding:a.ModelObsBinding,GameStateBinding:a.GameStateBinding,GameStateObsBinding:a.GameStateObsBinding,StateBinding:a.StateBinding,StateObsBinding:a.StateObsBinding,Binding:a.Binding,GameBinding:a.GameBinding},t.Control={Sprite:V.Sprite,SpriteBatch:H.SpriteBatch,Container:Y.Container,Mask:J.Mask,Graphic:K.Graphic,Text:Q.Text,SystemText:$.SystemText,MovieClip:Z.MovieClip,SyncedMovieClip:ee.SyncedMovieClip,Scale9Sprite:z.Scale9Sprite,RichTextSprite:q.RichTextSprite,TilingSprite:X.TilingSprite,Video:W.Video,SpineAnimation:Le.SpineAnimation},t.Network={XMan:k.XMan,XManIDD:R},t.Messaging={Bus:j.Bus,BaseMessage:D.BaseMessage,Message:L.Message,RepositoryMessage:N.RepositoryMessage,Control:{ShowMessage:G.ShowMessage,HideMessage:U.HideMessage},Scene:{ActivateSceneMessage:be.ActivateSceneMessage,ShowSceneMessage:ve.ShowSceneMessage,SceneShowingMessage:Ce.SceneShowingMessage,HideSceneMessage:Se.HideSceneMessage,SceneHiddenMessage:Me.SceneHiddenMessage,SceneCreatedMessage:Oe.SceneCreatedMessage,SceneBusyChangedMessage:Ae.SceneBusyChangedMessage,SceneDestroyedMessage:Ie.SceneDestroyedMessage},Workflow:{GameWorkflowStateMessage:we.GameWorkflowStateMessage,SceneWorkflowStateMessage:Pe.SceneWorkflowStateMessage,ResumingRenderAfterBootMessage:xe.ResumingRenderAfterBootMessage},MovieClip:{MovieClipMessage:te.MovieClipMessage},SpineAnimation:{SpineAnimationMessage:Ne.SpineAnimationMessage},Bridge:{SetLoaderCountMessage:Te.SetLoaderCountMessage,IncrementLoaderMessage:ke.IncrementLoaderMessage}},t.Logic={State:f.State,Model:h.Model,Rule:m.Rule,RuleCollection:g.RuleCollection,GameWorkflow:b.GameWorkflow,SceneWorkflow:v.SceneWorkflow},t.DataStructure={RandomBag:ye.RandomBag},t.IO={SceneIO:S.SceneIO,ResourceIO:O.ResourceIO.getInstance(),HID:P.HID,StorageIO:x.StorageIO,Casino:M.Casino,RenderIO:w.RenderIO},t.System={LayoutManager:De.LayoutManager},t.Type=ne.DataType,t.Util={Format:o.Format,StringProvider:r.StringProvider,ArrayUtils:i.ArrayUtils,DataTypeUtils:oe.DataTypeUtils,TintPropertiesMixin:s.TintPropertiesMixin},t.Sound={Manager:re.SoundManager,Message:{SoundPlayMessage:ae.SoundPlayMessage,SoundPlaySwapMessage:ce.SoundPlaySwapMessage,SoundFadeMessage:ie.SoundFadeMessage,SoundReportMessage:se.SoundReportMessage,SoundManagerMuteMessage:ue.SoundManagerMuteMessage,SoundStopMessage:le.SoundStopMessage}},t.Animation={Tween:de.Tween,Ticker:pe.Ticker,Timeline:fe.Timeline,ObservableTween:he.ObservableTween,Emitter:me.Emitter,Particles:{DefaultEmitterManager:ge.DefaultEmitterManager,EmitterManagerInterface:_e.EmitterManagerInterface}},t.Macaw={Types:Re.MacawTypes,Builder:Ee.MacawBuilder},t.States={LifeCycleState:B.LifeCycleState,OrientationState:F.OrientationState,SpineAnimation:{SpineAnimationState:Le.SpineAnimationState,SpineAnimationEvents:Le.SpineAnimationEvents}},t.Capability=je.EnvironmentCapability}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var i=n(1),s=e.interopRequireDefault(i),a=n(15),c=e.interopRequireWildcard(a),u=n(2),l=n(4),p=n(5),d=n(47),f=n(73),h=n(137),m=n(23),g=t.Container=(r=o=function(t){function Container(n,o,r){e.classCallCheck(this,Container);var i=e.possibleConstructorReturn(this,t.call(this,n,o,r));i._vfl=void 0,i._layoutOnce=void 0,i._groups={},i._conditionalChildren={},i.__subContainers=[],i.__subControls=[],i.properties.manifestId=i.properties.manifestId||i.constructor.__manifestId,i.properties.layoutId=i.properties.layoutId||i.constructor.__layoutId;var s=Container.getPrototypes(i);i.__manifestIds=i.properties.manifestId?[i.properties.manifestId]:[];var a=!0,c=!1,u=void 0;try{for(var l,p=s[Symbol.iterator]();!(a=(l=p.next()).done);a=!0){var f=l.value;f.constructor&&i.constructor!==f.constructor&&(f.constructor.hasOwnProperty("__manifestId")&&!i.__manifestIds.includes(f.constructor.__manifestId)&&i.__manifestIds.unshift(f.constructor.__manifestId),i.properties.layoutId||f.constructor.hasOwnProperty("__layoutId")&&(i.properties.layoutId=f.constructor.__layoutId))}}catch(e){c=!0,u=e}finally{try{!a&&p.return&&p.return()}finally{if(c)throw u}}return i.__manifestIds.length>0&&(i.manifest=d.ResourceIO.getInstance().registerManifest(i,i.__manifestIds,i.getManifestOverrides(i.__manifestIds))),null!=r&&(null!=r.vfl&&(i._vfl=i.properties.overrideSetter("vfl",r.vfl)),null!=r.children&&(i._childrenData=r.children)),i}return e.inherits(Container,t),Container.prototype.getManifestOverrides=function getManifestOverrides(e){var t=null==this.ownerGame?this:this.ownerGame;return"function"==typeof t.globalGetManifestOverrides?t.globalGetManifestOverrides(e):{toRemove:[],toMap:{}}},Container.prototype.__internalCreateControl=function __internalCreateControl(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.prototype instanceof l.Control){var r;o.parent=this;for(var i=arguments.length,s=Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];var c=(r=t.prototype.__internalCreateComponent).call.apply(r,[this,e,n,o].concat(s));return-1===this.__subControls.indexOf(c)&&this.__subControls.push(c),c instanceof Container&&-1===this.__subContainers.indexOf(c)&&this.__subContainers.push(c),c}throw new Error("createControl(): Class must inherited from 'Control'")},Container.prototype.getLifeCycleMethods=function getLifeCycleMethods(e){t.prototype.getLifeCycleMethods.call(this,e),e(m.LifeCycleStep.INIT_BEFORE,this._internalBeforeInit)},Container.prototype._internalBeforeInit=function _internalBeforeInit(){this.layoutManager.alignContainerBeforeInit(this)},Container.prototype.__unloadSceneResources=function __unloadSceneResources(){this.manifest.unload()},Container.prototype._getSceneObjectType=function _getSceneObjectType(){return l.Control.SceneObjectType.CONTAINER},Container.prototype.reAlignControls=function reAlignControls(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=c.System.LayoutManager.getInstance(),o=!0,r=!1,i=void 0;try{for(var s,a=this.getControls(!1)[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var u=s.value;n.alignControl(u,e,t)}}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}},Container.prototype.updateOrientationOrHandedness=function updateOrientationOrHandedness(){c.System.LayoutManager.getInstance().updateControlOrientation(this)},Container.prototype.getComponents=function getComponents(){return this.__componentList},Container.prototype.createComponent=function createComponent(e,n){for(var o=arguments.length,r=Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];return e.prototype instanceof c.Core.Control?this.createControl.apply(this,[e,n].concat(r)):e.prototype instanceof c.Core.Component?(s=t.prototype.createComponent).call.apply(s,[this,e,n].concat(r)):void 0;var s},Container.prototype.createControl=function createControl(e,n){for(var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length,s=Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];if(e.prototype instanceof c.Core.Control){var u=this.__internalCreateControl.apply(this,[e,n,r].concat(s));return u._internalAfterConstruction(),u}return(o=t.prototype.createComponent).call.apply(o,[this,e,n,r].concat(s))},Container.prototype.createComponentAsync=function createComponentAsync(e,n){for(var o=arguments.length,r=Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];return e.prototype instanceof c.Core.Control?this.createControlAsync.apply(this,[e,n].concat(r)):e.prototype instanceof c.Core.Component?(s=t.prototype.createComponentAsync).call.apply(s,[this,e,n].concat(r)):void 0;var s},Container.prototype.createControlAsync=function createControlAsync(e,n){for(var o=arguments.length,r=Array(o>3?o-3:0),i=3;i<o;i++)r[i-3]=arguments[i];var a,l=this,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.prototype instanceof c.Core.Control){var d=new s.default.Subject;return system.scheduler.immediate((function(){var t=l.__internalCreateControl.apply(l,[e,n,p].concat(r));t._internalAfterConstruction(),d.next(t)})),d.take(1).switchMap((function(e){return u.Component.waitForCreated(e)}))}return(a=t.prototype.createComponentAsync).call.apply(a,[this,e,n,p].concat(r))},Container.prototype.createConditionalControlAsync=function createConditionalControlAsync(){for(var e=this,t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var r=n.reduce((function(t,n){return e._conditionalChildren.hasOwnProperty(n)&&t.push(e._conditionalChildren[n]),t}),[]);return f.MacawBuilder.buildControl(this,r).first().switchMap((function(e){var t,n=[];for(var o in e)n.push(c.Core.Component.waitForCreated(e[o]));return n.length>0?n.length>1?(t=s.default.Observable).zip.apply(t,n).map((function(t){return Object.keys(e).reduce((function(e,n,o){return e[n]=t[o],e}),{})})).first():n[0].first().map((function(e){var t={};return t[e.id]=e,t})):s.default.Observable.of([])}))},Container.prototype.getControl=function getControl(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=null,o=this.getControls(t),r=!0,i=!1,s=void 0;try{for(var a,c=o[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var u=a.value;if(u.id===e){n=u;break}}}catch(e){i=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw s}}return n},Container.prototype._beforePreload=function _beforePreload(){var e=this;return s.default.ensureObservable(t.prototype._beforePreload.call(this)).switchMap((function(t){return e.__manifestIds=e.__manifestIds.filter((function(e,t,n){return t===n.indexOf(e)})),e.__manifestIds.length>0?e.manifest.initialize():s.default.Observable.of(t)})).switchMap((function(t){return e.manifest&&e.manifest.preloadProgressObs.value<100&&(e.ownerScene?e.ownerScene._preloadQueue.push(e.manifest.preloadProgressObs):e.ownerGame&&e.ownerGame._preloadQueue.push(e.manifest.preloadProgressObs)),s.default.Observable.of(t)}))},Container.prototype.getControls=function getControls(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!0===e?this._getControlsRecursive():this.__subControls},Container.prototype.getContainers=function getContainers(){return this.__subContainers},Container.prototype.removeComponent=function removeComponent(e){var n=void 0;this.__subContainers&&(n=this.__subContainers.indexOf(e))>-1&&this.__subContainers.splice(n,1),this.__subControls&&(n=this.__subControls.indexOf(e))>-1&&this.__subControls.splice(n,1),t.prototype.removeComponent.call(this,e)},Container.prototype.addConditionalChild=function addConditionalChild(e,t){if(this._conditionalChildren.hasOwnProperty(e))throw new Error("addConditionalChild(): Cannot assign the same id to multiple conditional children");this._conditionalChildren[e]=t},Container.prototype._getControlsRecursive=function _getControlsRecursive(e){return this.__subControls?this.__subControls.reduce(Container.reduceConcatControlsFunction,e||[]):[]},Container.reduceConcatControlsFunction=function reduceConcatControlsFunction(e,t){return e.push(t),t instanceof Container&&t._getControlsRecursive(e),e},Container.prototype._addComponentGroup=function _addComponentGroup(e,t){if(this._groups.hasOwnProperty(e))throw new Error("addComponentGroup(): Cannot add two groups with the same groupId");if(!Array.isArray(t))throw new Error("addComponentGroup(): components must be an array");this._groups[e]=h.ComponentGroup.createGroup(t)},Container.propsFromLayout=function propsFromLayout(e){return{x:e.left,y:e.top,width:e.width,height:e.height,designW:e.width,designH:e.height,z:e.zIndex}},Container.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e);var o=c.System.LayoutManager.getInstance();e({layoutOnce:{get:function get(){return n._layoutOnce},set:function set(e){n._layoutOnce=e}},vfl:{get:function get(){return n._vfl},set:function set(e){n._vfl!==e&&(n._vfl=e,o.vflChanged(n))}},designW:{get:function get(){return n._designW},set:function set(e){n._designW=e}},designH:{get:function get(){return n._designH},set:function set(e){n._designH=e}},manifestId:{default:void 0,type:p.DataType.string,readonly:!0},layoutId:{default:void 0,type:p.DataType.string,readonly:!0}})},Container.prototype._dispose=function _dispose(){t.prototype._dispose.call(this),this.manifest&&this.__unloadSceneResources()},Container.prototype._destroy=function _destroy(){for(var e in this._vfl=null,this._childrenData=null,this._layoutOnce=null,this._groups)this._groups[e].dispose();this._groups=null,this._conditionalChildren=null,this.__subContainers=null,this.__subControls=null,t.prototype._destroy.call(this)},Container}(l.Control),o.getPrototypes=function(e){for(var t=[];(e=Object.getPrototypeOf(e))instanceof g;)t.push(e);return t},r)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Scene=void 0;var i=n(1),s=e.interopRequireDefault(i),a=n(15),c=e.interopRequireWildcard(a),u=n(35),l=n(71),p=n(2),d=n(72),f=n(5),h=n(16),m=n(14),g=n(46),_=n(51),y=n(52),b=n(74),v=n(75),C=n(76),S=n(25);t.Scene=(r=o=function(t){function Scene(n,o,r){e.classCallCheck(this,Scene);var i=e.possibleConstructorReturn(this,t.call(this,n,o,r));return i._sceneObject.visible=!1,i._sceneObject.disableVisible(),i._classComponentMap=e.defineProperty({},i.className,[i]),S.LayoutManager.getInstance().updateSceneLayoutCache(i),i._assetQueue=new d.AssetQueue,i._preloadQueue=[],i._downloadPercentageObs=new s.default.BehaviorSubject(0),i.lifeState.takeWhile((function(e){return e<m.LifeCycleState.ready})).subscribeExt(i,{complete:function complete(){i._sceneObject.enableVisible(),system.scene.informNewNode(),i.update()}}),i._lifeStatePercentageObs=i.lifeState.map((function(e){return Math.min(Math.max(e,0),m.LifeCycleState.ready)/m.LifeCycleState.ready*100})),i._internalProgressObs=i.ownerGame.getProgress(i),i._createProgressSubscription(),i.manifest&&i._downloadDelayedAssets(),i._sceneBuiltObs=new s.default.BehaviorSubject(!1),i._isBusy=new s.default.BehaviorSubject(!1),i._isActivated=new s.default.BehaviorSubject(!1),i._isSubscribeExtFlowEnabled=new s.default.BehaviorSubject(!0),i._sceneManager=i.ownerGame.sceneManager,i._updatingShowingStatemachine=!1,i._updatingVisibleProperty=!1,i._scene=!0===i.isSubScene?i._scene:i,i._bus=i.isSubScene?i._scene._bus:u.Bus.getInstance().channel(i.className),i._store=i.isSubScene?i._scene._store:l.Store.getInstance().subStore(i.className),i._createShowingStateMachine(),i}return e.inherits(Scene,t),Scene.waitForShowing=function waitForShowing(e){if(!(e instanceof Scene))throw Error("Scene.waitForShowing(): Specified scene must be of type 'Scene'.");return e._showingStateMachine.filter((function(e){return e===Scene.ShowingState.showing})).first().mapTo(e)},Scene.waitForHidden=function waitForHidden(e){if(!(e instanceof Scene))throw Error("Scene.waitForHidden(): Specified scene must be of type 'Scene'.");return e._showingStateMachine.filter((function(e){return e===Scene.ShowingState.hidden})).first().mapTo(e)},Scene.prototype.show=function show(){this._showingStateMachine.value!==Scene.ShowingState.hidden&&this._showingStateMachine.value!==Scene.ShowingState.undefined||this._showingStateMachine.next(Scene.ShowingState.show)},Scene.prototype.hide=function hide(){this._showingStateMachine.value!==Scene.ShowingState.showing&&this._showingStateMachine.value!==Scene.ShowingState.undefined||this._showingStateMachine.next(Scene.ShowingState.hide)},Scene.prototype.getState=function getState(e){return this._store.getState(e)},Scene.prototype.createSubScene=function createSubScene(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._sceneManager.createScene(this,e,t)},Scene.prototype.destroySubScene=function destroySubScene(e){return this._sceneManager.destroyScene(this,e)},Scene.prototype.getSubScene=function getSubScene(e){return this._sceneManager.getScene(this,e)},Scene.prototype._createProgressSubscription=function _createProgressSubscription(){var e=this;this._delayedAssetsPercentage=new s.default.BehaviorSubject(0);var t=this._getDelayedDownloadPercentageWeight(),n=.75-t;s.default.Observable.combineLatest(this._downloadPercentageObs,this._lifeStatePercentageObs,this._delayedAssetsPercentage,(function(e,o,r){return Math.round(e*n+.25*o+r*t)})).distinctUntilChanged().takeWhile((function(e){return e<100})).subscribeExt(this,{next:function next(t){e._internalProgressObs.next(t)},error:function error(e){},complete:function complete(){e._internalProgressObs.next(100)}})},Scene.prototype._getDelayedDownloadPercentageWeight=function _getDelayedDownloadPercentageWeight(){switch(this._delayedAssetNames.length){case 0:return 0;case 1:return.05;case 2:return.1;case 3:return.15;default:return.2}},Scene.prototype._componentNotification=function _componentNotification(e,t){var n=this._classComponentMap[e.className]=this._classComponentMap[e.className]||[];switch(t){case p.Component.Operation.add:n.push(e);break;case p.Component.Operation.remove:n.splice(n.indexOf(e),1)}},Scene.prototype._onActivityChanged=function _onActivityChanged(e){this._isBusy.next(e),this.sendMessage(new C.SceneBusyChangedMessage(this,e))},Scene.prototype._makeCanStartDownloadingDelayedAssetsObs=function _makeCanStartDownloadingDelayedAssetsObs(){return this.manifest.preloadProgressObs.filter((function(e){return 100===e})).take(1)},Scene.prototype._downloadDelayedAssets=function _downloadDelayedAssets(){var e=this;this._delayedAssetNames.length>0&&this._makeCanStartDownloadingDelayedAssetsObs().switchMap((function(){var t=e.assets(e._delayedAssetNames);return t.progress.subscribeExt(e,e._delayedAssetsPercentage),t.download(),t.loadAndGet().take(1)})).subscribeExt(this,(function(t){e._onDelayedAssetsArrival(t)}))},Scene.prototype._onDelayedAssetsArrival=function _onDelayedAssetsArrival(e){},Scene.prototype._afterInit=function _afterInit(){if(t.prototype._afterInit.call(this),this._showingStateMachine.value===Scene.ShowingState.undefined){var e=!0===this.properties.visible&&this.properties.alpha>0?Scene.ShowingState.showing:Scene.ShowingState.hidden;this._showingStateMachine.next(e)}this.sendMessage(new _.SceneCreatedMessage(this))},Scene.prototype._bind=function _bind(){t.prototype._bind.call(this),this._bindToShowingStateMachine(),this._bindToPropertiesChange()},Scene.prototype._bindToShowingStateMachine=function _bindToShowingStateMachine(){var e,t=this;this._showingStateMachine.filter((function(){return!1===t._updatingShowingStatemachine})).do((function(){return t._updatingShowingStatemachine=!0})).pausableBuffered(this.lifeState.map((function(e){return e===m.LifeCycleState.ready}))).do((function(e){t._updatingVisibleProperty=!0;try{t.properties.visible=e!==Scene.ShowingState.undefined&&e!==Scene.ShowingState.hidden}finally{t._updatingVisibleProperty=!1}})).switchMap((function(e){switch(e){case Scene.ShowingState.show:return t._onShowState();case Scene.ShowingState.showing:return t._onShowingState();case Scene.ShowingState.hide:return t._onHideState();case Scene.ShowingState.hidden:return t._onHiddenState();default:return s.default.Observable.UNDEFINED}})).do((function(){return t._updatingShowingStatemachine=!1})).filter((function(e){return void 0!==e})).subscribeExtIgnoringFlowPause(this,(e=this._showingStateMachine).next.bind(e))},Scene.prototype._onShowState=function _onShowState(){return this._sceneObject.enableSpatialUpdates=!1,s.default.ensureObservable(this._show()).first().mapTo(Scene.ShowingState.showing)},Scene.prototype._onShowingState=function _onShowingState(){return this._sceneObject.enableSpatialUpdates=!0,this.update(),this.sendMessage(new b.SceneShowingMessage(this)),s.default.Observable.UNDEFINED},Scene.prototype._onHideState=function _onHideState(){return this._sceneObject.enableSpatialUpdates=!1,s.default.ensureObservable(this._hide()).mapTo(Scene.ShowingState.hidden)},Scene.prototype._onHiddenState=function _onHiddenState(){return this._sceneObject.enableSpatialUpdates=!0,this.update(),this.sendMessage(new v.SceneHiddenMessage(this)),s.default.Observable.UNDEFINED},Scene.prototype._bindToPropertiesChange=function _bindToPropertiesChange(){var e=this;this.properties.onChanged.filter((function(t){return(void 0===t||"visible"===t)&&!1===e._updatingVisibleProperty})).map((function(){return e.properties.visible})).distinctUntilChanged().filter((function(){return!1===e._updatingShowingStatemachine})).subscribeExtIgnoringFlowPause(this,(function(t){e._updatingShowingStatemachine=!0;try{e._showingStateMachine.next(!0===t?Scene.ShowingState.showing:Scene.ShowingState.hidden)}finally{e._updatingShowingStatemachine=!1}}))},Scene.prototype._activate=function _activate(){this._isActivated.next(!0)},Scene.prototype._deactivate=function _deactivate(){this._isActivated.next(!1)},Scene.prototype._pauseSubscribeExtFlow=function _pauseSubscribeExtFlow(){this._isSubscribeExtFlowEnabled.next(!1)},Scene.prototype._resumeSubscribeExtFlow=function _resumeSubscribeExtFlow(){this._isSubscribeExtFlowEnabled.next(!0)},Scene.prototype._createShowingStateMachine=function _createShowingStateMachine(){this._showingStateMachine=new g.StateMachine(Scene.ShowingState.undefined,(function(e,t){return e!==Scene.ShowingState.undefined||t!==Scene.ShowingState.showing&&t!==Scene.ShowingState.hidden?e===Scene.ShowingState.showing&&t===Scene.ShowingState.hide?t:e===Scene.ShowingState.hide&&t===Scene.ShowingState.hidden?t:e===Scene.ShowingState.hidden&&t===Scene.ShowingState.show?t:e===Scene.ShowingState.show&&t===Scene.ShowingState.showing?t:e:t})),this._showingStateMachine._gid=this._gid+".visibleStateMachine"},Scene.prototype._afterDestroy=function _afterDestroy(){return this.sendMessage(new y.SceneDestroyedMessage(this)),t.prototype._afterDestroy.call(this)},Scene.prototype._preload=function _preload(){var t,n=this;this._preloadQueue.length>0?(t=s.default.Observable).combineLatest.apply(t,e.toConsumableArray(this._preloadQueue).concat([function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}),0)/t.length}])).subscribeExt(this,(function(e){n._downloadPercentageObs.next(e)})):this._downloadPercentageObs.next(100);return(this.manifest?this.manifest.download("preload"):s.default.Observable.NULL).subscribeExt(this),(void 0!==this.properties.layoutId&&null!==this.properties.layoutId?c.Macaw.Builder.buildScene(this,this.properties.layoutId).mapTo(void 0):s.default.Observable.UNDEFINED).subscribeExt(this,(function(){n._sceneBuiltObs.next(!0)})),s.default.Observable.NULL},Scene.prototype._show=function _show(){return s.default.Observable.NULL},Scene.prototype._hide=function _hide(){return s.default.Observable.NULL},Scene.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e);var o=c.System.LayoutManager.getInstance();e({showingState:{get:function get(){return n._showingStateMachine.asObservable()}},width:{default:0,type:f.DataType.int(),sceneObjectProperty:"w",get:function get(){return n._sceneObject.w},set:function set(e){o.currentDimensions.safeArea.designW,n._sceneObject.w=o.currentDimensions.safeArea.designW}},height:{default:0,type:f.DataType.int(),sceneObjectProperty:"h",get:function get(){return n._sceneObject.h},set:function set(e){o.currentDimensions.safeArea.designH,n._sceneObject.h=o.currentDimensions.safeArea.designH}},hasTransparentBackground:{default:!1,get:function get(){return n._hasTransparentBackground},set:function set(e){n._hasTransparentBackground=e}}})},Scene.prototype._alignControl=function _alignControl(e){var n=e.width/e.designW,o=e.height/e.designH;e.width=e.designW,e.height=e.designH,e.scaleX=n,e.scaleY=o,t.prototype._alignControl.call(this,e)},Scene.prototype._dispose=function _dispose(){this.ownerGame&&this.ownerGame.removeProgressRequest(this.constructor.name),this._showingStateMachine.dispose(),this._showingStateMachine=null,this._updatingShowingStatemachine=null,this._updatingVisibleProperty=null,this._classComponentMap=null,this._sceneManager=null,!1===this.isSubScene&&(this._store.dispose(),this._bus.dispose()),null!=this._internalProgressObs&&(this._internalProgressObs.unsubscribe(),this._internalProgressObs=null),null!=this._delayedProgressObs&&(this._delayedProgressObs.unsubscribe(),this._delayedProgressObs=null),this._store=null,this._bus=null,this._isBusy=null,this._isActivated=null,this._hasTransparentBackground=null,t.prototype._dispose.call(this)},e.createClass(Scene,[{key:"sceneBuiltObs",get:function get(){return this._sceneBuiltObs}},{key:"isMainScene",get:function get(){return this._sceneManager.mainScene.value===this}},{key:"isSubScene",get:function get(){return this.owner instanceof Scene}},{key:"isActivated",get:function get(){return this._isActivated}},{key:"sceneManager",get:function get(){return this._sceneManager}},{key:"assetQueue",get:function get(){return this._assetQueue}},{key:"_delayedAssetNames",get:function get(){return[]}},{key:"soundFile",get:function get(){return this._soundFile}},{key:"progressObs",get:function get(){return this._internalProgressObs}},{key:"progress",get:function get(){return this.progressObs}}]),Scene}(h.Container),o.ShowingState={undefined:0,show:1,showing:2,hide:3,hidden:4},r)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseGameMessage=void 0;var o=n(10);t.BaseGameMessage=function(t){function BaseGameMessage(){return e.classCallCheck(this,BaseGameMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(BaseGameMessage,t),BaseGameMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.CommandObject=void 0;var o=n(1),r=e.interopRequireDefault(o);t.CommandObject=function(t){function CommandObject(){e.classCallCheck(this,CommandObject);var n=new r.default.Subject,o=new r.default.Subject,i=e.possibleConstructorReturn(this,t.call(this,n,o));return i.__isDisposed=!1,i._request=n.asObservable(),i._response=o,i._compositeDisposable=new r.default.Subscription,i}return e.inherits(CommandObject,t),CommandObject.prototype._destroyCommandObject=function _destroyCommandObject(){this._response=null,this._request=null,this._compositeDisposable.unsubscribe(),this._compositeDisposable=null},CommandObject.prototype.dispose=function dispose(){if(!1===this.__isDisposed)try{this._destroyCommandObject()}finally{this.__isDisposed=!0}},e.createClass(CommandObject,[{key:"className",get:function get(){return this.constructor.name}}]),CommandObject}(r.default.AnonymousSubject)}).call(this,n(0))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TintPropertiesMixin=function TintPropertiesMixin(e){return{tint:{sceneObjectProperty:!0,default:16777215,get:function get(){return e._sceneObject.tint},set:function set(t){e._sceneObject.tint=0|t}},tintR:{get:function get(){return e._sceneObject.tint>>>16},set:function set(t){var n=0|t;e._sceneObject.tint=(65535&e._sceneObject.tint)+(n<<16)}},tintG:{get:function get(){return(65280&e._sceneObject.tint)>>>8},set:function set(t){var n=0|t;e._sceneObject.tint=(16711935&e._sceneObject.tint)+(n<<8)}},tintB:{get:function get(){return 255&e._sceneObject.tint},set:function set(t){var n=0|t;e._sceneObject.tint=(16776960&e._sceneObject.tint)+n}}}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var o=n(1),r=e.interopRequireDefault(o);t.Event=function(t){function Event(){e.classCallCheck(this,Event);var n=e.possibleConstructorReturn(this,t.call(this));return n._asObservable=t.prototype.asObservable.call(n),n}return e.inherits(Event,t),Event.prototype.asObservable=function asObservable(){return this._asObservable},Event.prototype.error=function error(){throw new Error("Cannot use 'error()' on Event class.")},Event.prototype.complete=function complete(){throw new Error("Cannot use 'complete()' on Event class.")},Event}(r.default.Subject)}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLifeCyclePhase=function getLifeCyclePhase(e){switch(e){case o.preload:case o.init:case o.bind:case o.ready:return r.CONSTRUCT;case o.unbind:case o.destroy:case o.null:return r.DESTRUCT;default:return r.UNDEFINED}};var o=t.LifeCycleState={undefined:0,preload:1,init:2,bind:3,ready:4,unbind:5,destroy:6,null:7},r=t.LifeCyclePhase={UNDEFINED:0,CONSTRUCT:1,DESTRUCT:2};t.LifeCycleStep={CONSTRUCT_AFTER:0,PRELOAD_BEFORE:1,PRELOAD:2,PRELOAD_AFTER:3,INIT_BEFORE:4,INIT:5,INIT_AFTER:6,BIND_BEFORE:7,BIND:8,BIND_AFTER:9,READY_BEFORE:10,READY:11,READY_AFTER:12,UNBIND_BEFORE:13,UNBIND:14,UNBIND_AFTER:15,FINALIZE_BEFORE:16,FINALIZE:17,FINALIZE_AFTER:18,DESTROY:19}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RenderIO=void 0;var o=n(1),r=e.interopRequireDefault(o);t.RenderIO=function(){function RenderIO(){e.classCallCheck(this,RenderIO)}return RenderIO.onResize=function onResize(){return system.renderer?system.renderer.onResize().filter((function(e){return null!=e})):new r.default.Subject},RenderIO.suspend=function suspend(){system.renderService&&system.renderService.suspend()},RenderIO.resume=function resume(){system.renderService&&system.renderService.resume()},RenderIO.resumeAfterInitialLoad=function resumeAfterInitialLoad(){system.renderService&&system.renderService.resumeAfterInitialLoad()},e.createClass(RenderIO,null,[{key:"DesignDimensions",get:function get(){return system.renderer?system.renderer.designDimensions:{}}},{key:"Dimensions",get:function get(){return system.renderer?system.renderer.dimensions:{}}},{key:"Orientations",get:function get(){return system.renderer?system.renderer.orientations:{}}},{key:"orientation",get:function get(){return system.renderer?system.renderer.orientation:{}}},{key:"leftHandedMode",get:function get(){return system.renderer?system.renderer.leftHandedMode:{}},set:function set(e){if(!system.renderer)return{};system.renderer.leftHandedMode=e}},{key:"bufferPercentageSize",get:function get(){return system.renderer?system.renderer.bufferPercentageSize:{}}},{key:"lastRenderTime",get:function get(){return system.renderer?system.renderer.lastRenderTime:{}}},{key:"activeResizeDisabled",set:function set(e){system.renderService&&(system.renderService.activeResizeDisabled=e)}}]),RenderIO}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutManager=void 0;var o=n(13),r=n(4),i=n(16),s=n(17),a=n(24),c=n(34),u=n(138),l=n(14),p=n(1),d=e.interopRequireDefault(p),f=0,h=1,m=2,g={x:0,y:0},_=[];t.LayoutManager=function(t){function LayoutManager(){return e.classCallCheck(this,LayoutManager),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(LayoutManager,t),LayoutManager.prototype._init=function _init(e){var n=this;t.prototype._init.call(this,e),this._layoutCache=new u.LayoutCache,this._processVflChanged=!0,this._enableResizeObservable=new d.default.BehaviorSubject(!0),this._onResizeCompleteObs=new d.default.Subject,this._updatingUnsafeAreaFillers=!1,this._dimensions={width:system.renderService.dimensions.w,height:system.renderService.dimensions.h,designW:system.renderService.designDimensions.w,designH:system.renderService.designDimensions.h,safeArea:{x:0,y:0,w:system.renderService.dimensions.w,h:system.renderService.dimensions.h,designW:system.renderService.designDimensions.w,designH:system.renderService.designDimensions.h}},this._safeAreaLocal={x:0,y:0,w:0,h:0},this._updateSafeAreaLocal(),a.RenderIO.onResize().pausable(this._enableResizeObservable).scan((function(e,t){return{width:t.w,height:t.h,designW:t.designW,designH:t.designH,safeArea:t.safeArea,orientation:t.orientation,orientationChanged:e&&e.orientation!==t.orientation,safeAreaChanged:e&&(e.safeArea.x!==t.safeArea.x||e.safeArea.y!==t.safeArea.y||e.safeArea.w!==t.safeArea.w||e.safeArea.h!==t.safeArea.h||e.safeArea.designW!==t.safeArea.designW||e.safeArea.designH!==t.safeArea.designH)}}),null).distinctUntilChanged((function(e,t){return e.width===t.width&&e.height===t.height&&e.designW===t.designW&&e.designH===t.designH&&!0!==t.safeAreaChanged})).subscribe((function(e){n._enableResizeObservable.next(!1),e.firstResize=void 0===n._dimensions,n._dimensions=e,n._updateSafeAreaLocal();try{c.SceneIO.disableSpatialHash(),a.RenderIO.suspend();try{if(Game.instance.properties.updateValues({width:e.designW,height:e.designH,designW:e.designW,designH:e.designH,safeArea:e.safeArea}),!0===e.orientationChanged||!0===e.firstResize){n._processVflChanged=!1;try{n._updateAllControlOrientation(Game.instance,e.orientation)}finally{n._processVflChanged=!0}}n._updateAllSceneLayoutCache(e);var t=!0===e.orientationChanged;Game.instance.reAlignControls(!0,t)}finally{c.SceneIO.enableSpatialHash(),a.RenderIO.resume()}}finally{n._enableResizeObservable.next(!0),n._onResizeCompleteObs.next()}}))},LayoutManager.prototype.updateControlOrientation=function updateControlOrientation(e){var t=this.currentOrientation,n=this._processVflChanged;this._processVflChanged=!1;try{this._updateAllControlOrientation(e,t,!1)}finally{this._processVflChanged=n}},LayoutManager.prototype._updateAllControlOrientation=function _updateAllControlOrientation(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&e.lifeState&&(e.properties.updateOrientation(t),1==n&&e.lifeState.value>=l.LifeCycleState.bind&&e._orientationUpdate(t),e instanceof i.Container&&e.lifeState.value<=l.LifeCycleState.ready)){var o=!0,r=!1,s=void 0;try{for(var a,c=e.getControls(!1)[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var u=a.value;this._updateAllControlOrientation(u,t)}}catch(e){r=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(r)throw s}}}},LayoutManager.prototype._updateSafeAreaLocal=function _updateSafeAreaLocal(){var e=this._dimensions,t=this._safeAreaLocal,n=e.width/e.designW,o=e.height/e.designH;t.x=e.safeArea.x/n,t.y=e.safeArea.y/o,t.w=e.safeArea.w/n,t.h=e.safeArea.h/o},LayoutManager.prototype._updateAllSceneLayoutCache=function _updateAllSceneLayoutCache(){var e=Game.instance.sceneManager.getScenes(),t=!0,n=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;this.updateSceneLayoutCache(s)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}},LayoutManager.prototype.updateSceneLayoutCache=function updateSceneLayoutCache(e){var t=this._dimensions,n=this.currentSafeAreaDesignResolution,o=t.orientation,r=this._layoutCache.getData(e._parent,o,n);if(!r){var i=LayoutManager.getLayoutDataObject(!1,e._parent);r=this._layoutCache.updateData(e._parent,o,n,i,u.ALIGNMENT_DATA_TYPE.SCENE)}r.subControls=r.subControls||{};var s=r.subControls[e.id]=r.subControls[e.id]||{};s.__isScene=!0,s.x=this._safeAreaLocal.x,s.y=this._safeAreaLocal.y,s.width=this._safeAreaLocal.w,s.height=this._safeAreaLocal.h,s.designW=t.safeArea.designW,s.designH=t.safeArea.designH},LayoutManager.controlPositionValid=function controlPositionValid(e,t){return e.properties.x===t.x&&e.properties.y===t.y&&e.properties.z===t.z},LayoutManager.controlSizeValid=function controlSizeValid(e,t){return!(!e||!t)&&(e.properties.width>0&&e.properties.width===t.width&&e.properties.height>0&&e.properties.height===t.height)},LayoutManager.controlAlignmentState=function controlAlignmentState(e,t){var n=f;return LayoutManager.controlPositionValid(e,t)&&(n|=h),LayoutManager.controlSizeValid(e,t)&&(n|=m),n},LayoutManager.prototype.vflChanged=function vflChanged(e){if(!1!==this._processVflChanged){if(!(e instanceof i.Container))throw new Error("LayoutManager.vflChanged(): Parameter container must be of type 'Container'.");if(e.properties.vfl)if(e._lifeStateMachine.value>=l.LifeCycleState.init){var t=!0,n=!1,o=void 0;try{for(var r,s=e.getControls(!1)[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;this.alignControl(a,!0)}}catch(e){n=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw o}}}else e._lifeStateMachine.value>=l.LifeCycleState.preload&&this.calculateContainerLayoutData(e)}},LayoutManager.prototype.assignControlOrientation=function assignControlOrientation(e,t){var n=this.currentOrientation;this._dimensions&&t.orientationIndex!=n&&t.updateOrientation(n)},LayoutManager.prototype.alignControlAfterInit=function alignControlAfterInit(e){!1===this._autoCorrectParentScene(e)&&this.alignControl(e,!1),e._orientationUpdate(this.currentOrientation),!0===system.scene._world._hasInitialUpdatePassed&&e instanceof s.Scene&&(this._updatingUnsafeAreaFillers=!0,this.alignControl(e,!0,!1),this._updatingUnsafeAreaFillers=!1)},LayoutManager.prototype.alignContainerBeforeInit=function alignContainerBeforeInit(e){this._autoCorrectParentScene(e);var t=this.calculateContainerLayoutData(e);if(t)for(var n in t.subControls){var o=e.getControl(n);o&&o.properties.updateValues(t.subControls[n])}},LayoutManager.prototype.alignControl=function alignControl(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(e instanceof r.Control))throw new Error("LayoutManager.alignControl(): Parameter control must be of type 'Control'.");if(e&&e.lifeState){var o=!1,s=e.properties.width,a=e.properties.height,c=e.lifeState.value,u=c>=l.LifeCycleState.init,p=this.currentOrientation;e.properties.orientationIndex!==p&&(e.properties.updateOrientation(p),n=!0),!0===system.scene._world._hasInitialUpdatePassed&&(e._unsafeAreaFillerCounter>0&&(o=!0),!0===e.properties.fillsUnsafeArea&&(n=!0));var d=this.getControlAlignData(e)||{},f=this.__alignIds&&this.__alignIds[p];if(void 0===f||!0===u||!0===n){var h=!!d.properties;if(!0===this._updatingUnsafeAreaFillers&&!0!==n&&(h=!1),!0===h&&e._alignControl(JSON.parse(JSON.stringify(d.properties))),!0===t&&e instanceof i.Container&&(!0===n||!0===o||s!==e.properties.width||a!==e.properties.height||s===a)&&e.lifeState.value<=l.LifeCycleState.ready){var m=!0,g=!1,_=void 0;try{for(var y,b=e.getControls(!1)[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var v=y.value;this.alignControl(v,t,n)}}catch(e){g=!0,_=e}finally{try{!m&&b.return&&b.return()}finally{if(g)throw _}}}if(!0===h&&(this.safeInvokeAfterAlignControl(e),u&&d.alignId)){var C=e.__alignIds||(e.__alignIds=[void 0,void 0]);C[p]=d.alignId}}}},LayoutManager.prototype.safeInvokeAfterAlignControl=function safeInvokeAfterAlignControl(e){var t=this;e.lifeState.value>=l.LifeCycleState.init?e._afterAlign():void 0===e.__initCompleteObs&&(e.__initCompleteObs=e._lifeStateMachine.filter((function(e){return e>=l.LifeCycleState.bind})).first().subscribe((function(){t._autoCorrectParentScene(e),e._afterAlign(),e.__initCompleteObs=void 0})))},LayoutManager.prototype.getControlAlignData=function getControlAlignData(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(e instanceof r.Control))throw new Error("LayoutManager.getControlAlignData(): Parameter control must be of type 'Control'.");if(e._parent){var n=this.currentSafeAreaDesignResolution,o=this.currentOrientation,i=this._layoutCache.getData(e._parent,o,n);if(!0!==t||i&&void 0!==i.vfl&&e._parent&&i.vfl===e._parent.properties.vfl&&(!0!==e.isPartOfUnsafeAreaFiller||!0!==system.scene._world._hasInitialUpdatePassed)||(i=this.calculateContainerLayoutData(e._parent,o)),i&&i.subControls&&i.subControls.hasOwnProperty(e.id))return{properties:i.subControls[e.id],alignId:i.gid+"_"+i.timeMs,gid:e.gid,orientation:o}}},LayoutManager.prototype.calculateContainerLayoutData=function calculateContainerLayoutData(e){if(!(e instanceof i.Container))throw new Error("LayoutManager.calculateContainerLayoutData(): Parameter container must be of type 'Container'.");var t=this.currentSafeAreaDesignResolution,n=this.currentOrientation;n!=e.properties.orientationIndex&&e.properties.updateOrientation(n);var o=this._calculateContainerLayoutData(e,n);return this._layoutCache.updateData(e,n,t,o)},LayoutManager.prototype._isPreParsedVfl=function _isPreParsedVfl(e){return Array.isArray(e)&&e.length>0&&Array.isArray(e[0])},LayoutManager.prototype._isVflSolverKey=function _isVflSolverKey(e){return 1===e.length&&null!=e[0].vflSolverScriptKey},LayoutManager.prototype._pickBetweenTwoSolvedVflValues=function _pickBetweenTwoSolvedVflValues(e,t){return null==e&&(e=0),null==t&&(t=0),Math.abs(e)>Math.abs(t)?e:t},LayoutManager.prototype._calculateContainerLayoutData=function _calculateContainerLayoutData(t,n){var o=this,r=t.properties.vfl;if(r){var i=this._isPreParsedVfl(r)?r:[AutoLayout.VisualFormat.parse(r,{extended:!0})],s={width:t.properties.designW,height:t.properties.designH,spacing:0};if(void 0===s.width||void 0===s.height||s.width<=0||s.height<=0){var a=this.getControlAlignData(t,!0,n);a?(s.width=a.properties.designW,s.height=a.properties.designH):t._parent&&t._parent.properties.designW>0&&t._parent.properties.designH>0&&(s.width=t._parent.properties.designW,s.height=t._parent.properties.designH)}var u={},l={},p=!0!==system.scene._world._hasInitialUpdatePassed?_:t.getControls(!1).filter((function(e){return!0===e.properties.fillsUnsafeArea})).map((function(e){return e.id})),d=function calculateSubControls(t){var n=!0,r=!1,a=void 0;try{for(var c,u=i[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var l=c.value,p=o._getAutolayoutView(e.extends({},s,{constraints:l}));for(var d in p.subViews)if("_"!==d[0]){var f=p.subViews[d];null==t[d]?t[d]={x:f.left,y:f.top,z:f.zIndex,width:f.width,height:f.height,designW:f.width,designH:f.height}:(t[d].x=o._pickBetweenTwoSolvedVflValues(t[d].x,f.left),t[d].y=o._pickBetweenTwoSolvedVflValues(t[d].y,f.top),t[d].z=o._pickBetweenTwoSolvedVflValues(t[d].z,f.zIndex),t[d].width=o._pickBetweenTwoSolvedVflValues(t[d].width,f.width),t[d].height=o._pickBetweenTwoSolvedVflValues(t[d].height,f.height),t[d].designW=t[d].width,t[d].designH=t[d].height)}}}catch(e){r=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}};if(d(u),p.length>0){var f=c.SceneIO.globalToLocal(g,t),h=c.SceneIO.globalToLocal({x:this._dimensions.designW,y:this._dimensions.designH},t);s.width=h.x-f.x,s.height=h.y-f.y,d(l),p.forEach((function(e){var t=l[e];t.x+=f.x,t.y+=f.y,u[e]=t}))}return LayoutManager.getLayoutDataObject(!0,t,u)}return LayoutManager.getLayoutDataObject(!0,t)},LayoutManager.prototype._getAutolayoutView=function _getAutolayoutView(e){if(this._isVflSolverKey(e.constraints))return{subViews:window.__playnext_vflSolverScripts[e.constraints[0].vflSolverScriptKey](e.width,e.height)};try{return new AutoLayout.View(e)}catch(t){return new AutoLayout.View(e)}},LayoutManager.getLayoutDataObject=function getLayoutDataObject(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return{gid:t.gid,timeMs:Date.now(),vfl:!0===e?t.properties.vfl:void 0,subControls:n}},LayoutManager.prototype._destroy=function _destroy(){this._layoutCache.dispose(),this._layoutCache=null,t.prototype._destroy.call(this)},LayoutManager.prototype._autoCorrectParentScene=function _autoCorrectParentScene(e){var t=function findInvalidTopLoadingScene(e,t){var n=void 0,o=e.properties.orientationIndex!==t.orientation,r=e;for(;r;){if(r instanceof s.Scene){var i=r.properties.orientationIndex!==t.orientation||r.properties.designH!==t.safeArea.designH||r.properties.designW!==t.safeArea.designW;o=o||i,r.lifeState.value<=l.LifeCycleState.bind&&(n=r)}r=r._parent}return o?n:void 0}(e,this._dimensions);return!!t&&(this.updateControlOrientation(e),this.alignControl(t,!0,!0),!0)},e.createClass(LayoutManager,[{key:"onResizeCompleteObs",get:function get(){return this._onResizeCompleteObs}},{key:"currentDimensions",get:function get(){return this._dimensions}},{key:"currentOrientation",get:function get(){return this._dimensions,this._dimensions&&null!=this._dimensions.orientation?this._dimensions.orientation:system.renderService._dimensionAdapter.orientation||0}},{key:"currentSafeAreaDesignResolution",get:function get(){return{width:this._dimensions.safeArea.designW,height:this._dimensions.safeArea.designH}}}]),LayoutManager}(o.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SoundEvents={LOAD:0,ONEND:1,ONSTOP:7,ONFADED:2,ONERROR:3,CALLBACK:4,PLAY:5,UNLOAD:6},t.SoundEventStatus={SUCCESS:0,ERROR:1,NOAUDIO:2}},,,,,,,function(e,t,n){e.exports=n(8)(15)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneIO=void 0;var o=n(1),r=e.interopRequireDefault(o);t.SceneIO=function(){function SceneIO(){e.classCallCheck(this,SceneIO)}return SceneIO.createObject=function createObject(e,t){return system.scene.createObject(e,t)},SceneIO.addObject=function addObject(e,t){system.scene.addObject(e,t)},SceneIO.createAndAddObject=function createAndAddObject(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=SceneIO.createObject(e,t);return SceneIO.addObject(o,n),o},SceneIO.modifyObject=function modifyObject(e){system.scene&&system.scene.modifyObject(e)},SceneIO.getObjectById=function getObjectById(e){return system.scene.getObjectById(e)},SceneIO.getSceneObjects=function getSceneObjects(){return system.scene._world.objects},SceneIO.getObjectByPosition=function getObjectByPosition(e,t,n,o){return system.scene.getObjectByPosition(e,t,n,o)},SceneIO.removeObject=function removeObject(e){system.scene.removeObject(e)},SceneIO.destroyObject=function destroyObject(e){system.scene.destroyObject(e)},SceneIO.getRenderObject=function getRenderObject(e){return r.default.Observable.create((function(t){system.scene.getRenderObject(e._sceneObject,(function(e){t.next(e),t.complete()}))}))},SceneIO.globalToLocal=function globalToLocal(e,t){return system.scene.globalToLocal(e,t._sceneObject)},SceneIO.enableSpatialHash=function enableSpatialHash(){system.scene.enableSpatialHash()},SceneIO.disableSpatialHash=function disableSpatialHash(){system.scene.disableSpatialHash()},SceneIO}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Bus=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(22),s=n(13),a=n(7),c=n(2),u=n(9),l=function(t){function BusChannel(n,o){e.classCallCheck(this,BusChannel);var r=e.possibleConstructorReturn(this,t.call(this));return r._owner=n,r._id=o,r._eventMap={},r._owner&&r._owner._notifyChannelCreated&&r._owner._notifyChannelCreated(r),r}return e.inherits(BusChannel,t),BusChannel.prototype._getEvent=function _getEvent(e){e=c.Component.getClassName(e);var t=this._eventMap[e];return t||(t=this._eventMap[e]=new i.Event),t},BusChannel.prototype.sendMessage=function sendMessage(e){if(e instanceof u.BaseMessage){if(null==this._eventMap)return;var t=this._getEvent(e.className);t.__lastMessageId!==e.instanceId&&(t.__lastMessageId=e.instanceId,t.next(e))}},BusChannel.prototype.postMessage=function postMessage(e){var t=this;e instanceof u.BaseMessage&&r.default.Observable.timer(1).subscribe((function(){return t.sendMessage(e)}))},BusChannel.prototype.getMessage=function getMessage(e){if(null==e)throw new Error("getMessage(): MessageClass not specified.");return null==this._eventMap?r.default.Observable.never():this._getEvent(e).asObservable()},BusChannel.prototype.dispose=function dispose(){this._eventMap=null,this._owner&&this._owner._notifyChannelDisposed&&this._owner._notifyChannelDisposed(this),this._owner=null,t.prototype.dispose.call(this)},e.createClass(BusChannel,[{key:"id",get:function get(){return this._id}}]),BusChannel}(a.DisposableObject);t.Bus=function(t){function Bus(){return e.classCallCheck(this,Bus),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Bus,t),Bus.getChannelId=function getChannelId(e){return e.prototype?e.name:e},Bus.prototype._init=function _init(){t.prototype._init.call(this),this._globalChannel=new l,this._channelMap={},this._onChannelCreatedEvent=new i.Event,this._onChannelDisposedEvent=new i.Event},Bus.prototype._notifyChannelCreated=function _notifyChannelCreated(e){this._onChannelCreatedEvent.next(e)},Bus.prototype._notifyChannelDisposed=function _notifyChannelDisposed(e){delete this._channelMap[e._id],this._onChannelDisposedEvent.next(e)},Bus.prototype._destroy=function _destroy(){for(var e in this._channelMap){this._channelMap[e].dispose()}this._channelMap=null,this._globalChannel.dispose(),this._globalChannel=null,this._onChannelCreatedEvent=null,this._onChannelDisposedEvent=null,t.prototype._destroy.call(this)},Bus.prototype.sendMessage=function sendMessage(e){this._globalChannel.sendMessage(e)},Bus.prototype.postMessage=function postMessage(e){this._globalChannel.postMessage(e)},Bus.prototype.getMessage=function getMessage(e){return this._globalChannel.getMessage(e)},Bus.prototype.channelExists=function channelExists(e){var t=Bus.getChannelId(e);return this._channelMap.hasOwnProperty(t)},Bus.prototype.channel=function channel(e){var t=Bus.getChannelId(e),channel=this._channelMap[t];return null==channel&&(channel=this._channelMap[t]=new l(this,t)),channel},e.createClass(Bus,[{key:"onChannelCreated",get:function get(){return this._onChannelCreatedEvent.asObservable()}},{key:"onChannelDisposed",get:function get(){return this._onChannelDisposedEvent.asObservable()}}]),Bus}(s.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var i=n(1),s=e.interopRequireDefault(i),a=n(62);n(139);var c=n(2),u=n(35),l=n(71),p=n(16),d=n(14),f=n(140),h=n(25),m=n(77),g=n(72),_=n(17),y=n(24),b=n(13),v=n(23),C=t.Game=(r=o=function(t){function Game(n,o,r){e.classCallCheck(this,Game);var i=e.possibleConstructorReturn(this,t.call(this,n,o,{}));return h.LayoutManager.getInstance(),Game.instance=i,i._classComponentMap=e.defineProperty({},i.className,[i]),i._assetQueue=new g.AssetQueue,i._sceneProgressMap=new Map,i._preloadQueue=[],i._sceneLoadQueue=[],i._numRegScenes=1,i._downloadPercentageObs=new s.default.BehaviorSubject(0),i._lifeStatePercentageObs=i.lifeState.map((function(e){return Math.min(Math.max(e,0),d.LifeCycleState.ready)/d.LifeCycleState.ready*100})),i._sceneLoadProgressObs=new s.default.BehaviorSubject(0),i._progressObs=new s.default.BehaviorSubject(0),i._postPreloadSplashGateSubj=new s.default.BehaviorSubject(!0),i.sync=new s.default.Subject,i._createSceneSyncSubscription(),i._createGameProgressSubscription(),i._config=r,i._game=i,i._bus=u.Bus.getInstance().channel(i.className),i._store=l.Store.getInstance().subStore(i.className),i.lifeState.filter((function(e){return e===d.LifeCycleState.ready})).first().delay(1).subscribeExt(i,(function(){i._start()})),i.createComponent(m.OrientationState,"OrientationState",m.OrientationState.orientationState.LANDSCAPE),i._sceneManager=i.createComponent(f.SceneManager,"sceneManager",i),i}return e.inherits(Game,t),Game.prototype.init=function init(){return this.properties.parent=null,c.Component._enterLifeCycleBusySection(),t.prototype.init.call(this)},Game.prototype.getLifeCycleMethods=function getLifeCycleMethods(e){t.prototype.getLifeCycleMethods.call(this,e),e(v.LifeCycleStep.PRELOAD_BEFORE,this._internalBeforePreload)},Game.prototype._internalBeforePreload=function _internalBeforePreload(){return y.RenderIO.onResize().first()},Game.prototype.createScene=function createScene(e,t){return this._sceneManager.createScene(this,e,t)},Game.prototype.destroyScene=function destroyScene(e){return system.resourceService.clearCache(),this._sceneManager.destroyScene(this,e)},Game.prototype.getScene=function getScene(e){return this._sceneManager.getScene(this,e)},Game.prototype.checkProgressRequest=function checkProgressRequest(e){return this._sceneProgressMap.get(e)||null},Game.prototype.getProgress=function getProgress(e){var t=this.checkProgressRequest(c.Component.getClassName(e));return t||(t=this.initProgressRequest(e)),t},Game.prototype.removeProgressRequest=function removeProgressRequest(e){this._sceneProgressMap.delete(c.Component.getClassName(e))},Game.prototype.initProgressRequest=function initProgressRequest(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==t&&(t=new s.default.BehaviorSubject(0));var n=c.Component.getClassName(e);return this._sceneProgressMap.set(n,t),this.checkProgressRequest(n)},Game.prototype.updateUnsafeAreaFillers=function updateUnsafeAreaFillers(){var e=a.Foundation.System.LayoutManager.getInstance();e._updatingUnsafeAreaFillers=!0,this.reAlignControls(!0,!1),e._updatingUnsafeAreaFillers=!1},Game.prototype.getState=function getState(e){return this._store.getState(e)},Game.prototype._createSceneSyncSubscription=function _createSceneSyncSubscription(){var t=this;this.sync.delay(1).switchMap((function(n){var o;return n=n.map((function(e){return e.progressObs})).filter((function(e){return e})),(o=s.default.Observable).combineLatest.apply(o,e.toConsumableArray(n).concat([function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return n.reduce((function(e,t){return e+t}),0)/t._numRegScenes}])).scan((function(e,t){return Math.max(e,t)}),0)})).takeWhile((function(e){return e<100})).subscribeExt(this,{next:function next(e){t._sceneLoadProgressObs.next(e)},complete:function complete(){t._sceneLoadProgressObs.next(100)}})},Game.prototype._createGameProgressSubscription=function _createGameProgressSubscription(){var e=this;s.default.Observable.combineLatest(this._downloadPercentageObs,this._lifeStatePercentageObs,this._sceneLoadProgressObs,(function(e,t,n){return Math.round(.2*e+.05*t+.75*n)})).scan((function(e,t){return Math.max(e,t)}),0).distinctUntilChanged().takeWhile((function(e){return e<100})).subscribeExt(this,{next:function next(t){e._progressObs.next(t)},complete:function complete(){e._progressObs.next(100)}})},Game.prototype._start=function _start(){},Game.prototype._preload=function _preload(){var t,n=this;this._preloadQueue.length>0?(t=s.default.Observable).combineLatest.apply(t,e.toConsumableArray(this._preloadQueue).concat([function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e+t}),0)/t.length}])).subscribeExt(this,(function(e){n._downloadPercentageObs.next(e)})):this._downloadPercentageObs.next(100);return this.manifest&&this.manifest.download("preload").subscribeExt(this),s.default.Observable.NULL},Game.prototype._componentNotification=function _componentNotification(e,t){switch(t){case c.Component.Operation.add:if(e instanceof _.Scene&&(this._sceneLoadQueue.push(e),this._sceneLoadQueue.length>this._numRegScenes&&(this._numRegScenes=this._sceneLoadQueue.length),this.sync.next(this._sceneLoadQueue)),e._owner&&(void 0===e._owner._scene||null===e._owner._scene))(this._classComponentMap[e.className]=this._classComponentMap[e.className]||[]).push(e);break;case c.Component.Operation.remove:if(this._sceneLoadQueue){var n=this._sceneLoadQueue.indexOf(e);n>-1&&this._sceneLoadQueue.splice(n,1)}if(this._classComponentMap.hasOwnProperty(e.className)){var o=this._classComponentMap[e.className],r=o.indexOf(e);r>-1&&o.splice(r,1)}}},Game.prototype._getRepositoryClass=function _getRepositoryClass(){throw new Error(this.className+"._getRepositoryClass() not implemented.")},Game.prototype._dispose=function _dispose(){this._config=null,this._classComponentMap=null,this._sceneManager=null,this._store.dispose(),this._store=null,this._bus.dispose(),this._bus=null,this._assetQueue.dispose(),this._assetQueue=null,this._sceneLoadQueue=null,Game.instance=void 0,b.Singleton.disposeAll(),t.prototype._dispose.call(this)},e.createClass(Game,[{key:"numRegScenes",get:function get(){return this._numRegScenes},set:function set(e){this._numRegScenes=e}},{key:"gameLoadingProgressObs",get:function get(){return this._progressObs}},{key:"postPreloadSplashGateObs",get:function get(){return this._postPreloadSplashGateSubj}},{key:"soundFile",get:function get(){return this._soundFile}},{key:"config",get:function get(){return this._config}},{key:"sceneManager",get:function get(){return this._sceneManager}},{key:"assetQueue",get:function get(){return this._assetQueue}}],[{key:"Foundation",get:function get(){return a.Foundation}},{key:"DesignDimensions",get:function get(){return system.renderService.designDimensions}},{key:"Dimensions",get:function get(){return system.renderService.dimensions}}]),Game}(p.Container),o.GameState={Undefined:0,Slot:1,FreeSpinStart:2,FreeSpin:3,FreeSpinComplete:4,BonusStart:5,Bonus:6,BonusComplete:7,Gamble:8,GambleComplete:9},r);window.Game=C}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSceneMessage=void 0;var o=n(9);t.BaseSceneMessage=function(t){function BaseSceneMessage(n,o){e.classCallCheck(this,BaseSceneMessage);var r=e.possibleConstructorReturn(this,t.call(this,n));return r._SceneClass=o,r}return e.inherits(BaseSceneMessage,t),e.createClass(BaseSceneMessage,[{key:"SceneClass",get:function get(){return this._SceneClass}}]),BaseSceneMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Sprite=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(4),s=n(5),a=n(6),c=n(21),u=0,l=t.Sprite=function(t){function Sprite(n,o,i){e.classCallCheck(this,Sprite);for(var s=arguments.length,a=Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];var u=e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,i].concat(a)));if(u.isTextureReadyObs=new r.default.BehaviorSubject(!1),!u.properties.texture){var l=i.resources.find((function(e){return"texture"===e.propName}));u._textureId=l.propValue,"pixi_white"===u._textureId?u.properties.texture=PIXI.Texture.WHITE:"pixi_empty"===u._textureId&&(u.properties.texture=PIXI.Texture.EMPTY)}return u}return e.inherits(Sprite,t),Sprite.prototype._getSceneObjectType=function _getSceneObjectType(e){return i.Control.SceneObjectType.SPRITE},Sprite.prototype._bind=function _bind(){var e=this;if(this.properties.texture&&!this.properties.texture.isDummyTexture)this.isTextureReadyObs.next(!0);else{var n=this.assets([this._textureId]),o=n.get();(o[this._textureId]?r.default.Observable.of(o[this._textureId]):n.loadAndGet().map((function(t){return t[e._textureId]}))).subscribeExt(this,(function(t){e.properties.texture=t,e._textureId=null,e.isTextureReadyObs.next(!0)}))}return t.prototype._bind.call(this)},Sprite.prototype._beforeReady=function _beforeReady(){var e=this;return r.default.ensureObservable(t.prototype._beforeReady.call(this)).switchMap((function(){return e.isTextureReadyObs.filter((function(e){return e})).take(1)}))},Sprite.prototype._defineProperties=function _defineProperties(n){var o=this;t.prototype._defineProperties.call(this,n),n(e.extends({texture:{priority:1,type:s.DataType.texture,sceneObjectProperty:!0,get:function get(){return o._sceneObject.texture},set:function set(e){var t=o._sceneObject.texture;if(t!==e){if(null!=t&&"function"==typeof t.doAfterUse&&t.doAfterUse(o),null!=e&&"function"==typeof e.doBeforeUse&&e.doBeforeUse(o),o._sceneObject.texture=e,!0!==o.properties.matchTextureSize||null!=t&&null!=t.orig&&null!=e&&null!=e.orig&&t.width==e.width&&t.height==e.height)return;o.align(!0)}}},blendMode:{type:s.DataType.int(),sceneObjectProperty:!0,default:u,get:function get(){return o._sceneObject.blendMode},set:function set(e){o._sceneObject.blendMode=e}},filters:{type:s.DataType.array,sceneObjectProperty:!0,get:function get(){return o._sceneObject.filters},set:function set(e){o._sceneObject.filters=e}},matchTextureSize:{type:s.DataType.boolean,sceneObjectProperty:!0,default:!1,get:function get(){return o._sceneObject.matchTextureSize},set:function set(e){o._sceneObject.matchTextureSize=e}}},(0,c.TintPropertiesMixin)(this)))},Sprite}(i.Control);a.MacawTypes.getInstance().registerType("Sprite",l)}).call(this,n(0))},function(e,t,n){e.exports=n(8)(25)},,function(e,t){e.exports=vendor_rx},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Casino=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(13),s=n(63);t.Casino=function(t){function Casino(){return e.classCallCheck(this,Casino),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Casino,t),Casino.prototype._init=function _init(e){var n=this;try{t.prototype._init.call(this,e),this._v=window.mgs.mobile.casino.v,this._newV=window.V.API,this._vUtils=window.mgs.mobile.common.Utils,this._host=window.V.API.Core.getHost().toLowerCase(),this._vCasinoConfig=this._newV.Core.getCasinoConfig(),this._useXmanFilter=null==this._vCasinoConfig.gameSettings.features||null==this._vCasinoConfig.gameSettings.features.useXmanFilter||this._vCasinoConfig.gameSettings.features.useXmanFilter,this._vCasinoInfo=this._newV.Core.getInfoConfig(),this._vCasinoParams=this._newV.Core.getCasinoParams(),this._vCasinoState=this._newV.Core.getCasinoState(),this._refreshArrivedSubj=new r.default.AsyncSubject,this._requestContextObject={},this._vCurrencyConverter=null,this._refreshArrivedSubj.subscribe((function(){n._vCurrencyConverter=new window.mgs.mobile.common.CurrencyConverter(n._vCasinoState.player.currencyDisplayFormat)})),this._initialized=!0,Object.exists(this._vCasinoConfig.game)&&Object.exists(this._vCasinoConfig.game.xManPacketVersion)?this._packetVersion=this._vCasinoConfig.game.xManPacketVersion:this._packetVersion=5,this._packets={baseSpinPacket:{verbex:"",chipSize:0,numChips:0,activePaylines:""},freeSpinPacket:{verbex:""},gamblePacket:{verbex:"",type:"",segment:""},gambleBankPacket:{verbex:""},gambleCollectPacket:{verbex:""},progressiveSpinPacket:{verbex:"",chipSize:0,numChips:0,activePaylines:"",jackpotNumbers:"",gamePayIds:""},getProgInfoPacket:{verbex:"",Progressive:{Jackpots:{JackpotArray:[]}}},buyFeaturePacket:{verbex:"",chipSize:0,numChips:0,selectedBuyOption:""},bonusPickPacket:{verbex:"",item:0},selectionPacket:{verbex:"",item:0},freeGamePacket:{verbex:"",FreeGames:{FreeGame:{offerId:"",instanceId:""}}}},this._packetVerbs={spin:"Spin",respin:"Respin",collectSpin:"CollectSpin",freeSpin:"FreeSpin",collect:"Collect",gamble:"Gamble",gambleBank:"GambleBank",gambleCollect:"Collect",bonusPick:"BonusPick",selection:"PlayerSelection",chooseBonusGame:"ChooseBonusGame",selectBonusGame:"SelectBonusGame",bonusCollect:"BonusCollect",nudge:"Nudge",hold:"Hold",getGameData:"GetGameData",play:"Play",configurations:"Configurations",freeGames:"FreeGames",refresh:"Refresh",reject:"Reject",playFreeGames:"PlayFreeGames",rejectFreeGames:"RejectFreeGames",getProgInfo:"GetProgInfo",buyFeature:"BuyFeature",ping:"Ping"}}catch(e){this._initialized=!1}},Casino.prototype._notifyRefresh=function _notifyRefresh(){this._refreshArrivedSubj.next(!0),this._refreshArrivedSubj.complete()},Casino.prototype._destroy=function _destroy(){this._v=null,this._vUtils=null,this._vCasinoConfig=null,this._vCasinoInfo=null,this._vCasinoParams=null,this._vCasinoState=null,this._initialized=null,this._packetVersion=null,this._packets=null,this._packetVerbs=null,t.prototype._destroy.call(this)},Casino.prototype._existCI=function _existCI(e,t){if(null==e)return!1;for(var n in t=t.toLowerCase(),e){if(n.toLowerCase()===t&&e.hasOwnProperty(n))return!0}return!1},Casino.prototype._getPropsCI=function _getPropsCI(e,t){if(this._existCI(e,t)&&void 0===e[t])for(var n in t=t.toLowerCase(),e){if(n.toLowerCase()===t)return e[n]}return e[t]},Casino.prototype.namespaceLoaded=function namespaceLoaded(){return this._initialized},Casino.prototype.getMarket=function getMarket(){return this._vCasinoConfig.markets.currentMarket},Casino.prototype.getLobbyName=function getLobbyName(){return this._vCasinoParams.lobbyName},Casino.prototype.isNJLobby=function isNJLobby(){return null!=this._vCasinoConfig.markets&&"newjersey"===this._vCasinoConfig.markets.currentMarket.toLowerCase()},Casino.prototype.isPokerStarsLobby=function isPokerStarsLobby(){return"pokerstars"===this._vCasinoInfo.BespokeIntegration},Casino.prototype.isQuickfire=function isQuickfire(){return this.getLobbyName().includes("vanguard")},Casino.prototype.getCasinoOverrides=function getCasinoOverrides(){return Object.exists(this._vCasinoInfo.GameSettingsConfig)&&Object.exists(this._vCasinoInfo.GameSettingsConfig.lobby)&&this._existCI(this._vCasinoInfo.GameSettingsConfig.lobby,this.getLobbyName())?this._getPropsCI(this._vCasinoInfo.GameSettingsConfig.lobby,this.getLobbyName()):null},Casino.prototype.hideStopEnabled=function hideStopEnabled(){return this.overrides=this.getCasinoOverrides(),null!==this.overrides&&Object.exists(this.overrides.console)&&Object.exists(this.overrides.console.hideStop)?this.overrides.console.hideStop:null},Casino.prototype.spinDelay=function spinDelay(e){return this.overrides=this.getCasinoOverrides(),null!==this.overrides&&Object.exists(this.overrides.reels)&&Object.exists(this.overrides.reels.spinMode)&&Object.exists(this.overrides.reels.spinMode[e])&&Object.exists(this.overrides.reels.spinMode[e].spinDelay)?this.overrides.reels.spinMode[e].spinDelay:null},Casino.prototype.quickSpinVisible=function quickSpinVisible(){return this.overrides=this.getCasinoOverrides(),null!==this.overrides&&Object.exists(this.overrides.settings)&&Object.exists(this.overrides.settings.quickSpins)?this.overrides.settings.quickSpins:!Object.exists(this._vCasinoConfig.features)||!Object.exists(this._vCasinoConfig.features.gcmTopBar)||!this._vCasinoConfig.features.gcmTopBar.enabled},Casino.prototype.getGameEventEnums=function getGameEventEnums(){return this._v.enums.GameEvents},Casino.prototype.getGameEventEnumMatrix=function getGameEventEnumMatrix(){return this._eventEnums=this.getGameEventEnums(),{gameReady:this._eventEnums.gameReady,playerInformationRecieved:this._eventEnums.playerInformationRecieved,gameScreenBusy:this._eventEnums.gamescreenBusy,gameScreenFree:this._eventEnums.gamescreenFree,gamemenuOpen:this._eventEnums.gamemenuOpen,gamemenuClosed:this._eventEnums.gamemenuClosed,gameSetMute:this._eventEnums.gameSetMute,bonusGameStarted:this._eventEnums.bonusgameStarted,bonusGameComplete:this._eventEnums.bonusgameComplete,winUpdate:this._eventEnums.winUpdate,balanceUpdate:this._eventEnums.balanceUpdate,gameplayStart:this._eventEnums.gameplayStart,gameplayResume:this._eventEnums.gameplayResume,gameplayPause:this._eventEnums.gameplayPause,betSizeUpdate:this._eventEnums.betSizeUpdate,gameMetric:this._eventEnums.gameMetric,resultShown:this._eventEnums.resultShown,gameRoundCompleted:this._eventEnums.gameRoundCompleted,autoPlayStarted:this._eventEnums.autoPlayStarted,autoPlayStopped:this._eventEnums.autoPlayStopped,showBalanceSplitDialogue:this._eventEnums.showMegaWinSummary}},Casino.prototype.getCasinoEventEnumMatrix=function getCasinoEventEnumMatrix(){return this._eventEnums=this.getGameEventEnums(),{pluginSetMute:this._eventEnums.pluginSetMute,topBarBalanceUpdate:this._eventEnums.topBarBalanceUpdate,systemBalanceUpdate:this._eventEnums.systemBalanceUpdate,gameplayResume:this._eventEnums.gameplayResume,hideSoundControl:this._eventEnums.hideSoundControl,windowResized:this._eventEnums.windowResized,autoPlayInterrupt:this._eventEnums.autoPlayInterrupt,regulationsTopBarShown:this._eventEnums.regulationsTopBarShown,fullscreenOverlayShown:this._eventEnums.fullscreenOverlayShown||"fullscreenOverlayShown",fullscreenOverlayRemoved:this._eventEnums.fullscreenOverlayRemoved||"fullscreenOverlayRemoved",balanceSplitting:this._eventEnums.megaWinTriggered,balanceSplitDialogueClosed:this._eventEnums.megaWinSummaryClosed}},Casino.prototype.addGameEventSignalHandler=function addGameEventSignalHandler(e){this._v.SignalEngine.gameEvent.add(e)},Casino.prototype.removeGameEventSignalHandler=function removeGameEventSignalHandler(e){this._v.SignalEngine.gameEvent.remove(e)},Casino.prototype.dispatchGameEvent=function dispatchGameEvent(e,t){var n=this;return r.default.Observable.create((function(o){try{n.dispatchGameEventSignal(e,t),o.next(),o.complete()}catch(e){o.error(e)}}))},Casino.prototype.dispatchGameEventSignal=function dispatchGameEventSignal(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._v.SignalEngine.gameEvent.dispatch(e,t)},Casino.prototype.createPacket=function createPacket(e){var t;switch(null!==e.command.verbex&&void 0!==e.command.verbex?e.command.verbex:e.command.verb){case"SingleSignOn":t=this.sendSignOnRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"GetBalance":t=this.sendBalanceRequest(e.command.mid,e.command.cid,this._packetVersion);break;case"PlayerInformationRequest":t=this.sendPlayerInformationRequest(e.command.mid,e.command.cid,this._packetVersion);break;case"Configurations":t=this.sendConfigurationsRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"FreeGames":t=this.sendFreeGamesRequest(e.command.mid,e.command.cid,this._packetVersion);break;case"Refresh":t=this.sendRefreshRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"Spin":t=this.sendSpinRequest(e.command.mid,e.command.cid,e.balance,e.data,this._packetVersion);break;case"Respin":t=this.sendRespinRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"FreeSpin":t=this.sendFreeSpinRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"RejectFreeGames":t=this.sendRejectFreeGameRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"BonusPick":t=this.sendBonusPickRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"PlayerSelection":t=this.sendSelectionRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"Ping":t=this.sendPingRequest(this._packetVersion,e.command.cid);break;case"Gamble":t=this.sendGambleRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"GambleBank":t=this.sendGambleBankRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"Collect":t=this.sendGambleCollectRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"GetProgInfo":t=this.sendGetProgInfoRequest(e.command.mid,e.command.cid,e.data,this._packetVersion);break;case"BuyFeature":t=this.sendBuyFeatureRequest(e.command.mid,e.command.cid,e.data,this._packetVersion)}return t},Casino.prototype.sendPacket=function sendPacket(e){var t=this;return r.default.Observable.create((function(n){try{t._newV.Core.sendPacket(e,(function(e){n.next(JSON.parse(JSON.stringify(e)))}),null)}catch(e){n.error(e)}}))},Casino.prototype.handleResponseError=function handleResponseError(e){if(e){var t=e.servercode,n=e.servertext,o=e.text,r=e.xmancode,i={attributes:null!=e.attributes?e.attributes:e};if(this.logActivity({Name:"ServerResponseError",Type:"Error",source:"Slot/response",serverCode:t,serverText:n,text:o,xmanCode:r}),["512","510","502"].indexOf(t)>-1)this.logActivity({Name:"Error",Type:"FatalError",source:"Slot/response",reason:"xManResponseError",serverCode:t,serverText:n,text:o,xmanCode:r}),i.attributes.text=s.StringProvider.instance().getString("boundariesAdjusted")||i.attributes.text,i.attributes.errorText=s.StringProvider.instance().getString("boundariesAdjusted")||i.attributes.errorText,this.dispatchFatalError({xManError:i,level:this._v.ErrorHandling.levels.error,category:this._v.ErrorHandling.category.game});else{this.logActivity({Name:"Error",Type:"FatalError",source:"Slot/response",reason:"xManResponseError (gameplayError)",serverCode:t,serverText:n,text:o,xmanCode:r});var a=this.getResourceString("gameplayError");this.dispatchFatalError({userMessage:a,xManError:i,level:this._v.ErrorHandling.levels.error,category:this._v.ErrorHandling.category.game})}}},Casino.prototype.dispatchFatalError=function dispatchFatalError(e){this._newV.Core.handleFatalError(e)},Casino.prototype.logActivity=function logActivity(e){this._v.ActivityLogger.logActivity(e)},Casino.prototype.showCoinSizeChangedDialog=function showCoinSizeChangedDialog(){var e=this;return r.default.Observable.create((function(t){try{e._newV.Dialog.showCoinSizeChangedDialog((function(){t.next(),t.complete()}))}catch(e){t.error(e)}}))},Casino.prototype.showDialog=function showDialog(e){var t=this;return r.default.Observable.create((function(n){try{t._v.dialogueManager.showDialogue(e,(function(){n.next(),n.complete()}))}catch(e){n.error(e)}}))},Casino.prototype.getCurrencyIsoCode=function getCurrencyIsoCode(){var e=this;return this._refreshArrivedSubj.switchMap((function(){return r.default.Observable.create((function(t){try{t.next(e.isRealPlayer()?e._vCasinoState.player.currencyIsoCode:void 0),t.complete()}catch(e){t.error(e)}}))}))},Casino.prototype.getCurrencyFormat=function getCurrencyFormat(){var e=this;return this._refreshArrivedSubj.switchMap((function(){return r.default.Observable.create((function(t){try{t.next(e._vCasinoState.player.currencyDisplayFormat),t.complete()}catch(e){t.error(e)}}))}))},Casino.prototype.isPlayingFreeGame=function isPlayingFreeGame(e){return null!==e.offerId&&void 0!==e.offerId&&null!==e.instanceId&&void 0!==e.instanceId},Casino.prototype.isLobbyAvailable=function isLobbyAvailable(){return this._newV.Core.isLobbyAvailable()},Casino.prototype.isBankingAvailable=function isBankingAvailable(){return this._newV.Core.isBankingAvailable()},Casino.prototype.isPlayForRealAvailable=function isPlayForRealAvailable(){return this._newV.Account&&this._newV.Account.isPlayForRealEnabled?this._newV.Account.isPlayForRealEnabled():this.isPracticePlay()&&!this.isRGI()},Casino.prototype.displayPoweredBy=function displayPoweredBy(){return!this._vCasinoState.disablePoweredBy},Casino.prototype.displayGameName=function displayGameName(){return(this._vCasinoConfig.features.gameNameDisplay||{enabled:!0}).enabled},Casino.prototype.isPracticePlay=function isPracticePlay(){return!0===this.getHost().isViper()?!this._vCasinoState.isRealPlayer():this._vCasinoState.player.isPracticePlay},Casino.prototype.isRealPlayer=function isRealPlayer(){return this._newV.Account&&"function"==typeof this._newV.Account.isRealPlayer?this._newV.Account.isRealPlayer():"function"==typeof this._vCasinoState.isRealPlayer?this._vCasinoState.isRealPlayer():0===Number(this._vCasinoState.player.type)},Casino.prototype.isSoundToggleVisible=function isSoundToggleVisible(){return!this._vCasinoConfig.features.inGameControls||!this._vCasinoConfig.features.inGameControls.sound||!this._vCasinoConfig.features.inGameControls.sound.hide},Casino.prototype.isHelpEnabled=function isHelpEnabled(){return!!this._v.helpManager.helpImg},Casino.prototype.helpIconVisible=function helpIconVisible(e){e?this._v.helpManager.show():this._v.helpManager.hide()},Casino.prototype.isRGI=function isRGI(){return window.mgsCasinoParams.isRGI},Casino.prototype.interactionBoundaryRequired=function interactionBoundaryRequired(){return!(!this._vCasinoConfig||!this._vCasinoConfig.gameSettings)&&this._vCasinoConfig.gameSettings.interactionBoundaryRequired},Casino.prototype.isMinimalUIDisabled=function isMinimalUIDisabled(){return!!(Object.exists(this._vCasinoConfig.features)&&Object.exists(this._vCasinoConfig.features.gcmTopBar)&&this._vCasinoConfig.features.gcmTopBar.enabled||Object.exists(this._vCasinoParams.helpURL)&&null!==this._vCasinoParams.helpURL)},Casino.prototype.isPurchaseFeatureEnabled=function isPurchaseFeatureEnabled(e){return!(!this._newV||!this._newV.GameFeatures||"function"!=typeof this._newV.GameFeatures.isPurchaseFeatureEnabled)&&this._newV.GameFeatures.isPurchaseFeatureEnabled(e)},Casino.prototype.isJackpotAllowed=function isJackpotAllowed(){return!this._vCasinoConfig.gameSettings||void 0===this._vCasinoConfig.gameSettings.referenceJackpot||this._vCasinoConfig.gameSettings.referenceJackpot},Casino.prototype.displayResponsibleGamingLink=function displayResponsibleGamingLink(){return!(!this._vCasinoConfig.featureConfig||!this._vCasinoConfig.featureConfig.responsibleGamingLink)||!!(this._vCasinoState.config&&this._vCasinoState.config.feature&&this._vCasinoState.config.feature.responsibleGamingLink)},Casino.prototype.launchBanking=function launchBanking(){this.isBankingAvailable()&&this._newV.Core.launchBanking()},Casino.prototype.launchResponsibleGaming=function launchResponsibleGaming(){this.displayResponsibleGamingLink()&&this._v.ResponsibleGaming.launchLink()},Casino.prototype.playForReal=function playForReal(){this._newV.Core.playForReal()},Casino.prototype.launchLobby=function launchLobby(){this.isLobbyAvailable()&&this._newV.Core.launchLobby()},Casino.prototype.updateCasinoBalance=function updateCasinoBalance(e){void 0!==this._newV.Core.updateBalance&&this._newV.Core.updateBalance.call&&this._newV.Core.updateBalance(e)},Casino.prototype.updateCasinoSoundMuteState=function updateCasinoSoundMuteState(e){void 0!==this._newV.Core.muteSound&&this._newV.Core.muteSound.call&&this._newV.Core.muteSound(e)},Casino.prototype.jsonToXmlString=function jsonToXmlString(e){return this._vUtils.JSONtoXMLStr(e)},Casino.prototype.hasSufficientFundsToSpin=function hasSufficientFundsToSpin(e,t){return!(e-t<0)},Casino.prototype.insufficientFunds=function insufficientFunds(){this._newV.Core.displayInsufficientFunds()},Casino.prototype.getResourceString=function getResourceString(e){return this._v.stringsRes.getString(e)},Casino.prototype.setLoaderCount=function setLoaderCount(e){this._v.progressBarManager.setupGameAssetProgress(e)},Casino.prototype.incrementLoader=function incrementLoader(e){this._v.progressBarManager.progressBar.setProgress(e)},Casino.prototype.onGameSetupComplete=function onGameSetupComplete(){this._v.progressBarManager.onGameSetupComplete()},Casino.prototype.showHideBonusBubble=function showHideBonusBubble(e,t){"undefined"!=typeof V&&void 0!==V.API&&void 0!==V.API.BonusBubble&&!0===V.API.BonusBubble.bubbleEnabled()&&(!0===e?V.API.BonusBubble.onBubbleTrigger(!0,{x:t.clientX,y:t.clientY}):V.API.BonusBubble.onBubbleTrigger(!1,null))},Casino.prototype.getSystemMenuItems=function getSystemMenuItems(){return this._newV.SystemMenu.getSystemMenuItems()},Casino.prototype.sendSignOnRequest=function sendSignOnRequest(e,t,n,o){var r={};r.Credentials=n.Credentials,r.OldCred=n.OldCred,r.FC=n.FC;var i={verb:"SingleSignOn",mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString(r)};return this.sendPacket(i)},Casino.prototype.sendBalanceRequest=function sendBalanceRequest(e,t,n){var o={verb:"GetBalance",mid:e,cid:t,pktAttributes:{version:n},basePkt:this.jsonToXmlString({})};return this.sendPacket(o)},Casino.prototype.sendPlayerInformationRequest=function sendPlayerInformationRequest(e,t,n){var o={verb:"PlayerInformationRequest",mid:e,cid:t,pktAttributes:{version:n},basePkt:this.jsonToXmlString({})};return this.sendPacket(o)},Casino.prototype.sendConfigurationsRequest=function sendConfigurationsRequest(e,t,n,o){var r=this._packetVerbs.configurations,i=this.useXmanFilter?{verbex:r}:{},s={verb:this.useXmanFilter?"AdvSlot":r,mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString(i)},a={gameRequest:n};return s.basePkt=s.basePkt.replace("/>",">"+JSON.stringify(a)+"</Request>"),this.sendPacket(s)},Casino.prototype.sendFreeGamesRequest=function sendFreeGamesRequest(e,t,n){var o=this._packetVerbs.freeGames,r=this.useXmanFilter?{verbex:o}:{},i={verb:this.useXmanFilter?"AdvSlot":o,mid:e,cid:t,pktAttributes:{version:n},basePkt:this.jsonToXmlString(r)};return i.basePkt=i.basePkt.replace("/>",">"+JSON.stringify({gameRequest:{}})+"</Request>"),this.sendPacket(i)},Casino.prototype.sendRefreshRequest=function sendRefreshRequest(t,n,o,r){var i=this._packetVerbs.refresh,s=this.useXmanFilter?e.extends({verbex:i},o):e.extends({},o),a={verb:this.useXmanFilter?"AdvSlot":i,mid:t,cid:n,pktAttributes:{version:r},basePkt:this.jsonToXmlString(s)};if("SDK"===system.serviceType){a.basePkt=a.basePkt.replace("/>",">"+JSON.stringify({gameRequest:{}})+"</Request>")}return this.sendPacket(a)},Casino.prototype.sendPingRequest=function sendPingRequest(e,t){var n={verb:"Ping",verbex:"Ping",mid:0,cid:t,pktAttributes:{version:e},basePkt:""};return this.sendPacket(n)},Casino.prototype.sendRespinRequest=function sendRespinRequest(e,t,n,o){var r={verb:"AdvSlot",mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString({verbex:this._packetVerbs.respin,reelId:n.reelId})};return this.sendPacket(r)},Casino.prototype.sendSpinRequest=function sendSpinRequest(e,t,n,o,i){if("SDK"===system.serviceType){var s=this._packetVerbs.spin,a=this.useXmanFilter?{verbex:s}:{},c={verb:this.useXmanFilter?"AdvSlot":s,mid:e,cid:t,pktAttributes:{version:i},basePkt:this.jsonToXmlString(a)};return this._addFGContextToPayload(o),c.basePkt=c.basePkt.replace("/>",">"+JSON.stringify(o)+"</Request>"),this.sendPacket(c)}var u=n,l=o.activePaylines.split(","),p=o.chipSize*o.numChips*l.length;if(this.hasSufficientFundsToSpin(u,p)||this.isPlayingFreeGame(o)){var d=Object.assign({},this._packets.baseSpinPacket);d.verbex=this._packetVerbs.spin,d.chipSize=o.chipSize,d.numChips=o.numChips,d.activePaylines=String(o.activePaylines),this.isPlayingFreeGame(o)&&(d.offerId=o.offerId,d.instanceId=o.instanceId),o.reelSetChoiceId>-1&&(d.reelSetChoiceId=o.reelSetChoiceId),o.sideBetConstant>-1&&(d.sideBetConstant=o.sideBetConstant),null!=o.jackpotNumbers&&(d.jackpotNumbers=o.jackpotNumbers),null!=o.gamePayIds&&(d.gamePayIds=o.gamePayIds);var f={verb:"AdvSlot",mid:e,cid:t,pktAttributes:{version:i},basePkt:this.jsonToXmlString(d)};return this.sendPacket(f)}return this.insufficientFunds(),r.default.Observable.NULL},Casino.prototype.sendGambleRequest=function sendGambleRequest(e,t,n,o){Object.assign({},this._packets.gamblePacket).verbex=this._packetVerbs.gamble;var r={verb:"AdvSlot",mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString({verbex:this._packetVerbs.gamble,type:n.type,segment:n.segment})};return this.sendPacket(r)},Casino.prototype.sendGambleBankRequest=function sendGambleBankRequest(e,t,n,o){var r={verb:"AdvSlot",mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString({verbex:this._packetVerbs.gambleBank})};return this.sendPacket(r)},Casino.prototype.sendGambleCollectRequest=function sendGambleCollectRequest(e,t,n,o){var r={verb:"AdvSlot",mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString({verbex:this._packetVerbs.gambleCollect})};return this.sendPacket(r)},Casino.prototype.sendFreeSpinRequest=function sendFreeSpinRequest(e,t,n,o){var r=this._packetVerbs.freeSpin,i=this.useXmanFilter?{verbex:r}:{};null!=n.jackpotNumbers&&(i.jackpotNumbers=n.jackpotNumbers),null!=n.gamePayIds&&(i.gamePayIds=n.gamePayIds);var s={verb:this.useXmanFilter?"AdvSlot":r,mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString(i)};if("SDK"===system.serviceType){var a={gameRequest:{}};this._addFGContextToPayload(a),s.basePkt=s.basePkt.replace("/>",">"+JSON.stringify(a)+"</Request>")}return this.sendPacket(s)},Casino.prototype.sendRejectFreeGameRequest=function sendRejectFreeGameRequest(t,n,o,r){var i=this._packetVerbs.rejectFreeGames,s=void 0;if("SDK"===system.serviceType){var a={};this._addFGContextToPayload(a),null!=a.context&&null!=a.context.freeGames&&null!=a.context.freeGames.offerId||(a.context=e.extends({},a.context,{freeGames:{instance:{instanceId:o.FreeGames.FreeGame.instanceId,offerId:o.FreeGames.FreeGame.offerId}}}));var c=this.useXmanFilter?{verbex:i}:{};s=this.jsonToXmlString(c).replace("/>",">"+JSON.stringify(a)+"</Request>")}else{var u=Object.assign({},this._packets.freeGamePacket);u.verbex=this._packetVerbs.rejectFreeGames,u.FreeGames.FreeGame.offerId=o.FreeGames.FreeGame.offerId,u.FreeGames.FreeGame.instanceId=o.FreeGames.FreeGame.instanceId,s=this.jsonToXmlString(u)}var l={verb:this.useXmanFilter?"AdvSlot":i,mid:t,cid:n,pktAttributes:{version:r},basePkt:s};return this.sendPacket(l)},Casino.prototype.sendBonusPickRequest=function sendBonusPickRequest(e,t,n,o){var r=Object.assign({},this._packets.bonusPickPacket),i=this._packetVerbs.bonusPick;this.useXmanFilter&&(r.verbex=this._packetVerbs.bonusPick),r.item=n.item,null!=n.jackpotNumbers&&(r.jackpotNumbers=n.jackpotNumbers),null!=n.gamePayIds&&(r.gamePayIds=n.gamePayIds);var s=void 0;if("SDK"===system.serviceType){this._addFGContextToPayload(n.item);var a=this.useXmanFilter?{verbex:i}:{};s=this.jsonToXmlString(a).replace("/>",">"+JSON.stringify(n.item)+"</Request>")}else s=this.jsonToXmlString(r);var c={verb:this.useXmanFilter?"AdvSlot":i,mid:e,cid:t,pktAttributes:{version:o},basePkt:s};return this.sendPacket(c)},Casino.prototype.sendSelectionRequest=function sendSelectionRequest(t,n,o,r){var i=this._packetVerbs.selection,s=void 0;if("SDK"===system.serviceType){this._addFGContextToPayload(o.item);var a=this.useXmanFilter?{verbex:i}:{};s=this.jsonToXmlString(a).replace("/>",">"+JSON.stringify(o.item)+"</Request>")}else s=this.jsonToXmlString(e.extends({},o.item,{verbex:i}));var c={verb:this.useXmanFilter?"AdvSlot":i,mid:t,cid:n,pktAttributes:{version:r},basePkt:s};return this.sendPacket(c)},Casino.prototype.sendGetProgInfoRequest=function sendGetProgInfoRequest(e,t,n,o){var r=Object.assign({},this._packets.getProgInfoPacket);r.verbex=this._packetVerbs.getProgInfo,r.Progressive.Jackpots.JackpotArray=[];for(var i=0;i<n.jackpots.length;i++)r.Progressive.Jackpots.JackpotArray.push({gamePayId:n.jackpots[i].gamePayId,chipSizes:n.jackpots[i].View.chipSize});var s={verb:"AdvSlot",mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString(r)};return this.sendPacket(s)},Casino.prototype.sendBuyFeatureRequest=function sendBuyFeatureRequest(e,t,n,o){var r=Object.assign({},this._packets.buyFeaturePacket);r.verbex=this._packetVerbs.buyFeature,r.chipSize=n.chipSize,r.numChips=n.numChips,r.selectedBuyOption=n.selectedBuyOption;var i={verb:"AdvSlot",mid:e,cid:t,pktAttributes:{version:o},basePkt:this.jsonToXmlString(r)};return this.sendPacket(i)},Casino.prototype.getAutoplayConfig=function getAutoplayConfig(){return this._newV.Autoplay.getConfig()},Casino.prototype.startAutoplay=function startAutoplay(e,t,n,o){this._newV.Autoplay.init(e,t,n,o)},Casino.prototype.stopAutoplay=function stopAutoplay(){this._newV.Autoplay.stop()},Casino.prototype.getLocalObject=function getLocalObject(e){return this._v.localStorage.getObject(e)},Casino.prototype.getCurrencyConverter=function getCurrencyConverter(){return this._vCurrencyConverter},Casino.prototype.getHost=function getHost(){var e=this;return{isDesktop:function isDesktop(){return"desktop"===window.__playnext_static_host},isMobile:function isMobile(){return"mobile"===window.__playnext_static_host},isViper:function isViper(){return"viper"===e._host}}},Casino.prototype.getGameAnalytics=function getGameAnalytics(){return Object.exists(this._newV)&&Object.exists(this._newV.GameAnalytics)?this._newV.GameAnalytics:null},Casino.prototype._addFGContextToPayload=function _addFGContextToPayload(t){Object.keys(this._requestContextObject).length>0&&(t.context=e.extends({},t.context,this._requestContextObject))},Casino.prototype.setFreeGamesContext=function setFreeGamesContext(e,t){null!=this._requestContextObject.freeGames&&e===this._requestContextObject.freeGames.offerId&&t===this._requestContextObject.freeGames.instanceId||(this._requestContextObject.freeGames={instance:{instanceId:t,offerId:e}})},Casino.prototype.removeFreegamesContext=function removeFreegamesContext(){delete this._requestContextObject.freeGames},e.createClass(Casino,[{key:"useXmanFilter",get:function get(){return this._useXmanFilter}}]),Casino}(i.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayUtils=void 0;var o=n(117),r=n(64);t.ArrayUtils=function(){function ArrayUtils(){e.classCallCheck(this,ArrayUtils)}return ArrayUtils.randomIndex=function randomIndex(e){return r.DataTypeUtils.validateArray(e,!0,!0),o.MathUtils.randomUntil(e.length)},ArrayUtils.randomElement=function randomElement(e){return r.DataTypeUtils.validateArray(e,!0,!0),e[this.randomIndex(e)]},ArrayUtils.randomProperty=function randomProperty(e,t){r.DataTypeUtils.validateArray(e,!0,!0),r.DataTypeUtils.validateString(t,!0);var n=this.randomElement(e);if(n.hasOwnProperty(t))return n[t];throw new Error("Element ${randomElement} does not have Property ${propertyName}")},ArrayUtils.isUnique=function isUnique(e){throw new Error("isUnique(array): Not Implemented Yet")},ArrayUtils.isPendulum=function isPendulum(e){throw new Error("isPendulum(array): Not Implemented Yet")},ArrayUtils.shuffle=function shuffle(e){for(var t=e.length-1;t>0;t--){var n=o.MathUtils.randomTo(t),r=e[t];e[t]=e[n],e[n]=r}return e},ArrayUtils.isEmpty=function isEmpty(e){return 0==e.length},ArrayUtils}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GameBinding=t.Binding=t.StateObsBinding=t.StateBinding=t.GameStateObsBinding=t.GameStateBinding=t.ModelObsBinding=t.ModelBinding=t.GameModelObsBinding=t.GameModelBinding=t.MessageObsBinding=t.MessageBinding=t.GameMessageObsBinding=t.GameMessageBinding=t.Deprecated=void 0,t.Manifest=function Manifest(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){if(!n.prototype)throw new SyntaxError("@Manifest can only be added to a class");var o=t?e+"_"+mgsConfig.gameBuild.gameParams.performance:e;Object.defineProperty(n,"__manifestId",{get:function get(){return o}})}},t.SoundFile=function SoundFile(e){return function(t){p(t).subscribe((function(t){t._soundFile=e}))}},t.Layout=function Layout(e){return function(t){if(!t.prototype)throw new SyntaxError("@Layout can only be added to a class");Object.defineProperty(t,"__layoutId",{get:function get(){return e}})}},t.Mixin=function Mixin(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){if(!t.length)throw new SyntaxError("@Mixin requires at least one mixin as an argument");t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){n in e.prototype||(e.prototype[n]=t.prototype[n])}))}))}};var o=n(1),r=e.interopRequireDefault(o),i=n(15),s=e.interopRequireWildcard(i),a=n(45),c=(new WeakMap,new WeakMap,new WeakMap),u=new WeakMap,l=new WeakMap,p=(new WeakMap,function memoizeClassAfterPreload(e){if(!c.has(e)){var t=new r.default.Subject,n=e.prototype._afterPreload;n&&(e.prototype._afterPreload=function _afterPreload(){t.next(this);for(var e=arguments.length,o=Array(e),r=0;r<e;r++)o[r]=arguments[r];return n.apply(this,o)}),c.set(e,t)}return c.get(e)}),d=function memoizeInit(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u.has(e)){var n=new r.default.Subject,o=e._init;o&&(e._init=function _init(){for(var e=this,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return!0===t?(n.next(this),o.apply(this,i)):(this.lifeState.filter((function(e){return e===s.States.LifeCycleState.init})).first().subscribe((function(){return n.next(e)})),o.apply(this,i))}),u.set(e,n)}return u.get(e)},f=function memoizeBind(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!l.has(e)){var n=new r.default.Subject,o=e._bind;o&&(e._bind=function _bind(){for(var e=this,r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return!0===t?(n.next(this),o.apply(this,i)):(this.lifeState.filter((function(e){return e===s.States.LifeCycleState.bind})).first().subscribe((function(){return n.next(e)})),o.apply(this,i))}),l.set(e,n)}return l.get(e)},h=["_init","_bind","_unbind","_destroy"];t.Deprecated=function Deprecated(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n,o){if("function"!=typeof o.value)throw new SyntaxError("Only functions can be marked as deprecated");return e.extends({},o,{value:function value(){return o.value.apply(this,arguments)}})}};var m=function getBusChannel(e){if(e instanceof s.Core.Component)return e.__getBus();throw new Error("Decorator.getBusChannel(instance) -> Invalid instance specified.")},g=(t.GameMessageBinding=function GameMessageBinding(e){return function(t,n,o){if("function"!=typeof o.value)throw new SyntaxError("@GameMessageBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @GameMessageBinding on life cycle methods");d(t).subscribe((function(t){var o=m(s.Core.Game.instance);o&&o.getMessage(e).subscribeExt(t,(function(e){return t[n].call(t,e)}))}))}},t.GameMessageObsBinding=function GameMessageObsBinding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){if("function"!=typeof o.value)throw new SyntaxError("@GameMessageObsBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @GameMessageObsBinding on life cycle methods");d(e).subscribe((function(e){var o=m(s.Core.Game.instance);if(o){var r=t.map((function(e){return o.getMessage(e)}));e[n].apply(e,r)}}))}},t.MessageBinding=function MessageBinding(e){return function(t,n,o){if("function"!=typeof o.value)throw new SyntaxError("@MessageBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @MessageBinding on life cycle methods");d(t).subscribe((function(t){var o=m(t);o&&o.getMessage(e).subscribeExt(t,(function(e){return t[n].call(t,e)}))}))}},t.MessageObsBinding=function MessageObsBinding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){if("function"!=typeof o.value)throw new SyntaxError("@MessageObsBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @MessageObsBinding on life cycle methods");d(e).subscribe((function(e){var o=m(e);if(o){var r=t.map((function(e){return o.getMessage(e)}));e[n].apply(e,r)}}))}},function __getStore(e){if(e instanceof s.Core.Component)return e.__getStore();throw new Error("Decorator.getStore(instance) -> Invalid instance specified.")}),_=(t.GameModelBinding=function GameModelBinding(e){return function(t,n,o){if("function"!=typeof o.value)throw new SyntaxError("@GameModelBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @GameModelBinding on life cycle methods");f(t).subscribe((function(t){var o=s.Core.Game.instance.getModel(e);if(!o){var r=g(s.Core.Game.instance);r&&(o=r.getModel(e))}o&&o.subscribeExt(t,(function(e){t[n].call(t,e)}))}))}},t.GameModelObsBinding=function GameModelObsBinding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){if("function"!=typeof o.value)throw new SyntaxError("@GameModelObsBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @GameModelObsBinding on life cycle methods");f(e).subscribe((function(e){var o=t.map((function(e){var t=s.Core.Game.instance.getModel(e);if(!t){var n=g(s.Core.Game.instance);n&&(t=n.getModel(e))}return t}));e[n].apply(e,o)}))}},t.ModelBinding=function ModelBinding(e){return function(t,n,o){if("function"!=typeof o.value)throw new SyntaxError("@ModelBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @ModelBinding on life cycle methods");f(t).subscribe((function(t){var o=g(t);o&&o.getModel(e).subscribeExt(t,(function(e){t[n].call(t,e)}))}))}},t.ModelObsBinding=function ModelObsBinding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){if("function"!=typeof o.value)throw new SyntaxError("@ModelObsBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @ModelObsBinding on life cycle methods");f(e).subscribe((function(e){var o=g(e);if(o){var r=t.map((function(e){return o.getModel(e)}));e[n].apply(e,r)}}))}},t.GameStateBinding=function GameStateBinding(e){return function(t,n,o){if("function"!=typeof o.value)throw new SyntaxError("@GameStateBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @GameStateBinding on life cycle methods");f(t).subscribe((function(t){var o=g(s.Core.Game.instance);o&&o.getState(e.name).subscribeExt(t,(function(e){t[n].call(t,e)}))}))}},t.GameStateObsBinding=function GameStateObsBinding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){if("function"!=typeof o.value)throw new SyntaxError("@GameStateBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @GameStateBinding on life cycle methods");f(e).subscribe((function(e){var o=g(s.Core.Game.instance);if(o){var r=t.map((function(e){return o.getState(e.name)}));e[n].apply(e,r)}}))}},t.StateBinding=function StateBinding(e){return function(t,n,o){if("function"!=typeof o.value)throw new SyntaxError("@StateBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @StateBinding on life cycle methods");f(t).subscribe((function(t){var o=g(t);o&&o.getState(e.name).subscribeExt(t,(function(e){t[n].call(t,e)}))}))}},t.StateObsBinding=function StateObsBinding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){if("function"!=typeof o.value)throw new SyntaxError("@StateObsBinding can only be used on functions.");if(h.includes(n))throw new SyntaxError("Cannot use @StateObsBinding on life cycle methods");f(e).subscribe((function(e){var o=g(e);if(o){var r=t.map((function(e){return o.getState(e.name)}));e[n].apply(e,r)}}))}},"scene"),y="game",b=function getBindingObservable(e,t){if(e.prototype instanceof s.Messaging.BaseMessage){var n=m(t);if(n)return n.getMessage(e)}else if(e.prototype instanceof a.Model){var o="function"==typeof t.getModel?s.Core.Game.instance.getModel(e):void 0;if(o)return o;var r=g(t);if(r)return r.getModel(e)}else if(e.prototype instanceof s.Logic.State){var i=g(t);if(i)return i.getState(e.name)}else if(e.prototype instanceof s.Core.Component){var c=g(t);if(c)return c.getModel(e)}},v=function registerClassMethodBinding(t,n,o,r){var i;t.__methodBindings||(t.__methodBindings={},d(t).subscribe((function(e){for(var t in e.__methodBindings){var o=e.__methodBindings[t],r={},i=o[y];for(var a in i){var c=i[a];r[a]=b(c,s.Core.Game.instance)}var u=o[_];for(var l in u){var p=u[l];r[l]=b(p,e)}e[n].call(e,r)}})));var a=t.__methodBindings[n]=t.__methodBindings[n]||(i={},e.defineProperty(i,y,{}),e.defineProperty(i,_,{}),i);o.forEach((function(e){a[r][s.Core.Component.getClassName(e)]=e}))};t.Binding=function Binding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){v(e,n,t,_)}},t.GameBinding=function GameBinding(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,o){v(e,n,t,y)}}}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var o=n(1),r=e.interopRequireDefault(o),i={};t.Model=function(t){function Model(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.template,s=void 0===o?void 0:o,a=n.initObs,c=void 0===a?void 0:a;e.classCallCheck(this,Model);var u=new r.default.BehaviorSubject(s||i),l=u;if(c instanceof r.default.Observable){var p=new r.default.BehaviorSubject(!1);l=u.pausable(p.scan((function(e,t){return e.trigger=!0===e.last&&!0!==t,e.last=t,e}),{trigger:!1,last:!1}).map((function(e){return!0!==e.trigger}))),c.subscribe((function(e){p.next(e)}))}var d=e.possibleConstructorReturn(this,t.call(this,{next:function next(e){var t=d._preProcessData(d.value,e)||e;null!=t?u.next(d._getNextValue(d.value,t)):u.next(void 0)},error:function error(e){},complete:function complete(){}},l.filter((function(e){return e!==i})).observeOn(r.default.Scheduler.queue)));return d._response=u,d}return e.inherits(Model,t),e.createClass(Model,null,[{key:"undefined",get:function get(){return i}}]),Model.prototype._preProcessData=function _preProcessData(e,t){return t},Model.prototype._getNextValue=function _getNextValue(e,t){return t},Model.prototype.bindToRepository=function bindToRepository(e){throw new Error("No implementation 'bindToRepository()' foundation")},Model.prototype.dispose=function dispose(){this._response=null},e.createClass(Model,[{key:"className",get:function get(){return constructor.name}},{key:"value",get:function get(){return this._response.value}}]),Model}(r.default.AnonymousSubject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.StateMachine=void 0;var o=n(1),r=e.interopRequireDefault(o);t.StateMachine=function(t){function StateMachine(n,o,i){e.classCallCheck(this,StateMachine);var s=n,a=new r.default.BehaviorSubject(n),c=i instanceof r.default.Observable?a.pausable(i):a,u=e.possibleConstructorReturn(this,t.call(this,{next:function next(e){var t=o(s,e);null!=t&&t!==s&&(s=t,u._value=t,a.next(t))},error:function error(e){},complete:function complete(){}},c.observeOn(r.default.Scheduler.queue)));return u._value=s,u._response=a,u._asObservable=t.prototype.asObservable.call(u),u}return e.inherits(StateMachine,t),StateMachine.prototype.asObservable=function asObservable(){return this._asObservable},StateMachine.create=function create(e,t,n){return new StateMachine(e,t,n)},StateMachine.prototype.dispose=function dispose(){this._value=null,this._asObservable=null,this._response=null},e.createClass(StateMachine,[{key:"value",get:function get(){return this._value}},{key:"className",get:function get(){return constructor.name}}]),StateMachine}(r.default.AnonymousSubject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceIO=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(118),s=n(13);t.ResourceIO=function(t){function ResourceIO(){return e.classCallCheck(this,ResourceIO),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(ResourceIO,t),ResourceIO.prototype._init=function _init(e){t.prototype._init.call(this,e),this._manifests=new Map,this._hashmap=mgsConfig.resourceHashMap},ResourceIO.prototype.registerManifest=function registerManifest(e,t,n){if(!this._manifests.get(e.gid)){var o=new i.Manifest(this,t,this._hashmap,system._buildPath,n);return this._manifests.set(e.gid,o),o}return this._manifests.get(e.gid)},ResourceIO.prototype.unloadManifest=function unloadManifest(e){var t=void 0;return null!=(t=this._manifests.get(e))?t.unload():r.default.Observable.UNDEFINED},ResourceIO.prototype.getAssetFromManifest=function getAssetFromManifest(e,t){var n=this._getManifestForAsset(e,t);return n?n.getAsset(e):{id:e}},ResourceIO.prototype._getManifestForAsset=function _getManifestForAsset(e,t){for(var n=t;n;){if(n.manifest&&n.manifest._getResourceGroup(e))return n.manifest;n=n.owner}},ResourceIO.prototype.getPossibleManifests=function getPossibleManifests(e){for(var t=e,n={};t;)t.manifest&&(n[t.manifest.id]=t.manifest),t=t.owner;return n},ResourceIO.prototype._destroy=function _destroy(){this._manifests.forEach((function(e){e.dispose()})),this._manifests.clear(),this._manifests=null,this._hashmap=null,t.prototype._destroy.call(this)},ResourceIO}(s.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Gesture={TAP:"tapend",HOVER:"hovermove",TAPSTART:"tapstart",TAPEND:"tapend",TAPCANCEL:"tapcancel",PANSTART:"panstart",PANMOVE:"panmove",PANEND:"panend",HOLDSTART:"holdstart",HOLDEND:"holdend",HOLDCANCEL:"holdcancel",HOVERSTART:"hoverstart",HOVERMOVE:"hovermove",HOVEREND:"hoverend",PANCANCEL:"pancancel",WHEEL:"wheel",LEAVE:"leave"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.KeyboardKeyCodes={SPACE_BAR:32,NUMPAD_PLUS:107,NUMPAD_MINUS:109,PLUS:187,MINUS:189}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var o=n(2);t.State=function(t){function State(){return e.classCallCheck(this,State),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(State,t),State.prototype.setState=function setState(e){var t=this.__getStore();if(t)return t.__getState(this.className).next(e)},State.prototype.getState=function getState(e){if(e.prototype instanceof State){var t=this.__getStore();if(t)return t.getState(e.name)}},State.prototype.getMessage=function getMessage(e){var t=this.__getBus();if(t)return t.getMessage(e)},State}(o.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneCreatedMessage=void 0;var o=n(9);t.SceneCreatedMessage=function(t){function SceneCreatedMessage(n,o){e.classCallCheck(this,SceneCreatedMessage);var r=e.possibleConstructorReturn(this,t.call(this,n));return r._scene=o,r}return e.inherits(SceneCreatedMessage,t),e.createClass(SceneCreatedMessage,[{key:"scene",get:function get(){return this._scene}}]),SceneCreatedMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneDestroyedMessage=void 0;var o=n(9);t.SceneDestroyedMessage=function(t){function SceneDestroyedMessage(n,o){e.classCallCheck(this,SceneDestroyedMessage);var r=e.possibleConstructorReturn(this,t.call(this,n));return r._scene=o,r}return e.inherits(SceneDestroyedMessage,t),e.createClass(SceneDestroyedMessage,[{key:"scene",get:function get(){return this._scene}}]),SceneDestroyedMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AggregateModel=void 0;var o=n(45);t.AggregateModel=function(t){function AggregateModel(){return e.classCallCheck(this,AggregateModel),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(AggregateModel,t),AggregateModel.prototype._getNextValue=function _getNextValue(t,n){return e.extends({},t,n)},AggregateModel}(o.Model)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.MovieClipMessage=void 0;var o=n(10),r={START:"START",INTROCOMPLETE:"INTROCOMPLETE",UPDATE_FRAME:"UPDATE_FRAME",STOP:"STOP",REPEAT:"REPEAT"};t.MovieClipMessage=function(t){function MovieClipMessage(){return e.classCallCheck(this,MovieClipMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(MovieClipMessage,t),e.createClass(MovieClipMessage,null,[{key:"MovieClipStates",get:function get(){return r}}]),MovieClipMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Ticker=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(7);t.Ticker=function(t){function Ticker(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.classCallCheck(this,Ticker);var s=e.possibleConstructorReturn(this,t.call(this));return s._isReady=new r.default.BehaviorSubject(!1),s._id=n,s._ticker=system.animation.createTicker(o,i),s._isReady.next(!0),s}return e.inherits(Ticker,t),Ticker.prototype.dispose=function dispose(){this._ticker.destroy(),this._isReady=null,this._id=null,this._ticker=null,t.prototype.dispose.call(this)},Ticker.prototype.start=function start(){this._ticker.start()},Ticker.prototype.stop=function stop(){this._ticker.stop()},e.createClass(Ticker,[{key:"onUpdateEvent",get:function get(){return this._ticker.onUpdateEvent}},{key:"isReady",get:function get(){return this._isReady}}]),Ticker}(i.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SpineAnimationState={INIT:"INIT",PLAYING:"PLAYING",PAUSED:"PAUSED",STOPPED:"STOPPED"},t.SpineAnimationEvents={ANIMATION_LOOP:"ANIMATION_LOOP",ANIMATION_COMPLETED:"ANIMATION_COMPLETED",TRACK_STARTED:"TRACK_STARTED",TRACK_LOOP:"TRACK_LOOP",TRACK_COMPLETED:"TRACK_COMPLETED",TRACK_RESUMED:"TRACK_RESUMED",TRACK_PAUSED:"TRACK_PAUSED",CUSTOM_EVENT:"CUSTOM_EVENT"}},,,,,,function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Proton=t.dateFormat=t.Rx=t.Foundation=void 0;var o=n(110),r=n(15),i=e.interopRequireWildcard(r),s=n(1),a=e.interopRequireDefault(s),c=n(82),u=e.interopRequireDefault(c),l=n(39),p=e.interopRequireDefault(l);n.p=mgsConfig.gameDllPath,(0,o.applyRxjsAddons)(),t.Foundation=i,t.Rx=a.default,t.dateFormat=u.default,t.Proton=p.default}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=Symbol(),o=null;t.StringProvider=function(){function StringProvider(t,o,r){if(e.classCallCheck(this,StringProvider),t!==n)throw new Error("Please use StringProvider.instance() to get an instance");this._languageStrings=o,this._replacePatterns=r}return StringProvider.instance=function instance(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o){if(!e)throw new Error("StringProvider needs strings to be passed in when first created");o=new StringProvider(n,e,t)}return o},StringProvider.prototype.getString=function getString(e){var t=this,n="";if(!this._languageStrings[e]||void 0===this._languageStrings[e])return n;for(var o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];if(this._languageStrings[e].combinations&&this._languageStrings[e].pluralReplacementPostions){var s=[],a=0,c=!0,u=!1,l=void 0;try{for(var p,d=r[Symbol.iterator]();!(c=(p=d.next()).done);c=!0){var f=p.value;1===this._languageStrings[e].pluralReplacementPostions[a]?s.push(f>1?1:0):s.push(0),a++}}catch(e){u=!0,l=e}finally{try{!c&&d.return&&d.return()}finally{if(u)throw l}}for(var h=null,m=0;m<=this._languageStrings[e].combinations.length;m++){for(var g=!1,_=0;_<s.length;_++)if(s[_]!==this._languageStrings[e].combinations[m].plurals[_]){g=!0;break}if(!g){h=this._languageStrings[e].combinations[m];break}}h&&(n=h.string)}else n=this._languageStrings[e];return r.forEach((function(e,t){"string"==typeof e&&(e=e.replace("$","$$$$")),n=n.replace("{"+t+"}",e)})),Object.keys(this._replacePatterns).forEach((function(e){n=n.split(e).join(t._replacePatterns[e])})),n},StringProvider}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.DataTypeUtils=void 0;var o=n(43);t.DataTypeUtils=function(){function DataTypeUtils(){e.classCallCheck(this,DataTypeUtils)}return DataTypeUtils.validateObject=function validateObject(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e){if(t)throw new Error("No object passed");return!1}return!0},DataTypeUtils.validateString=function validateString(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.validateObject(e,t))return!1;if("string"!=typeof e){if(t)throw new Error("Data Type ${(type of str)} does not match String");return!1}return!0},DataTypeUtils.validateArray=function validateArray(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.validateObject(e,n))return!1;if(!Array.isArray(e)){if(n)throw new Error("Data Type ${(type of array)} does not match Array");return!1}if(o.ArrayUtils.isEmpty(e)&&t){if(n)throw new Error("Array ${array} is Empty");return!1}return!0},DataTypeUtils}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentProperties=void 0;var o=n(22),r=n(7),i="enumerable",s="sceneObjectProperty",a=function isValidValue(e){return e==e},c=function isValidProperty(e){return null!=e&&""!==e&&e==e},u=function defineProperty(e,t,n){Object.defineProperty(e,t,n),n.__isDefined=!0};t.ComponentProperties=function(t){function ComponentProperties(n){e.classCallCheck(this,ComponentProperties);var r=e.possibleConstructorReturn(this,t.call(this));return r._component=n,r._descriptors=new Map,r._published=new Map,r._propertyPriorityMap=new Map,r._changeCount=0,r._isReady=!1,r.add=r.add.bind(r),r._onChanged=new o.Event,r}return e.inherits(ComponentProperties,t),ComponentProperties.prototype.add=function add(e){for(var t in e){var n=e[t],o=n.priority||0,r=this._propertyPriorityMap.get(o)||{};this._propertyPriorityMap.set(o,r),n.hasOwnProperty(i)||(n.enumerable=!0),r[t]=n}},ComponentProperties.prototype.overrideSetter=function overrideSetter(e,t){return t},ComponentProperties.prototype.init=function init(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Array.from(this._propertyPriorityMap.keys());n.sort((function(e,t){return t-e})).forEach((function(n){var o=e._propertyPriorityMap.get(n),r=!0,i=!1,s=void 0;try{for(var a,u=Object.keys(o)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;if(e.hasOwnProperty(l))throw new Error("Property name clash in component with gid='"+e._component.gid+"'");var p=o[l];e._descriptors.set(l,p),p.type&&e._published.set(l,p);var d=c(t[l])?t[l]:p.default;d=e.overrideSetter(l,d),e[l]=d}}catch(e){i=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}}))},ComponentProperties.prototype.bind=function bind(){var e=this;this.beginChange(),this._descriptors.forEach((function(t,n){var o=e[n],r=t;!0!==r.__isDefined&&(r.set&&function(t){var n=r.set;r.set=function(o){e.isDisposed||(o=e.overrideSetter(t,o),n(o),e.changed(t))}}(n),!0===r.readonly?(o=o&&a(o)?o:void 0,u(e,n,{value:o,writable:!1})):(u(e,n,r),r.set&&void 0!==o&&a(o)&&(r.hasOwnProperty(s)?e[n]!==o&&a(o)&&(e[n]=o):e[n]=o)))})),this._isReady=!0,this.endChange()},ComponentProperties.prototype.updateValues=function updateValues(e){if(this.beginChange(),null!=e){var t=!0,n=!1,o=void 0;try{for(var r,i=Object.keys(e)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;a(e[s])&&(this[s]=this.overrideSetter(s,e[s]))}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}this.endChange()},ComponentProperties.prototype.beginChange=function beginChange(){this._changeCount++},ComponentProperties.prototype.endChange=function endChange(){this._changeCount>0&&(--this._changeCount,this.changed())},ComponentProperties.prototype.changed=function changed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;0===this._changeCount&&this._onChanged.next(e)},ComponentProperties.prototype._dispose=function _dispose(){this._onChanged=null,this._changeCount=null,this._component=null,null!=this._published&&(this._published.clear(),this._published=null),null!=this._descriptors&&(this._descriptors.clear(),this._descriptors=null),null!=this._propertyPriorityMap&&(this._propertyPriorityMap.clear(),this._propertyPriorityMap=null),t.prototype._dispose.call(this)},e.createClass(ComponentProperties,[{key:"onChanged",get:function get(){return this._onChanged.asObservable()}},{key:"published",get:function get(){return this._published}},{key:"isReady",get:function get(){return this._isReady}}]),ComponentProperties}(r.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";function CompressedImage(e,t,n,o,r,i,s){CompressedImage.prototype.init.apply(this,arguments)}function fourCCToInt32(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function textureLevelSize(e,t,n){switch(e){case o:case s:case k:return(t+3>>2)*(n+3>>2)*8;case r:case i:case a:case c:return(t+3>>2)*(n+3>>2)*16;case x:case A:return Math.floor((Math.max(t,8)*Math.max(n,8)*4+7)/8);case I:case T:return Math.floor((Math.max(t,16)*Math.max(n,8)*2+7)/8);default:return 0}}Object.defineProperty(t,"__esModule",{value:!0}),t.CompressedImage=CompressedImage,CompressedImage.prototype.init=function(e,t,n,o,r,i,s,a){this.src=e,this.width=o,this.height=r,this.data=t,this.type=n,this.levels=i,this.internalFormat=s,this.isCompressedImage=!0,this.crunch=a,this.preserveSource=!0;var c=this.complete;return this.complete=!!t,!c&&this.complete&&this.onload&&this.onload({target:this}),this},CompressedImage.prototype.dispose=function(){this.data=null},CompressedImage.prototype.generateWebGLTexture=function(e){if(null===this.data)throw"Trying to create a second (or more) webgl texture from the same CompressedImage : "+this.src;for(var t=this.width,n=this.height,o=this.levels,r=0,i=0;i<this.levels;++i){var s=textureLevelSize(this.internalFormat,t,n),a=new Uint8Array(this.data.buffer,this.data.byteOffset+r,s);e.compressedTexImage2D(e.TEXTURE_2D,i,this.internalFormat,t,n,0,a),(t>>=1)<1&&(t=1),(n>>=1)<1&&(n=1),r+=s}o>1?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),this.crunch&&(Module._free(this.crunch[0]),Module._free(this.crunch[1])),this.preserveSource||(this.data=null)},CompressedImage.loadFromArrayBuffer=function(e,t){return new CompressedImage(t).loadFromArrayBuffer(e)},CompressedImage.prototype.loadFromArrayBuffer=function(e,t){var n=new Uint8Array(e,0,3);if(n[0]=="DDS".charCodeAt(0)&&n[1]=="DDS".charCodeAt(1)&&n[2]=="DDS".charCodeAt(2))return this._loadDDS(e);if(n[0]=="PVR".charCodeAt(0)&&n[1]=="PVR".charCodeAt(1)&&n[2]=="PVR".charCodeAt(2))return this._loadPVR(e);if(t)return this._loadCRN(e);throw"Compressed texture format is not recognized: "+this.src},CompressedImage.prototype.arrayBufferCopy=function(e,t,n,o){dst32Offset=n/4;for(var r=o%4,i=new Uint32Array(e.buffer,0,(o-r)/4),s=new Uint32Array(t.buffer),a=0;a<i.length;a++)s[dst32Offset+a]=i[a];for(var c=o-r;c<o;c++)t[n+c]=e[c]},CompressedImage.prototype._loadCRN=function(e){DXT_FORMAT_MAP=[o,r,i];var t=e.byteLength,n=new Uint8Array(e),s=Module._malloc(t);CompressedImage.prototype.arrayBufferCopy(n,Module.HEAPU8,s,t);var a=Module._crn_get_width(s,t),c=Module._crn_get_height(s,t),u=Module._crn_get_levels(s,t),l=Module._crn_get_dxt_format(s,t),p=Module._crn_get_uncompressed_size(s,t,0),d=Module._malloc(p);Module._crn_decompress(s,t,d,p,0);var f=new Uint8Array(Module.HEAPU8.buffer,d,p);return this.init(this.src,f,"CRN",a,c,u,DXT_FORMAT_MAP[l],[s,d])},CompressedImage.prototype._loadDDS=function(e){var t=new Int32Array(e,0,d);if(t[f]!=u)throw"Invalid magic number in DDS header";if(!t[b]&p)throw"Unsupported format, must contain a FourCC code";var n,x=t[v];switch(x){case C:n=o;break;case S:n=r;break;case M:n=i;break;case O:n=s;break;case w:n=a;break;case P:n=c;break;default:throw"Unsupported FourCC code: "+function int32ToFourCC(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}(x)}var I=1;t[m]&l&&(I=Math.max(1,t[y]));var A=t[_],T=t[g],k=t[h]+4,E=new Uint8Array(e,k);return this.init(this.src,E,"DDS",A,T,I,n)},CompressedImage.prototype._loadPVR=function(e){var t=new Int32Array(e,0,G);if(t[V]!=U)throw"Invalid magic number in PVR header";var n,s=t[q];switch(s){case E:n=I;break;case R:n=T;break;case j:n=x;break;case D:n=A;break;case L:n=k;break;case N:n=o;break;case B:n=r;break;case F:n=i;break;default:throw"Unsupported PVR format: "+s}var a=t[H],c=t[X],u=t[z],l=t[W]+52,p=new Uint8Array(e,l);return this.init(this.src,p,"PVR",a,c,u,n)};var o=33776,r=33778,i=33779,s=35986,a=35987,c=34798,u=542327876,l=131072,p=4,d=31,f=0,h=1,m=2,g=3,_=4,y=7,b=20,v=21,C=fourCCToInt32("DXT1"),S=fourCCToInt32("DXT3"),M=fourCCToInt32("DXT5"),O=fourCCToInt32("ATC "),w=fourCCToInt32("ATCA"),P=fourCCToInt32("ATCI"),x=35840,I=35841,A=35842,T=35843,k=36196,E=0,R=1,j=2,D=3,L=6,N=7,B=9,F=5,G=13,U=55727696,V=0,q=2,X=6,H=7,z=11,W=12},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduledBehaviorSubject=void 0;var o=n(1),r=e.interopRequireDefault(o);t.ScheduledBehaviorSubject=function(t){function ScheduledBehaviorSubject(n){e.classCallCheck(this,ScheduledBehaviorSubject);var o=new r.default.BehaviorSubject(n),i=o.observeOn(r.default.Scheduler.playnextAsap);return e.possibleConstructorReturn(this,t.call(this,o,i))}return e.inherits(ScheduledBehaviorSubject,t),e.createClass(ScheduledBehaviorSubject,[{key:"value",get:function get(){return this.destination.value}}]),ScheduledBehaviorSubject}(r.default.AnonymousSubject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.HID=t.KeyboardKeyCodes=t.Gesture=void 0;var o=n(19),r=n(4),i=n(14),s=n(48),a=n(49),c=t.Gesture=s.Gesture,u=t.KeyboardKeyCodes=a.KeyboardKeyCodes;t.HID=function(t){function HID(n,o){if(e.classCallCheck(this,HID),!(n instanceof r.Control))throw Error("HID: Control must be of type 'Control'.");var s=e.possibleConstructorReturn(this,t.call(this));return s._control=n,s._gesture=o,s.__hasBinding=!1,n.lifeState.takeWhile((function(e){return e<=i.LifeCycleState.destroy})).subscribeExt(s,(function(e){switch(e){case i.LifeCycleState.ready:s.__bindToSceneObject();break;case i.LifeCycleState.unbind:s.__unbindToSceneObject()}})),s}return e.inherits(HID,t),HID.listenToAllEvents=function listenToAllEvents(){return system.hid.listenToAllEvents()},HID.globalWheel=function globalWheel(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?system.hid.globalWheel(e._sceneObject):system.hid.globalWheel()},HID.globalTap=function globalTap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?system.hid.globalTap(e._sceneObject):system.hid.globalTap()},HID.globalTapEnd=function globalTapEnd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?system.hid.globalTapEnd(e._sceneObject):system.hid.globalTapEnd()},HID.globalPointerUp=function globalPointerUp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?system.hid.globalPointerUp(e._sceneObject):system.hid.globalPointerUp()},HID.onKeyUp=function onKeyUp(e){return system.hid.onKeyUp(e)},HID.prototype.__bindToSceneObject=function __bindToSceneObject(){var e=this;!1===this.__hasBinding&&this._control._sceneObject&&(this._hidBinding=system.hid.bindGesturesToSceneObject(this._control._sceneObject,this._gesture),this._hidBinding.subscribeExt(this,(function(t){return t.control=e._control,e._response.next(t)})),this.__hasBinding=!0)},HID.prototype.__unbindToSceneObject=function __unbindToSceneObject(){!0===this.__hasBinding&&this._control._sceneObject&&(system.hid.unbindGesturesFromSceneObject(this._control._sceneObject,this._gesture,this._hidBinding),this.__hasBinding=!1)},HID.prototype.dispose=function dispose(){this.__unbindToSceneObject(),this._hidBinding=null,this._control=null,this._gesture=null,this.__hasBinding=null,t.prototype.dispose.call(this)},e.createClass(HID,null,[{key:"Gesture",get:function get(){return c}},{key:"KeyboardKeyCodes",get:function get(){return u}}]),HID}(o.CommandObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var o=n(2);t.Model=function(t){function Model(){return e.classCallCheck(this,Model),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Model,t),Model.prototype.setModel=function setModel(e){var t=this.__getStore();if(t)return t.getModel(this.className).next(e)},Model.prototype.getModel=function getModel(e){if(e.prototype instanceof Model){var t=this.__getStore();if(t)return t.getModel(e.name)}},Model.prototype.getMessage=function getMessage(e){var t=this.__getBus();if(t)return t.getMessage(e)},Model}(o.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Rule=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(35),s=n(2),a=function isChannel(e){return function(t){return t&&t.id===i.Bus.getChannelId(e)}},c=function extractClassReference(e){return e._game?e._game.className:e._scene?e._scene.className:e};t.Rule=function(t){function Rule(){return e.classCallCheck(this,Rule),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Rule,t),Rule.prototype.addMessageRoute=function addMessageRoute(e,t,n){t=c(t),n=c(n);var o=i.Bus.getInstance();r.default.Observable.merge(r.default.Observable.of(o.channel(t)),o.onChannelCreated.filter(a(t))).switchMap((function(n){return n.getMessage(e).takeUntil(o.onChannelDisposed.filter(a(t)))})).subscribeExt(this,(function(e){o.channel(n).sendMessage(e)}))},Rule.prototype.addMessageRouteMultipleSources=function addMessageRouteMultipleSources(e,t,n){var o=this;r.default.Observable.from(t).map((function(e){return e})).subscribeExt(this,(function(t){o.addMessageRoute(e,t,n)}))},Rule.prototype.getMessage=function getMessage(e){var t=this.__getBus();if(t)return t.getMessage(e);throw new Error("[Warning] Unable to find bus for rule with class name '"+this.className+"'")},Rule}(s.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;var o=n(2),r=n(15),i=n(7),s=n(45),a=n(13),c=n(136),u=function(t){function SubStore(n,o){e.classCallCheck(this,SubStore);var r=e.possibleConstructorReturn(this,t.call(this));return r._owner=n,r._id=o,r._stateMap={},r._modelMap={},r}return e.inherits(SubStore,t),SubStore.prototype.__getModel=function __getModel(e){var t=this,n=Object.getPrototypes(e,r.Core.ObservableModel),i=o.Component.getClassName(e),a=this._modelMap[i];return a||(a=this._modelMap[i]=new s.Model),0===n.length?a:(n.forEach((function(e){var n=o.Component.getClassName(e);t._modelMap.hasOwnProperty(n)&&(a=t._modelMap[n])})),this._modelMap[i]=a,n.forEach((function(e){var n=o.Component.getClassName(e);t._modelMap[n]=a})),a)},SubStore.prototype.getModel=function getModel(e){if(null==e)throw new Error("SubStore.getModel(): identifier not specified.");return this.__getModel(e)},SubStore.prototype.__getState=function __getState(e){e=o.Component.getClassName(e);var t=this._stateMap[e];return t||(t=this._stateMap[e]=new c.State),t},SubStore.prototype.getState=function getState(e){if(null==e)throw new Error("SubStore.getState(): identifier not specified.");return this.__getState(e).asObservable()},SubStore.prototype.remove=function remove(e){var t=this;if(null==e)throw new Error("SubStore.remove(): identifier not specified.");Object.getPrototypes(e,r.Core.ObservableModel).forEach((function(e){var n=o.Component.getClassName(e);t._modelMap.hasOwnProperty(n)&&(t._modelMap[n].unsubscribe(),delete t._modelMap[n])}));var n=o.Component.getClassName(e);this._modelMap.hasOwnProperty(n)&&(this._modelMap[n].unsubscribe(),delete this._modelMap[n])},SubStore.prototype.dispose=function dispose(){for(var e in this._stateMap)this._stateMap[e]instanceof i.DisposableObject?this._stateMap[e].dispose():this._stateMap[e]=null;this._stateMap=null,this._owner&&this._owner._notifySubStoreDisposed(this),this._owner=null,t.prototype.dispose.call(this)},e.createClass(SubStore,[{key:"id",get:function get(){return this._id}}]),SubStore}(i.DisposableObject);t.Store=function(t){function Store(){return e.classCallCheck(this,Store),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Store,t),Store.prototype._init=function _init(){t.prototype._init.call(this),this._globalSubStore=new u,this._subStoreMap={}},Store.prototype._notifySubStoreDisposed=function _notifySubStoreDisposed(e){delete this._subStoreMap[e._id]},Store.prototype._destroy=function _destroy(){for(var e in this._subStoreMap){this._subStoreMap[e].dispose()}this._subStoreMap=null,this._globalSubStore.dispose(),this._globalSubStore=null,t.prototype._destroy.call(this)},Store.prototype.getModel=function getModel(e){return this._globalSubStore.getModel(e)},Store.prototype.getState=function getState(e){return this._globalSubStore.getState(e)},Store.prototype.subStore=function subStore(e){var t=e.prototype?e.name:e,n=this._subStoreMap[t];return null==n&&(n=this._subStoreMap[t]=new u(this,t)),n},Store}(a.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.AssetQueue=function(){function AssetQueue(){e.classCallCheck(this,AssetQueue),this._queue=[]}return AssetQueue.prototype.add=function add(e){e instanceof Array?this._queue=this.queue.concat(e):this.queue.push(e)},AssetQueue.prototype.dispose=function dispose(){this._queue=null},e.createClass(AssetQueue,[{key:"queue",get:function get(){return this._queue}}]),AssetQueue}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.MacawBuilder=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(6),s=n(14);t.MacawBuilder=function(){function MacawBuilder(){e.classCallCheck(this,MacawBuilder)}return MacawBuilder.buildScene=function buildScene(t,n){if(t&&t._lifeStateMachine.value!==s.LifeCycleState.preload)throw new Error("MacawBuilder.buildScene() - Please use decorator 'Foundation.Decorators.Layout(''"+n+"'')' on scene '"+t.className+"'");return t.assets([n]).loadAndGet().flatMap((function(o){return(o=o[n]).externalLayoutFile?t.assets([o.externalLayoutFile]).loadAndGet().map((function(t){return e.extends({},o,t[o.externalLayoutFile])})):r.default.Observable.of(o)})).flatMap((function(e){return!0!==t.properties.isReady&&(null!=e.vfl&&(t._vfl=t.properties.overrideSetter("vfl",e.vfl)),null!=e.scene&&null!=e.scene.children&&(t._childrenData=e.scene.children)),t.properties.updateValues(e),MacawBuilder.buildControl(t,e.scene.children)}))},MacawBuilder.buildControl=function buildControl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r.default.Observable.from(t,null,null).flatMap((function(t){return null!=t.externalLayoutFile?MacawBuilder.extractExternalLayoutData(e,t):r.default.Observable.of(t)})).filter((function(e){return null!=e.type})).flatMap((function(t){return MacawBuilder.createComponent(e,{Type:i.MacawTypes.getInstance().getType(t.type),Data:t})})).toArray().map((function(e){for(var t={},n=0;n<e.length;++n)null!=e[n]&&(t[e[n].id]=e[n]);return t}))},MacawBuilder.extractExternalLayoutData=function extractExternalLayoutData(t,n){return t.assets([n.externalLayoutFile]).loadAndGet().flatMap((function(t){t=t[n.externalLayoutFile];var o=e.extends({},t,n);return o.externalLayoutFile=null,delete o.externalLayoutFile,r.default.Observable.of(o)})).take(1)},MacawBuilder.createComponent=function createComponent(e,t){var n=this,o=MacawBuilder.cloneObject(t);return null!=o.Data.externalLayoutFile?MacawBuilder.extractExternalLayoutData(e,o.Data).switchMap((function(t){return MacawBuilder.createComponent(e,t).take(1)})):(o.Data.model&&"string"==typeof o.Data.model&&(o.Data.model=i.MacawTypes.getInstance().getType(o.Data.model)),o.Data.filters&&o.Data.filters.length>0?(o.Data.resources?this.loadResources(e,o.Data):r.default.Observable.NULL).flatMap((function(){return r.default.Observable.from(o.Data.filters,null,null)})).filter((function(e){return Object.exists(e.resources)})).flatMap((function(t){return n.loadResources(e,t)})).toArray().flatMap((function(){return r.default.Observable.create((function(t){system.scheduler.scheduleIfPastBoot((function(){e._lifeStateMachine.value<=s.LifeCycleState.ready?t.next(e.createControl(o.Type,o.Data.name,o.Data)):t.next(),t.complete()}))}))})).take(1):null==o.Data.createImmediately||null==o.Data.createImmediately||o.Data.createImmediately?null==o.Data.resources&&null==o.Data.resources?r.default.Observable.create((function(t){system.scheduler.scheduleIfPastBoot((function(){t.next(e.createControl(o.Type,o.Data.name,o.Data)),t.complete()}))})):this.loadResources(e,o.Data).flatMap((function(){return r.default.Observable.create((function(t){system.scheduler.scheduleIfPastBoot((function(){e._lifeStateMachine.value<=s.LifeCycleState.ready?t.next(e.createControl(o.Type,o.Data.name,o.Data)):t.next(),t.complete()}))}))})):(o.Data.createImmediately=null,e.addConditionalChild(o.Data.name,o.Data),r.default.Observable.empty()))},MacawBuilder.loadResources=function loadResources(e,t){return r.default.Observable.from(t.resources,null,null).filter((function(e){return"texture"!==e.propName})).map((function(e){return e.propValue})).toArray().flatMap((function(t){return 0===t.length?r.default.Observable.of({}):e.assets(t).loadAndGet()})).do((function(e){if(0!==Object.keys(e).length){var n=!0,o=!1,r=void 0;try{for(var i,s=t.resources[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;null==t[a.propName]?t[a.propName]=e[a.propValue]:null!=a.propIndex?t[a.propName][a.propIndex]=e[a.propValue]:(Array.isArray(t[a.propName])||(t[a.propName]=[t[a.propName]]),t[a.propName].push(e[a.propValue]))}}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}}}))},MacawBuilder.cloneObject=function cloneObject(t){if(null===t||"object"!==(void 0===t?"undefined":e.typeof(t)))return t;var n=t.constructor();for(var o in t)n[o]=MacawBuilder.cloneObject(t[o]);return n},MacawBuilder}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneShowingMessage=void 0;var o=n(9);t.SceneShowingMessage=function(t){function SceneShowingMessage(){return e.classCallCheck(this,SceneShowingMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SceneShowingMessage,t),SceneShowingMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneHiddenMessage=void 0;var o=n(9);t.SceneHiddenMessage=function(t){function SceneHiddenMessage(){return e.classCallCheck(this,SceneHiddenMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SceneHiddenMessage,t),SceneHiddenMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneBusyChangedMessage=void 0;var o=n(9);t.SceneBusyChangedMessage=function(t){function SceneBusyChangedMessage(n,o){e.classCallCheck(this,SceneBusyChangedMessage);var r=e.possibleConstructorReturn(this,t.call(this,n));return r._isBusy=o,r}return e.inherits(SceneBusyChangedMessage,t),e.createClass(SceneBusyChangedMessage,[{key:"isBusy",get:function get(){return this._isBusy}}]),SceneBusyChangedMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.OrientationState=void 0;var o=n(50),r=n(25),i={LANDSCAPE:0,PORTRAIT:1};t.OrientationState=function(t){function OrientationState(n,o,i){e.classCallCheck(this,OrientationState);for(var s=arguments.length,a=Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];var u=e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,i].concat(a)));return u.layoutManager=r.LayoutManager.getInstance(),u.setState(u.layoutManager.currentOrientation),u.layoutManager.onResizeCompleteObs.map((function(){return u.layoutManager.currentOrientation})).distinctUntilChanged().subscribeExt(u,(function(e){u.setState(e)})),u}return e.inherits(OrientationState,t),e.createClass(OrientationState,null,[{key:"orientationState",get:function get(){return i}}]),OrientationState}(o.State)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ShowSceneMessage=void 0;var o=n(37);t.ShowSceneMessage=function(t){function ShowSceneMessage(n,o,r){e.classCallCheck(this,ShowSceneMessage);var i=e.possibleConstructorReturn(this,t.call(this,n,o));return i._zOrder=r,i}return e.inherits(ShowSceneMessage,t),e.createClass(ShowSceneMessage,[{key:"zOrder",get:function get(){return this._zOrder}}]),ShowSceneMessage}(o.BaseSceneMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.HideSceneMessage=void 0;var o=n(37);t.HideSceneMessage=function(t){function HideSceneMessage(){return e.classCallCheck(this,HideSceneMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(HideSceneMessage,t),HideSceneMessage}(o.BaseSceneMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ResumingRenderAfterBootMessage=void 0;var o=n(10);t.ResumingRenderAfterBootMessage=function(t){function ResumingRenderAfterBootMessage(){return e.classCallCheck(this,ResumingRenderAfterBootMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(ResumingRenderAfterBootMessage,t),ResumingRenderAfterBootMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RepositoryMessage=void 0;var o=n(10);t.RepositoryMessage=function(t){function RepositoryMessage(){return e.classCallCheck(this,RepositoryMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(RepositoryMessage,t),RepositoryMessage}(o.Message)}).call(this,n(0))},function(e,t,n){e.exports=n(8)(21)},function(e,n){function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,n){var o=e.prototype;if(Object.create){var r=Object.create(n.prototype);o.__proto__=r}if(!(o instanceof n)){function t(){}t.prototype=n.prototype,copy(o,t=new t),e.prototype=o=t}o.constructor!=e&&(o.constructor=e)}var o="http://www.w3.org/1999/xhtml",r={},i=r.ELEMENT_NODE=1,s=r.ATTRIBUTE_NODE=2,a=r.TEXT_NODE=3,c=r.CDATA_SECTION_NODE=4,u=r.ENTITY_REFERENCE_NODE=5,l=r.ENTITY_NODE=6,p=r.PROCESSING_INSTRUCTION_NODE=7,d=r.COMMENT_NODE=8,f=r.DOCUMENT_NODE=9,h=r.DOCUMENT_TYPE_NODE=10,m=r.DOCUMENT_FRAGMENT_NODE=11,g=r.NOTATION_NODE=12,_={},y={},b=(_.INDEX_SIZE_ERR=(y[1]="Index size error",1),_.DOMSTRING_SIZE_ERR=(y[2]="DOMString size error",2),_.HIERARCHY_REQUEST_ERR=(y[3]="Hierarchy request error",3)),v=(_.WRONG_DOCUMENT_ERR=(y[4]="Wrong document",4),_.INVALID_CHARACTER_ERR=(y[5]="Invalid character",5),_.NO_DATA_ALLOWED_ERR=(y[6]="No data allowed",6),_.NO_MODIFICATION_ALLOWED_ERR=(y[7]="No modification allowed",7),_.NOT_FOUND_ERR=(y[8]="Not found",8)),C=(_.NOT_SUPPORTED_ERR=(y[9]="Not supported",9),_.INUSE_ATTRIBUTE_ERR=(y[10]="Attribute in use",10));_.INVALID_STATE_ERR=(y[11]="Invalid state",11),_.SYNTAX_ERR=(y[12]="Syntax error",12),_.INVALID_MODIFICATION_ERR=(y[13]="Invalid modification",13),_.NAMESPACE_ERR=(y[14]="Invalid namespace",14),_.INVALID_ACCESS_ERR=(y[15]="Invalid access",15);function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,y[e]),this.message=y[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var r=e.ownerDocument;r&&(o&&_onRemoveAttribute(r,e,o),function _onAddAttribute(e,t,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(r,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(v,new Error(e.tagName+"@"+n));for(var r=t.length-1;o<r;)t[o]=t[++o];if(t.length=r,e){var i=e.ownerDocument;i&&(_onRemoveAttribute(i,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(_visitNode(e,t))return!0}while(e=e.nextSibling)}function Document(){}function _onRemoveAttribute(e,t,n,o){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var r=t.firstChild,i=0;r;)o[i++]=r,r=r.nextSibling;o.length=i}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===m){var r=t.firstChild;if(null==r)return t;var i=t.lastChild}else r=i=t;var s=n?n.previousSibling:e.lastChild;r.previousSibling=s,i.nextSibling=n,s?s.nextSibling=r:e.firstChild=r,null==n?e.lastChild=i:n.previousSibling=i;do{r.parentNode=e}while(r!==i&&(r=r.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==m&&(t.firstChild=t.lastChild=null),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(e,t){var n=[],o=9==this.nodeType?this.documentElement:this,r=o.prefix,i=o.namespaceURI;if(i&&null==r&&null==(r=o.lookupPrefix(i)))var s=[{namespace:i,prefix:null}];return serializeToString(this,n,e,t,s),n.join("")}function needNamespaceDefine(e,t,n){var o=e.prefix||"",r=e.namespaceURI;if(!o&&!r)return!1;if("xml"===o&&"http://www.w3.org/XML/1998/namespace"===r||"http://www.w3.org/2000/xmlns/"==r)return!1;for(var i=n.length;i--;){var s=n[i];if(s.prefix==o)return s.namespace!=r}return!0}function serializeToString(e,t,n,r,l){if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case i:l||(l=[]);l.length;var g=e.attributes,_=g.length,y=e.firstChild,b=e.tagName;n=o===e.namespaceURI||n,t.push("<",b);for(var v=0;v<_;v++){"xmlns"==(C=g.item(v)).prefix?l.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&l.push({prefix:"",namespace:C.value})}for(v=0;v<_;v++){var C;if(needNamespaceDefine(C=g.item(v),0,l)){var S=C.prefix||"",M=C.namespaceURI,O=S?" xmlns:"+S:" xmlns";t.push(O,'="',M,'"'),l.push({prefix:S,namespace:M})}serializeToString(C,t,n,r,l)}if(needNamespaceDefine(e,0,l)){S=e.prefix||"",M=e.namespaceURI,O=S?" xmlns:"+S:" xmlns";t.push(O,'="',M,'"'),l.push({prefix:S,namespace:M})}if(y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(b)){if(t.push(">"),n&&/^script$/i.test(b))for(;y;)y.data?t.push(y.data):serializeToString(y,t,n,r,l),y=y.nextSibling;else for(;y;)serializeToString(y,t,n,r,l),y=y.nextSibling;t.push("</",b,">")}else t.push("/>");return;case f:case m:for(y=e.firstChild;y;)serializeToString(y,t,n,r,l),y=y.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case a:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case c:return t.push("<![CDATA[",e.data,"]]>");case d:return t.push("\x3c!--",e.data,"--\x3e");case h:var w=e.publicId,P=e.systemId;if(t.push("<!DOCTYPE ",e.name),w)t.push(' PUBLIC "',w),P&&"."!=P&&t.push('" "',P),t.push('">');else if(P&&"."!=P)t.push(' SYSTEM "',P,'">');else{var x=e.internalSubset;x&&t.push(" [",x,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case u:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function __set__(e,t,n){e[t]=n}DOMException.prototype=Error.prototype,copy(_,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],o=0;o<this.length;o++)serializeToString(this[o],n,e,t);return n.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(C);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(C);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var o=new Document;if(o.implementation=this,o.childNodes=new NodeList,o.doctype=n,n&&o.appendChild(n),t){var r=o.createElementNS(e,t);o.appendChild(r)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function cloneNode(e,t,n){var o=new t.constructor;for(var r in t){var a=t[r];"object"!=typeof a&&a!=o[r]&&(o[r]=a)}t.childNodes&&(o.childNodes=new NodeList);switch(o.ownerDocument=e,o.nodeType){case i:var c=t.attributes,u=o.attributes=new NamedNodeMap,l=c.length;u._ownerElement=o;for(var p=0;p<l;p++)o.setAttributeNode(cloneNode(e,c.item(p),!0));break;case s:n=!0}if(n)for(var d=t.firstChild;d;)o.appendChild(cloneNode(e,d,n)),d=d.nextSibling;return o}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==a&&e.nodeType==a?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},copy(r,Node),copy(r,Node.prototype),Document.prototype={nodeName:"#document",nodeType:f,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==m){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&e.nodeType==i&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return function importNode(e,t,n){var o;switch(t.nodeType){case i:(o=t.cloneNode(!1)).ownerDocument=e;case m:break;case s:n=!0}o||(o=t.cloneNode(!1));if(o.ownerDocument=e,o.parentNode=null,n)for(var r=t.firstChild;r;)o.appendChild(importNode(e,r,n)),r=r.nextSibling;return o}(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,(function(n){if(n.nodeType==i&&n.getAttribute("id")==e)return t=n,!0})),t},createElement:function(e){var t=new Element;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList,(t.attributes=new NamedNodeMap)._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),r=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:i,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===m?this.insertBefore(e,null):function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);o=e.lastChild}return o=e.lastChild,t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=""+n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,(function(t){var n=[];return _visitNode(t,(function(o){o===t||o.nodeType!=i||"*"!==e&&o.tagName!=e||n.push(o)})),n}))},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,(function(n){var o=[];return _visitNode(n,(function(r){r===n||r.nodeType!==i||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||o.push(r)})),o}))}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=s,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(y[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:a,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:d},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:c},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=h,_extends(DocumentType,Node),Notation.prototype.nodeType=g,_extends(Notation,Node),Entity.prototype.nodeType=l,_extends(Entity,Node),EntityReference.prototype.nodeType=u,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=m,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=p,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e,t,n){return nodeSerializeToString.call(e,t,n)},Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return function getTextContent(e){switch(e.nodeType){case i:case m:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}(this)},set:function(e){switch(this.nodeType){case i:case m:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n}}}catch(e){}n.DOMImplementation=DOMImplementation,n.XMLSerializer=XMLSerializer},function(e,t,n){"use strict";(function(e){var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MovieClip=void 0;var i=n(1),s=e.interopRequireDefault(i),a=n(16),c=n(54),u=n(38),l=n(55),p=n(6),d=n(5),f=n(53),h={INIT:1,PLAYING:2,STOPPED:3},m={START:"START",INTROCOMPLETE:"INTROCOMPLETE",UPDATE_FRAME:"UPDATE_FRAME",STOP:"STOP",REPEAT:"REPEAT"},g=0,_=t.MovieClip=(r=o=function(t){function MovieClip(){return e.classCallCheck(this,MovieClip),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(MovieClip,t),MovieClip.prototype._init=function _init(){t.prototype._init.call(this),this._createStateMachine(),this._createMovieClipModel()},MovieClip.prototype._createMovieClipModel=function _createMovieClipModel(){this._model=this.createModel(f.AggregateModel,"movieClipModel",{spriteControl:this.createControl(u.Sprite,"mc_"+this._id,{texture:Array.isArray(this.properties.textureSources)?this.properties.textureSources[0]:this.properties.textureSources,originX:this.properties.originX,originY:this.properties.originY}),onStartEvent:new s.default.Subject,onCompleteEvent:new s.default.Subject,updater:this._createUpdater()})},MovieClip.prototype._createUpdater=function _createUpdater(){return this.createAnimation(l.Ticker,"movieclip",this.properties.frameRate)},MovieClip.prototype._createStateMachine=function _createStateMachine(){this._stateMachine=this.createStateMachine("movieClipStateMachine",h.INIT,(function(e,t){return e===h.PLAYING||e===h.INIT?t:e===h.STOPPED||e===h.INIT?t:e}))},MovieClip.prototype._bind=function _bind(){t.prototype._bind.call(this),this._bindToStateMachine(),this._bindToUpdates()},MovieClip.prototype._bindToStateMachine=function _bindToStateMachine(){var e=this;this._stateMachine.subscribeExt(this,(function(t){switch(t){case h.INIT:break;case h.PLAYING:e._model.value.updater.start(),e._model.value.onStartEvent.next(void 0);break;case h.STOPPED:e._model.value.updater.stop(),e.sendMessage(new c.MovieClipMessage(e,{state:c.MovieClipMessage.MovieClipStates.STOP}))}}))},MovieClip.prototype._bindToUpdates=function _bindToUpdates(){var e=this;this._model.value.updater.onUpdateEvent.subscribeExt(this,(function(){return e._onUpdate((e._currentFrame+1)%e.properties.textureSources.length)}))},MovieClip.prototype.play=function play(){this._stateMachine.value===h.PLAYING&&this.pause(),this._stateMachine.next(h.PLAYING)},MovieClip.prototype.pause=function pause(){this._stateMachine.next(h.STOPPED)},MovieClip.prototype.gotoAndPlay=function gotoAndPlay(e){e>=0&&e<this._properties.numOfFrames&&(this._currentFrame=e),this.play()},MovieClip.prototype.gotoAndStop=function gotoAndStop(e){e>=0&&e<this._properties.numOfFrames&&(this.properties.currentFrame=e),this.pause()},MovieClip.prototype._onUpdate=function _onUpdate(e){this._loopFrom>0&&e===this._loopFrom&&this.sendMessage(new c.MovieClipMessage(this,{state:m.INTROCOMPLETE})),this._currentFrame+1>=this.properties.textureSources.length&&(this._loopFrom>-1&&(e=this._loopFrom),0===this._repeat?(e=this.properties.textureSources.length-1,this._model.value.onCompleteEvent.next(void 0),this.pause()):this._repeat>0?(this._repeat--,this.sendMessage(new c.MovieClipMessage(this,{state:m.REPEAT,repeat:this._repeat}))):-1===this._repeat&&this.sendMessage(new c.MovieClipMessage(this,{state:m.REPEAT,repeat:this._repeat}))),this.properties.currentFrame=e},MovieClip.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({textureSources:{priority:1,type:d.DataType.array,default:[],get:function get(){return n._textureSources},set:function set(e){e=Array.isArray(e)?e:[e],n._textureSources=e,n._model.value.spriteControl.properties.texture=n._textureSources[n._currentFrame]}},frameRate:{type:d.DataType.int(),default:80,get:function get(){return n._frameRate},set:function set(e){n._frameRate=e}},numOfFrames:{get:function get(){return n.properties.textureSources.length}},repeat:{type:d.DataType.int(),default:-1,get:function get(){return n._repeat},set:function set(e){n._repeat=e}},loopFrom:{type:d.DataType.int(),default:-1,get:function get(){return n._loopFrom},set:function set(e){n._loopFrom=e}},scaleX:{default:1,type:d.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._model.value.spriteControl.properties.scaleX},set:function set(e){n._model.value.spriteControl.properties.scaleX=e}},scaleY:{default:1,type:d.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._model.value.spriteControl.properties.scaleY},set:function set(e){n._model.value.spriteControl.properties.scaleY=e}},originX:{default:0,type:d.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._model.value.spriteControl.properties.originX},set:function set(e){n._model.value.spriteControl.properties.originX=e}},originY:{default:0,type:d.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._model.value.spriteControl.properties.originY},set:function set(e){n._model.value.spriteControl.properties.originY=e}},currentFrame:{priority:2,default:0,get:function get(){return n._currentFrame},set:function set(e){n._currentFrame!==e&&n.sendMessage(new c.MovieClipMessage(n,{state:m.UPDATE_FRAME,currentFrame:e})),n._currentFrame=e,null!==n.properties.textureSources&&void 0!==n.properties.textureSources&&n.properties.textureSources.length>0&&(n._model.value.spriteControl.properties.texture=n.properties.textureSources[e])}},tint:{type:d.DataType.string,default:"0xFFFFFF",get:function get(){return n._model.value.spriteControl.properties.tint},set:function set(e){null!=e&&(n._model.value.spriteControl.properties.tint=e)}},blendMode:{default:g,type:d.DataType.int(),sceneObjectProperty:!0,get:function get(){return n._model.value.spriteControl.properties.blendMode},set:function set(e){n._model.value.spriteControl.properties.blendMode=e}},filters:{type:d.DataType.array,get:function get(){return n._model.value.spriteControl.properties.filters},set:function set(e){n._model.value.spriteControl.properties.filters=e}},autostart:{type:d.DataType.boolean,default:!1,get:function get(){return n._autostart},set:function set(e){n._autostart=!!e,!0===n._autostart&&null!==n._stateMachine&&n.play()}}})},MovieClip.prototype._stopUpdater=function _stopUpdater(){this._model.value.updater.stop()},MovieClip.prototype._destroy=function _destroy(){this._stopUpdater(),this._model=null,this._stateMachine=null,t.prototype._destroy.call(this)},e.createClass(MovieClip,[{key:"onStartEvent",get:function get(){return this._model.value.onStartEvent.asObservable()}},{key:"onCompleteEvent",get:function get(){return this._model.value.onCompleteEvent.asObservable()}},{key:"ticker",get:function get(){return this._model.value.updater}}]),MovieClip}(a.Container),o.MovieClipState=h,o.MovieClipMessages=m,r);p.MacawTypes.getInstance().registerType("MovieClip",_)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SoundFadeMessage=void 0;var o=n(18);t.SoundFadeMessage=function(t){function SoundFadeMessage(n,o,r,i,s,a,c){e.classCallCheck(this,SoundFadeMessage);var u=e.possibleConstructorReturn(this,t.call(this,n));return u._soundId=o,u._startVolume=r,u._endVolume=i,u._duration=s,u._fallbackSoundId=a,u._stopOnComplete=c,u}return e.inherits(SoundFadeMessage,t),SoundFadeMessage.prototype.isFadingIn=function isFadingIn(){return this._endVolume>this._startVolume},e.createClass(SoundFadeMessage,[{key:"soundId",get:function get(){return this._soundId}},{key:"startVolume",get:function get(){return this._startVolume}},{key:"endVolume",get:function get(){return this._endVolume}},{key:"duration",get:function get(){return this._duration}},{key:"fallbackSoundId",get:function get(){return this._fallbackSoundId}},{key:"stopOnComplete",get:function get(){return this._stopOnComplete}}]),SoundFadeMessage}(o.BaseGameMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SoundPlayMessage=void 0;var o=n(18);t.SoundPlayMessage=function(t){function SoundPlayMessage(n,o,r,i,s,a){e.classCallCheck(this,SoundPlayMessage);var c=e.possibleConstructorReturn(this,t.call(this,n));return c._soundId=o,c._volume=r,c._canLagg=i,c._fallbackSoundId=s,c._pan=a,c}return e.inherits(SoundPlayMessage,t),e.createClass(SoundPlayMessage,[{key:"soundId",get:function get(){return this._soundId}},{key:"volume",get:function get(){return this._volume}},{key:"canLagg",get:function get(){return this._canLagg}},{key:"fallbackSoundId",get:function get(){return this._fallbackSoundId}},{key:"pan",get:function get(){return this._pan}}]),SoundPlayMessage}(o.BaseGameMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SoundPlaySwapMessage=void 0;var o=n(18);t.SoundPlaySwapMessage=function(t){function SoundPlaySwapMessage(n,o,r){e.classCallCheck(this,SoundPlaySwapMessage);var i=e.possibleConstructorReturn(this,t.call(this,n));return i._soundId1=o,i._soundId2=r,i}return e.inherits(SoundPlaySwapMessage,t),e.createClass(SoundPlaySwapMessage,[{key:"soundId",get:function get(){return this._soundId1}},{key:"soundId2",get:function get(){return this._soundId2}}]),SoundPlaySwapMessage}(o.BaseGameMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SoundStopMessage=void 0;var o=n(18);t.SoundStopMessage=function(t){function SoundStopMessage(n,o,r,i){e.classCallCheck(this,SoundStopMessage);var s=e.possibleConstructorReturn(this,t.call(this,n));return s._soundId=o,s._fallbackSoundId=i,s}return e.inherits(SoundStopMessage,t),e.createClass(SoundStopMessage,[{key:"soundId",get:function get(){return this._soundId}},{key:"fallbackSoundId",get:function get(){return this._fallbackSoundId}}]),SoundStopMessage}(o.BaseGameMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SoundManagerMuteMessage=void 0;var o=n(10);t.SoundManagerMuteMessage=function(t){function SoundManagerMuteMessage(n,o){e.classCallCheck(this,SoundManagerMuteMessage);var r=e.possibleConstructorReturn(this,t.call(this,n));return r._data=o,r}return e.inherits(SoundManagerMuteMessage,t),e.createClass(SoundManagerMuteMessage,[{key:"data",get:function get(){return this._data}}]),SoundManagerMuteMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SoundReportMessage=void 0;var o=n(9);t.SoundReportMessage=function(t){function SoundReportMessage(n,o,r,i){e.classCallCheck(this,SoundReportMessage);var s=e.possibleConstructorReturn(this,t.call(this,n));return s._soundId=o,s._target=i,s._soundStatus=r,s}return e.inherits(SoundReportMessage,t),e.createClass(SoundReportMessage,[{key:"soundId",get:function get(){return this._soundId}},{key:"target",get:function get(){return this._target}},{key:"soundStatus",get:function get(){return this._soundStatus}}]),SoundReportMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultEmitterManager=void 0;var o=n(92),r=n(39),i=e.interopRequireDefault(r);t.DefaultEmitterManager=function(t){function DefaultEmitterManager(n,o){e.classCallCheck(this,DefaultEmitterManager);var r=e.possibleConstructorReturn(this,t.call(this));return r._texturePool=n,r._configs=o,r._spritePool=[],r.createPool(),r}return e.inherits(DefaultEmitterManager,t),DefaultEmitterManager.prototype._getPoolSize=function _getPoolSize(){return this._configs.reduce((function(e,t){return null!=t.maxParticles&&t.maxParticles.value>e?t.maxParticles.value:e}),0)},DefaultEmitterManager.prototype.createPool=function createPool(){for(var e=this._getPoolSize(),t=this._configs[this._configs.length-1].blendMode,n=this._configs[this._configs.length-1].origin?this._configs[this._configs.length-1].origin.x:0,o=this._configs[this._configs.length-1].origin?this._configs[this._configs.length-1].origin.y:0,r=0;r<e;r++){var i=Math.floor(Math.random()*this._texturePool.length),s=this._texturePool[i];this._spritePool[r]=system.scene.createObject("SPRITE",{x:0,y:0,originX:n,originY:o,w:s.width,h:s.height,texture:s,blendMode:null!=t?t:0,blocksInput:!1,isParticle:!0}),this._spritePool[r].overlap=i,this._spritePool[r].currentIndex=i}},DefaultEmitterManager.prototype.changeSprite=function changeSprite(){var e=this;this._emitters.forEach((function(t){t.particles.forEach((function(t){var n=++t.sprite.currentIndex%e._texturePool.length;t.sprite.texture=e._texturePool[n]}),e)}),this)},DefaultEmitterManager.prototype.nextSprite=function nextSprite(){var e=this._spritePool.shift();return this._spritePool[this._spritePool.length]=e,e},DefaultEmitterManager.prototype.createEmitter=function createEmitter(e){var t=this._configs[e];return this._createEmitter(t)},DefaultEmitterManager.prototype._createEmitter=function _createEmitter(e){var t=new i.default.BehaviourEmitter({damping:void 0!==e.damping&&null!==e.damping?e.damping.value:.006}),n=void 0!==e.rate&&null!==e.rate?e.rate.value:1;t.rate=new i.default.Rate(n,e.rateSpan?e.rateSpan.value:e.particleLifeSpan.value/e.maxParticles.value),null!=e.minRadius&&null!=e.maxRadius&&t.addInitialize(new i.default.Radius(e.minRadius,e.maxRadius));var o=(e.particleLifespanVariance||{}).value||0;if(t.addInitialize(new i.default.Life(new i.default.Span(e.particleLifeSpan.value,o,!0))),null!=e.speed&&null!=e.angle){var r=(e.speedVariance||{}).value||0,s=(e.angleVariance||{}).value||0;t.addInitialize(new i.default.V(new i.default.Span(e.speed.value,r,!0),new i.default.Span(e.angle.value,s,!0),"polar"))}if(t.addInitialize(new i.default.Mass(1)),null!=e.gravity){var a=new i.default.Gravity(0);a.force.x=e.gravity.x,a.force.y=e.gravity.y,t.addBehaviour(a)}if(null!=e.startParticleSize&&null!=e.finishParticleSize){var c=(e.startParticleSizeVariance||{}).value||0,u=(e.finishParticleSizeVariance||{}).value||0;t.addBehaviour(new i.default.Scale(new i.default.Span(e.startParticleSize.value,c,!0),new i.default.Span(e.finishParticleSize.value,u,!0)))}if(null!=e.rotationStart&&null!=e.rotationEnd){var l=(e.rotationStartVariance||{}).value||0,p=(e.rotationEndVariance||{}).value||0;t.addBehaviour(new i.default.Rotate(i.default.getSpan(e.rotationStart.value,l),i.default.getSpan(e.rotationEnd.value,p),"add"))}if(null!=e.randomDrift&&t.addBehaviour(new i.default.RandomDrift(e.randomDrift.x,e.randomDrift.y,e.randomDrift.delay)),null!=e.startTint&&null!=e.finishTint&&t.addBehaviour(new i.default.Color(e.startTint.value,e.finishTint.value)),null!=e.startColor&&null!=e.finishColor){var d=(e.startColorVariance||{}).value||0,f=(e.finishColorVariance||{}).value||0;t.addBehaviour(new i.default.Alpha(new i.default.Span(e.startColor.alpha,d,!0),new i.default.Span(e.finishColor.alpha,f,!0)))}if(null!=e.sourcePosition){var h={};h.startX=e.sourcePosition.x-e.sourcePositionVariance.x,h.startY=e.sourcePosition.y-e.sourcePositionVariance.y,h.endX=2*e.sourcePositionVariance.x,h.endY=2*e.sourcePositionVariance.y,t.addInitialize(new i.default.Position(new i.default.RectZone(h.startX,h.startY,h.endX,h.endY)))}if(null!=e.imageZone){var m=e.imageZone.data;t.addInitialize(new i.default.P(new i.default.ImageZone(m,0,0)))}return t},DefaultEmitterManager.prototype.onParticleCreated=function onParticleCreated(e){e.sprite=this.nextSprite()},DefaultEmitterManager.prototype.onParticleUpdate=function onParticleUpdate(e){e.sprite.x=e.p.x,e.sprite.y=e.p.y,e.sprite.scaleX=e.scale,e.sprite.scaleY=e.scale,e.sprite.alpha=e.alpha,e.sprite.colour=parseInt(this._getParticleHexColor(e),16),e.sprite.rotation=e.rotation*Math.PI/180},DefaultEmitterManager.prototype._getParticleHexColor=function _getParticleHexColor(e){return this._dec2hexString(e.transform.rgb.r)+this._dec2hexString(e.transform.rgb.g)+this._dec2hexString(e.transform.rgb.b)},DefaultEmitterManager.prototype._dec2hexString=function _dec2hexString(e){var t=e.toString(16);return 1===t.length?"0"+t:t},DefaultEmitterManager.prototype.dispose=function dispose(){if(null!=this._spritePool){for(var e=0;e<this._spritePool.length;e++)system.scene.destroyObject(this._spritePool[e]),this._spritePool[e]=null;this._spritePool=null}this._texturePool=null,this._emitters=null,this._configs=null},DefaultEmitterManager.prototype.shutdown=function shutdown(){this._spritePool=null,this._texturePool=null,this._emitters=null,this._configs=null},DefaultEmitterManager}(o.EmitterManagerInterface)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.EmitterManagerInterface=function(){function EmitterManagerInterface(){e.classCallCheck(this,EmitterManagerInterface),this._emitters=[]}return EmitterManagerInterface.prototype.changeSprite=function changeSprite(){},EmitterManagerInterface.prototype.createEmitter=function createEmitter(e){},EmitterManagerInterface.prototype.addEmitter=function addEmitter(e){this._emitters.push(e)},EmitterManagerInterface.prototype.onParticleCreate=function onParticleCreate(e){},EmitterManagerInterface.prototype.onParticleUpdate=function onParticleUpdate(e){},EmitterManagerInterface.prototype.onParticleDead=function onParticleDead(e){},EmitterManagerInterface.prototype.onStart=function onStart(e){},EmitterManagerInterface.prototype.onStop=function onStop(e){},EmitterManagerInterface.prototype.onUpdate=function onUpdate(){},EmitterManagerInterface.prototype.dispose=function dispose(){},EmitterManagerInterface.prototype.shutdown=function shutdown(){},EmitterManagerInterface}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SpineAnimationMessage=void 0;var o=n(10);t.SpineAnimationMessage=function(t){function SpineAnimationMessage(){return e.classCallCheck(this,SpineAnimationMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SpineAnimationMessage,t),e.createClass(SpineAnimationMessage,[{key:"eventName",get:function get(){return this.data.eventName}},{key:"trackInfo",get:function get(){return this.data.trackInfo}},{key:"state",get:function get(){return this.data.state}}]),SpineAnimationMessage}(o.Message)}).call(this,n(0))},,,,,,,,,,,,,,,,function(e,t,n){e.exports=n},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.applyRxjsAddons=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(111);window.__playnext_Rx=r.default;t.applyRxjsAddons=function applyRxjsAddons(){r.default.Scheduler.playnextAsap=i.playnextAsap}}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playnextAsap=void 0;var o=n(112),r=n(113);t.playnextAsap=new r.AsapScheduler(o.AsapAction)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AsapAction=void 0;var o=n(1);t.AsapAction=function(t){function AsapAction(n,o){e.classCallCheck(this,AsapAction);var r=e.possibleConstructorReturn(this,t.call(this,n,o));return r.scheduler=n,r.work=o,r}return e.inherits(AsapAction,t),AsapAction.prototype.requestAsyncId=function requestAsyncId(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e._latched&&(e._frameLoopRunning||e._relaxationActive)?(e._relaxationActive&&e._scheduleRelaxation(),-1):e.scheduled||(e.scheduled=o.Immediate.setImmediate(e.flush.bind(e,null))))},AsapAction.prototype.recycleAsyncId=function recycleAsyncId(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);e.scheduled>0&&0===e.actions.length&&(o.Immediate.clearImmediate(e.scheduled),e.scheduled=void 0)},AsapAction}(o.AsyncAction)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AsapScheduler=void 0;var o=n(1),r=60,i=1e3/60,s=6,a=i-2.6666,c=50;t.AsapScheduler=function(t){function AsapScheduler(){var n,o,a;e.classCallCheck(this,AsapScheduler);for(var u=arguments.length,l=Array(u),p=0;p<u;p++)l[p]=arguments[p];return n=o=e.possibleConstructorReturn(this,t.call.apply(t,[this].concat(l))),o._thresholdMillis=c,o._latchMillis=0,o._latched=!1,o._averageRenderTime=s,o._frameLoopRunning=!1,o._frameStartedAt=Date.now(),o._frameEndedAt=o._frameStartedAt+i,o._windowSum=s*r,o._windowHead=0,o._window=function(){for(var e=new Array(r),t=0;t<e.length;t++)e[t]=s;return e}(),o._relaxationStartedAt=Date.now(),o._relaxationID=null,o._relaxationActive=!0,a=n,e.possibleConstructorReturn(o,a)}return e.inherits(AsapScheduler,t),AsapScheduler.prototype._scheduleRelaxation=function _scheduleRelaxation(){null==this._relaxationID&&(this._relaxationID=o.util_root.setTimeout(this._relaxationHandler.bind(this),0))},AsapScheduler.prototype._relaxationHandler=function _relaxationHandler(){this._relaxationStartedAt=Date.now(),this._relaxationID=null,this._scheduleIfLatched()},AsapScheduler.prototype.frameStart=function frameStart(e){this._frameLoopRunning=!0,this._frameStartedAt=Date.now(),this._relaxationActive&&(null!=this._relaxationID&&(o.util_root.clearTimeout(this._relaxationID),this._relaxationID=null),this._relaxationActive=!1,this._thresholdMillis=a)},AsapScheduler.prototype.frameEnd=function frameEnd(e){this._frameEndedAt=Date.now();var t=this._window[this._windowHead],n=this._frameEndedAt-this._frameStartedAt;this._windowSum+=n-t,this._window[this._windowHead]=n,++this._windowHead>=r&&(this._windowHead=0),this._averageRenderTime=this._windowSum/r;var o=2*this._averageRenderTime+2.6666;this._thresholdMillis=o-o%i+i-2.6666,this._scheduleIfLatched()},AsapScheduler.prototype.frameLoopStopped=function frameLoopStopped(e){this._frameLoopRunning=!1,this._scheduleIfLatched()},AsapScheduler.prototype._scheduleIfLatched=function _scheduleIfLatched(){this._latched&&!this.scheduled&&(this.scheduled=o.Immediate.setImmediate(this.flush.bind(this,null)))},AsapScheduler.prototype.flush=function flush(e){var t=this.actions;if(this.active&&e)t.push(e);else{this._latched&&!e&&(this._latched=!1,this._latchMillis=this._frameLoopRunning?this._frameStartedAt:this._relaxationActive?this._relaxationStartedAt:Date.now()),this.active=!0,this.scheduled=void 0;var n=void 0,o=-1,r=0;if(null!=e)(n=e.execute(e.state,e.delay))&&(r=t.length);else if(e=e||t.shift(),r=t.length,e)do{if(this._latched||(null==e.delay||0===e.delay)&&o>=0&&Date.now()>this._latchMillis+this._thresholdMillis)this._latched=!0,e.schedule(e.state,e.delay);else if(n=e.execute(e.state,e.delay))break}while(++o<r&&(e=t.shift()));if(this.active=!1,n){for(;++o<r&&(e=t.shift());)e.unsubscribe();throw n}}},e.createClass(AsapScheduler,[{key:"shouldSkipFrame",get:function get(){return this._frameLoopRunning&&this.scheduled}}]),AsapScheduler}(o.AsyncScheduler)}).call(this,n(0))},function(e,t,n){"use strict";Object.exists=function(e){return null!=e},Object.get=function(e,t){return t.split(".").reduce((function(e,t){return null==e?e:e[t]}),e)},Object.getPrototypes=function(e,t){for(var n=[];(e=Object.getPrototypeOf(e))instanceof t;)n.push(e);return n},Array.prototype.equals,Array.prototype.equals=function(e){if(!e)return!1;if(this.length!==e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!==e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1})},function(e,t,n){"use strict";(function(e){var t=n(1),o=e.interopRequireDefault(t),r=[],i=function _isTimeProviderPresent(){return null!=window.system&&window.system.timeProvider},s=function _isTimeProviderReady(){return i()&&window.system.timeProvider.isReady()},a=!1,c=function _tryToInjectIdsOnWindowIntoTimeProvider(){i()&&null==window.system.timeProvider.idsOfOriginalSetIntervalInAsyncAction&&(window.system.timeProvider.idsOfOriginalSetIntervalInAsyncAction=r.slice(),r=null)};o.default.AsyncAction.prototype.requestAsyncId=function requestAsyncId(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(c(),s())return!0!==a&&(Object.values(o.default.Scheduler).forEach((function(e){var t;return e.now=(t=window.system.timeProvider).now.bind(t)})),a=!0),window.system.timeProvider.setInterval(e.flush.bind(e,this),n);var i=window.setInterval(e.flush.bind(e,this),n),u=null==r?window.system.timeProvider.idsOfOriginalSetIntervalInAsyncAction:r;return u.push(i),i},o.default.AsyncAction.prototype.recycleAsyncId=function recycleAsyncId(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;c();var o=null==r?window.system.timeProvider.idsOfOriginalSetIntervalInAsyncAction:r;if(null!==n&&this.delay===n&&!1===this.pending)return t;var i=void 0;if(null!=o&&-1!==(i=o.indexOf(t)))return o.splice(i,1),void window.clearInterval(t);window.system.timeProvider.clearInterval(t)};if(o.default.Browser=o.default.Browser||{},o.default.Browser.tabVisible=new o.default.BehaviorSubject(!0),o.default.Observable.fromEvent(window,"playnextVisibilityChange").map((function(e){return e.detail.visible})).distinctUntilChanged().subscribe(o.default.Browser.tabVisible),o.default.Browser.tabFocused=new o.default.BehaviorSubject(!0),o.default.Observable.fromEvent(window,"playnextVisibilityChange").map((function(e){return e.detail.focused})).distinctUntilChanged().subscribe(o.default.Browser.tabFocused),o.default.Observable.prototype.subscribeExt=function subscribeExt(e,t,n,o){if(null==e)throw Error('disposer not specified in "subscribeExt()"');var r=void 0;if(r=null!=e.ownerScene?this.filter((function(){return e.ownerScene._isSubscribeExtFlowEnabled.value})).subscribe(t,n,o):this.subscribe(t,n,o),!("_compositeDisposable"in e))throw new Error("subscribeExt(): Disposer must implement _compositeDisposable.");return e._compositeDisposable&&e._compositeDisposable.add(r),r},o.default.Observable.prototype.subscribeExtIgnoringFlowPause=function subscribeExtIgnoringFlowPause(e,t,n,o){if(null==e)throw Error('disposer not specified in "subscribeExtIgnoringFlowPause()"');var r=this.subscribe(t,n,o);if(!("_compositeDisposable"in e))throw new Error("subscribeExtIgnoringFlowPause(): Disposer must implement _compositeDisposable.");return e._compositeDisposable&&e._compositeDisposable.add(r),r},o.default.Observable.prototype._trySubscribe){var u=o.default.Observable.prototype._trySubscribe;o.default.Observable.prototype._trySubscribe=function(e){var t=u.call(this,e);return e.syncErrorThrown,t}}o.default.Observable.prototype.debug=function debug(e){return this.do((function(e){}),(function(e){}),(function(){}))},o.default.Observable.prototype.debounceImmediate=function debounceImmediate(e){if("function"!=typeof e)throw new TypeError("'durationSelector' argument is not a function. Are you looking for 'debounceImmediateTime()'?");var t=this;return t.switchMap((function(){var n=e()||0;return t.debounceImmediateTime(n)}))},o.default.Observable.prototype.debounceImmediateTime=function debounceImmediateTime(e){var t=this,n=null;return e=e||0,o.default.Observable.create((function(r){return t.subscribe((function(t){var i=o.default.Scheduler.asap.now();(null===n||i-n>e)&&(n=i,r.next(t))}),r.error.bind(r),r.complete.bind(r))}))},o.default.Observable.prototype.pausableBuffered||(o.default.Observable.prototype.pausableBuffered=function pausableBufferedThatWorks(t){return this.publish((function(n){return n.map((function(e){return[e,null]})).merge(t.map((function(e){return!!e})).startWith(!0).distinctUntilChanged().map((function(e){return[null,e]})).takeUntil(n.last())).scan((function(t,n){var o=e.slicedToArray(n,2),r=o[0],i=o[1],s=t.passThroughPrev?[]:t.buf;return null==i&&s.push(r),{buf:s,passThroughPrev:null!=i?i:t.passThroughPrev}}),{buf:[],passThroughPrev:!1}).filter((function(e){return e.passThroughPrev})).concatMap((function(e){return o.default.Observable.from(e.buf)}))}))}),o.default.Observable.prototype.pausableBuffered2||(o.default.Observable.prototype.pausableBuffered2=o.default.Observable.prototype.pausableBuffered),o.default.Observable.prototype.pausable||(o.default.Observable.prototype.pausable=function pausable(e){var t=this;return e.distinctUntilChanged().switchMap((function(e){return!1===e?o.default.Observable.never():t}))}),o.default.Observable.prototype.isUndef=function isUndef(){return this.filter((function(e){return null==e}))},o.default.Observable.prototype.isDef=function isDef(){return this.filter((function(e){return null!=e}))},o.default.Observable.prototype.isTrue=function isTrue(){return this.filter((function(e){return!0===e}))},o.default.Observable.prototype.isFalse=function isFalse(){return this.filter((function(e){return!1===e}))},o.default.Observable.prototype.pauseOnBrowserTabHidden=function(){return this.filter((function(){return!0===o.default.Browser.tabVisible.value}))},o.default.Observable.prototype.processRenderBuffer=function processRenderBuffer(){return this.switchMap((function(e){return __processRenderBuffer().filter((function(e){return!1===e})).first().mapTo(e)}))},o.default.ensureObservable=function(e){return e instanceof o.default.Observable||(e=o.default.Observable.of(void 0===e?null:e)),e}}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Format=void 0;var o,r=n(42),i=Symbol();t.Format=function(){function Format(t){var n=this;if(e.classCallCheck(this,Format),i!==t)throw new Error("Please use Format.instance() to get an instance");this.casino=r.Casino.getInstance(),this.betData={},this.coinsMode=void 0,this.formatChars=" $€£krKR,.",this.betData.coinSize=1,this.casino.getCurrencyFormat().subscribe((function(e){n.betData.currencyFormat=e}))}return Format.instance=function instance(){return o=o||new Format(i)},Format.prototype.setCoinSize=function setCoinSize(e){this.betData.coinSize=e},Format.prototype.setCoinsMode=function setCoinsMode(e){this.coinsMode=e},Format.prototype.format=function format(e){return this.coinsMode?this.asCoins(e):this.asCredits(e,this.betData.currencyFormat)},Format.prototype.formatNoCurrency=function formatNoCurrency(e){return this.coinsMode?this.asCoins(e):this.formatWithPattern(e,this.betData.currencyFormat,!1)},Format.prototype.formatAsCredits=function formatAsCredits(e){return this.asCredits(e,this.betData.currencyFormat)},Format.prototype.asCredits=function asCredits(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#,###.##";return this.formatWithPattern(e,t,this.formatChars)},Format.prototype.asCoins=function asCoins(e,t){t=t||" ";for(var n,o=String(Math.floor(e/this.betData.coinSize)),r=[],i=String(o);i.length>3;)n=i.substr(i.length-3),r.unshift(n),i=i.substr(0,i.length-3);return i.length>0&&r.unshift(i),i=r.join(t)},Format.prototype._isCurrencySupported=function _isCurrencySupported(e){var t=this._getCurrencyAndPosition(e),n=this.supportedCurrencies.split(","),o=!0;if(null===t.currencyString)return o;for(var r=0;r<t.currencyString.length;r++)-1===n.indexOf(t.currencyString[r])&&(o=!1);return o},Format.prototype._removeUnsupportedCurrencyString=function _removeUnsupportedCurrencyString(e,t){var n=this._getCurrencyAndPosition(t);return null===n.currencyString?e:n.frontPosition?e.slice(n.currencyString.length,e.length):e.slice(0,e.length-n.currencyString.length)},Format.prototype._getCurrencyAndPosition=function _getCurrencyAndPosition(e){var t=null,n=e.indexOf("#"),o=e.lastIndexOf("#");return 0!==n&&(t=e.substring(0,n)),o!==e.length-1&&(t=e.substring(o+1,e.length)),{frontPosition:0!==n,currencyString:t}},Format.prototype._getOriginalValue=function _getOriginalValue(e){return this.casino.getCurrencyConverter().convertCurrency(e)},Format.prototype.formatWithPattern=function formatWithPattern(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#,###.##",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this._getOriginalValue(e);return!this.casino.isPracticePlay()&&this._isCurrencySupported(t)&&n?o:this._removeUnsupportedCurrencyString(o,t)},Format.prototype._isSubsetOf=function _isSubsetOf(e,t){return e.every((function(e){return t.indexOf(e)>=0}))},Format.prototype._int=function _int(e){return Math.trunc(e)},Format.prototype._dec=function _dec(e){var t=e.toString(),n=t.indexOf(".");return n<0?"0":t.substring(n+1,t.length)},Format.prototype._pad=function _pad(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?(t+e).slice(-t.length):(e+t).substring(0,t.length)},e.createClass(Format,[{key:"supportedCurrencies",get:function get(){return"function"==typeof Game.instance.getSupportedCurrenciesString?Game.instance.getSupportedCurrenciesString():" ,$,€,£,k,r,n,K,R,."}}]),Format}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.MathUtils=function(){function MathUtils(){e.classCallCheck(this,MathUtils)}return MathUtils.randomFromTo=function randomFromTo(e,t){return Math.floor(Math.random()*(t-e+1))+e},MathUtils.randomFromUntil=function randomFromUntil(e,t){return Math.floor(Math.random()*(t-e))+e},MathUtils.randomTo=function randomTo(e){return this.randomFromTo(0,e)},MathUtils.randomUntil=function randomUntil(e){return this.randomFromUntil(0,e)},MathUtils}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Manifest=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11),s=n(119),a=n(120),c=n(121),u=n(122),l=n(123),p=n(124),d=n(125),f=n(126),h=n(127),m=n(128),g=n(129),_=n(7),y=r.default.Observable,b="preload",v="background",C="runtime";t.Manifest=function(t){function Manifest(n,o,i,s,a){e.classCallCheck(this,Manifest);var c=e.possibleConstructorReturn(this,t.call(this));return c._buildPath=s,c._hashmap=i,c._assetsToRemove=a.toRemove,c._assetMap=a.toMap,Object.keys(c._assetMap).forEach((function(e){c._assetsToRemove.includes(e)||c._assetsToRemove.push(e)})),c._ids=o,c._preloadGroup=new Map,c._preloadGroupFrames=new Map,c._backgroundGroup=new Map,c._backgroundGroupFrames=new Map,c._runtimeGroup=new Map,c._texturePreferenceOrder=["webp","png","jpg"],c._hasAudio=!1!==window.mgsConfig.gameBuild.gameParams.audio&&"mute"!==window.mgsConfig.gameBuild.gameParams.audio,c._initCompleteObs=new r.default.BehaviorSubject(null),c._megaJsonContentReadyObs=new r.default.BehaviorSubject(!1),c._preloadProgressObs=new r.default.BehaviorSubject(0),c._progressChunk=0,c._currentProgress=0,c._preloadComplete=null,c._backgroundProgressObs=new r.default.BehaviorSubject(0),c._bgProgressChunk=0,c._bgCurrentProgress=0,c._backgroundComplete=null,c}return e.inherits(Manifest,t),Manifest.prototype.initialize=function initialize(){var t=this;if(null===this._initCompleteObs.value){this._initCompleteObs.next(!1);var n=this._ids.map((function(e){return t._getAssetPath(e+".json")[0]}));return r.default.Observable.from(n).flatMap(this._loadManifestByUrl.bind(this)).toArray().do((function(n){var o,i=n.reduce((function(e,n){return n.contentJsonPath&&e.push(t._loadManifestByUrl(t._buildPath+n.contentJsonPath)),e}),[]);i.length>0?(o=r.default.Observable).forkJoin.apply(o,e.toConsumableArray(i)).switchMap((function(e){return t._initCompleteObs.filter((function(e){return e})).take(1).mapTo(e)})).subscribeExt(t,(function(e){var n=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;t._applyContentManifest(a)}}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}t._megaJsonContentReadyObs.next(!0)})):t._megaJsonContentReadyObs.next(!0)})).map((function(e){return{files:e.reduce((function(e,n){return n=t._useOnlyOneForAsset(n),Object.assign(e,n.files)}),{}),resources:{preload:e.reduce((function(e,t){return Object.assign(e,t.resources.preload)}),{}),background:e.reduce((function(e,t){return Object.assign(e,t.resources.background)}),{})}}})).do((function(e){t._populateResourceGroups(e),t._patchGroupsByAssetsOverrides(),t._initCompleteObs.next(!0)}))}return this._initCompleteObs.filter((function(e){return!0===e})).take(1)},Manifest.prototype._useOnlyOneForAsset=function _useOnlyOneForAsset(e){for(var t in e.files)if(e.files[t].count&&e.files[t].count>1)for(var n=0;n<this._texturePreferenceOrder.length;n++)if(system.device._supportedTextures.indexOf(this._texturePreferenceOrder[n])>-1&&Object.keys(e.files[t]).indexOf("."+this._texturePreferenceOrder[n])>-1){var o=e.files[t]["."+this._texturePreferenceOrder[n]];e.files[t]={src:o.src,type:o.type}}return e},Manifest.prototype._loadManifestByUrl=function _loadManifestByUrl(e){return null!==window._manifestPromises[e]&&void 0!==window._manifestPromises[e]?this._getManifestDataFromPromise(e).take(1):null!=window.__playnext_gameassets[e]?this._getManifestDataFromCallback(e).take(1):system.resource.loadResourceData({src:[e],type:"application/json"}).switchMap((function(t){return system.resource.getResourceData({src:[e],type:"application/json"})})).take(1)},Manifest.prototype.download=function download(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return(null===this._initCompleteObs.value?this.initialize().switchMap((function(){return t._initCompleteObs})):this._initCompleteObs).filter((function(e){return!0===e})).switchMap((function(){return t._megaJsonContentReadyObs.filter((function(e){return e})).take(1)})).take(1).flatMap((function(){switch(e){case b:return t._preload(n,o);case v:return t._backgroundLoad(n,o)}}))},Manifest.prototype.getAsset=function getAsset(e){var t=this._getResourceGroup(e);if(t)return t.asset;throw new Error("Asset Not Found")},Manifest.prototype.unload=function unload(){this._unloadAssetGroup(this._preloadGroup),this._unloadAssetGroup(this._backgroundGroup),this._unloadAssetGroup(this._runtimeGroup),this._preloadComplete=null,this._backgroundComplete=null},Manifest.prototype._unloadAssetGroup=function _unloadAssetGroup(e){null!=e&&e.forEach((function(e,t){e.unload()}))},Manifest.prototype._getManifestDataFromPromise=function _getManifestDataFromPromise(e){return r.default.Observable.fromPromise(window._manifestPromises[e].promise).map((function(e){return 0===Object.keys(window._manifestPromises).length&&(window._manifestPromises=null),e.data}))},Manifest.prototype._getManifestDataFromCallback=function _getManifestDataFromCallback(e){var t=window.__playnext_gameassets[e];return null!=t.data?r.default.Observable.of(t.data):r.default.Observable.create((function(e){t.callback=function(){e.next(t.data),e.complete()}}))},Manifest.prototype._getResourceGroup=function _getResourceGroup(e){var t=this._preloadGroup.get(e);if(null!=t)return{asset:t,group:b};var n=this._preloadGroupFrames.get(e);if(null!=n)return{asset:n,group:b};var o=this._backgroundGroup.get(e);if(null!=o)return{asset:o,group:v};var r=this._backgroundGroupFrames.get(e);if(null!=r)return{asset:r,group:v};var i=this._runtimeGroup.get(e);return null!=i?{asset:i,group:C}:void 0},Manifest.prototype._populateResourceGroups=function _populateResourceGroups(e){var t=this;Object.keys(e.resources.preload).forEach((function(n){var o=e.resources.preload[n];if(o.hasOwnProperty("file")&&(o.files=[o.file]),t._hasAudio||"audioSprite"!==o.type&&"audioStream"!==o.type){var r=o.files.map((function(n){var o=e.files[n].content;return{src:t._getAssetPath(e.files[n].src),type:e.files[n].type,file:n,content:o}})),i=t._preloadGroup.get(n);i?(i.sources.forEach((function(e,t){null!=r[t].content&&!0!==r[t].content&&(e.content=r[t].content)})),i._contentCompanionArrivedObs.next(!0)):(i=t._createAsset(n,r,o,b),t._preloadGroup.set(n,i),null!=i.frames&&Object.keys(i.frames).forEach((function(e){t._preloadGroupFrames.set(e,new f.Frame(e,i.frames[e],i))})))}})),Object.keys(e.resources.background).forEach((function(n){var o=e.resources.background[n];if(o.hasOwnProperty("file")&&(o.files=[o.file]),t._hasAudio||"audioSprite"!==o.type&&"audioStream"!==o.type){var r=o.files.map((function(n){var o=e.files[n].content;return{src:t._getAssetPath(e.files[n].src),type:e.files[n].type,file:n,content:o}})),i=t._backgroundGroup.get(n);i?(i.sources.forEach((function(e,t){null!=r[t].content&&!0!==r[t].content&&(e.content=r[t].content)})),i._contentCompanionArrivedObs.next(!0)):(i=t._createAsset(n,r,o,v),t._backgroundGroup.set(n,i),null!=i.frames&&Object.keys(i.frames).forEach((function(e){t._backgroundGroupFrames.set(e,new f.Frame(e,i.frames[e],i))})))}}))},Manifest.prototype._applyContentManifest=function _applyContentManifest(t){var n=this;[].concat(e.toConsumableArray(this._preloadGroup.keys()),e.toConsumableArray(this._backgroundGroup.keys())).forEach((function(e){var o=t.resources.preload[e]||t.resources.background[e],r=n._preloadGroup.get(e)||n._backgroundGroup.get(e);if(null!=o&&null!=r){o.hasOwnProperty("file")&&(o.files=[o.file]);var i=o.files.map((function(e){var o=t.files[e].content;return{src:n._getAssetPath(t.files[e].src),type:t.files[e].type,file:e,content:o}}));r.sources.forEach((function(e,t){null!=i[t].content&&!0!==i[t].content&&(e.content=i[t].content)})),r._contentCompanionArrivedObs.next(!0)}}))},Manifest.prototype._patchGroupsByAssetsOverrides=function _patchGroupsByAssetsOverrides(){var t=this,n=this._assetMap;["_preloadGroup","_preloadGroupFrames","_backgroundGroup","_backgroundGroupFrames"].forEach((function(o){var r=t[o];Object.entries(n).forEach((function(t){var n=e.slicedToArray(t,2),o=n[0],i=n[1],s=r.get(o),a=r.get(i);null!=s&&null!=a&&(r.set(i,s),s._id=i)})),t._assetsToRemove.forEach((function(e){r.delete(e)}))}))},Manifest.prototype._createAsset=function _createAsset(e,t,n,o){var r=!!n.autoLoad&&n.autoLoad,f=!!n.extraFormatOptions&&n.extraFormatOptions;switch(n.type){case"spriteTexture":return new s.SpriteTexture(e,t,n.idList,f,r,o);case"texture":return new a.Texture(e,t,f,r,o);case"jsObject":return new d.JSObject(e,t,r,o);case"bitmapFont":return new c.BitmapFont(e,t,r,o);case"audioSprite":return new u.AudioSprite(e,t,r,o);case"audioStream":return new p.AudioStream(e,t,r,!n.loop||n.loop,n.duration);case"video":return new h.Video(e,t,r,o);case"spineTexture":return new m.SpineTexture(e,t,r,o);case"webFont":return new l.WebFont(e,t,r,o);default:return new i.Asset(e,t,r,o)}},Manifest.prototype.createRenderTexture=function createRenderTexture(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=new g.RenderTexture(e,{type:"image/rendered"},n,C,t);this._runtimeGroup.set(e,o),n&&o.load().subscribe()},Manifest.prototype._preload=function _preload(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===this._preloadComplete){this._preloadComplete=!1;var i,s=[];return o.forEach((function(o){var r=n._preloadGroup.get(o);null==r&&null==(r=n._preloadGroupFrames.get(o))||s.push.apply(s,e.toConsumableArray(r.download(t)))})),this._preloadGroup.forEach((function(n,r){!0!==o.includes(r)&&s.push.apply(s,e.toConsumableArray(n.download(t)))})),s.length>0?(this._progressChunk=100/s.length,(i=r.default.Observable).merge.apply(i,s).do((function(e){n._currentProgress+=n._progressChunk,n._preloadProgressObs.next(n._currentProgress)})).toArray().do((function(){n._preloadProgressObs.next(100),n._currentProgress=0,n._progressChunk=0,n._preloadComplete=!0}))):(this._preloadProgressObs.next(100),this._preloadComplete=!0,r.default.Observable.of([]))}return this._preloadProgressObs.filter((function(e){return 100===e})).take(1).mapTo([])},Manifest.prototype._backgroundLoad=function _backgroundLoad(t){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===this._backgroundComplete){this._backgroundComplete=!1;var i=[],s=[];return o.forEach((function(e){var t=n._backgroundGroup.get(e);null==t&&null==(t=n._backgroundGroupFrames.get(e))||i.push(t)})),this._backgroundGroup.forEach((function(e){!0!==i.includes(e)&&i.push(e)})),i.length>0?y.from(i).bufferCount(1).concatMap((function(n){return y.of(n.map((function(e){return e.download(t)}))).do((function(t){s.push.apply(s,e.toConsumableArray(t.flatMap((function(e){return e}))))})).delay(1)})).delay(1).toArray().do((function(){n._bgProgressChunk=100/s.length})).delay(1).switchMap((function(){return y.merge.apply(y,s).do((function(e){n._bgCurrentProgress+=n._bgProgressChunk,n._backgroundProgressObs.next(n._bgCurrentProgress)})).toArray().do((function(){n._backgroundProgressObs.next(100),n._bgCurrentProgress=0,n._bgProgressChunk=0,n._backgroundComplete=!0}))})):(this._backgroundProgressObs.next(100),this._backgroundComplete=!0,r.default.Observable.of([]))}return this._backgroundProgressObs.filter((function(e){return 100===e})).take(1).mapTo([])},Manifest.prototype._loadJSON=function _loadJSON(e){return JSON.parse(atob(e))},Manifest.prototype._getAssetPath=function _getAssetPath(e){if(this._hashmap.resources.hasOwnProperty(e)){mgsConfig.gameBuild.gameParams.pixelDensity;var t=mgsConfig.gameBuild.gameParams.lang,n=mgsConfig.gameBuild.gameParams.aspectRatio,o=mgsConfig.gameBuild.gameParams.audio,r=mgsConfig.gameBuild.gameParams.performance,i=window.__playnext_static_host,s=this._hashmap.resources[e].filter((function(e){return e.languages===t||!e.languages})).filter((function(e){return e.aspectRatios===n||!e.aspectRatios})).filter((function(e){return e.performances===r||!e.performances})).filter((function(e){return e.audios===o||!e.audios})).filter((function(e){return e.platforms===i||!e.platforms})).sort((function(e,t){return Object.keys(t).length-Object.keys(e).length}));return s.length>0?[this._buildPath+s[0].src]:""}},Manifest.prototype.makeHash=function makeHash(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},Manifest.prototype.dispose=function dispose(){this._hashmap=null,this._ids=null,this._preloadGroup.forEach((function(e){e.dispose()})),this._preloadGroup=null,this._preloadGroupFrames=null,this._backgroundGroup.forEach((function(e){e.dispose()})),this._backgroundGroup=null,this._backgroundGroupFrames=null,this._runtimeGroup.forEach((function(e){e.dispose()})),this._runtimeGroup=null,this._hasAudio=null,null!=this._initCompleteObs&&(this._initCompleteObs.unsubscribe(),this._initCompleteObs=null),null!=this._preloadProgressObs&&(this._preloadProgressObs.unsubscribe(),this._preloadProgressObs=null),this._progressChunk=null,this._currentProgress=null,this._preloadComplete=null,null!=this._backgroundProgressObs&&(this._backgroundProgressObs.unsubscribe(),this._backgroundProgressObs=null),this._bgProgressChunk=null,this._bgCurrentProgress=null,this._backgroundComplete=null},e.createClass(Manifest,[{key:"preload",get:function get(){var e={};return this._preloadGroup.forEach((function(t){e[t.id]=t})),e}},{key:"preloadProgressObs",get:function get(){return this._preloadProgressObs}},{key:"preloadProgress",get:function get(){return this.preloadProgressObs}},{key:"backgroundProgressObs",get:function get(){return this._backgroundProgressObs}},{key:"background",get:function get(){var e={};return this._backgroundGroup.forEach((function(t){e[t.id]=t})),e}},{key:"id",get:function get(){return this._ids[0]}}]),Manifest}(_.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SpriteTexture=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11),s=n(66),a=n(33);t.SpriteTexture=function(t){function SpriteTexture(n,o,r,i,s,a){e.classCallCheck(this,SpriteTexture);var c=e.possibleConstructorReturn(this,t.call(this,n,o,s,a));return c._frames={},c._setupFrames(r),c._extraFormatOptions=i,c._setupSources(),c}return e.inherits(SpriteTexture,t),SpriteTexture.prototype._generateId=function _generateId(){return"asset_"+i.Asset.nextNumberInSequence()},SpriteTexture.prototype._setupFrames=function _setupFrames(e){var t=!0,n=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;this._frames[s]=this._generateId()+"_"+s}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}},SpriteTexture.prototype._loadToMemory=function _loadToMemory(e){var t=this;if(e.length>0){var n=JSON.parse(JSON.stringify(e[0].data));this._changeFrameNames(n.frames);var o=3===this.sources.length&&this.sources[1].src[0].includes(".rgb.")&&this.sources[2].src[0].includes(".alpha."),i=e[1].data;return!0===this._extraFormatOptions?r.default.Observable.fromPromise(a.blobToArrayBuffer(i)).switchMap((function(e){return(i=new s.CompressedImage(e)).loadFromArrayBuffer(e),e=null,system.renderer.loadTextureAtlas(t.sources[1],i,n).mapTo(t)})):system.renderer.loadTextureAtlas(this.sources[1],i,n,o?{alphaData:e[2].data}:{}).mapTo(this)}return r.default.Observable.UNDEFINED},SpriteTexture.prototype._changeFrameNames=function _changeFrameNames(e){var t=this;return Object.keys(e).forEach((function(n){e[t._frames[n]]=e[n],delete e[n]})),e},SpriteTexture.prototype._setupSources=function _setupSources(){var e=this;this.sources.map((function(t){if(-1!==t.type.indexOf("image")&&!0===e._extraFormatOptions&&system.device.supportedTextureFormats.length>1){var n=t.src[0].substring(0,t.src[0].lastIndexOf("."))+"."+system.device.supportedTextureFormats[0],o=e.sources[e.sources.indexOf(t)];o.src[0]=n,o.type="application/octet-stream"}else-1!==t.type.indexOf("image")&&(e._extraFormatOptions=!1)}))},SpriteTexture.prototype.unload=function unload(){return!0===this._isLoaded?(t.prototype.unload.call(this),system.renderer.unloadSpriteTextureAsset(this.frames)):r.default.Observable.UNDEFINED},SpriteTexture.prototype.dispose=function dispose(){this._extraFormatOptions=null,this._frames=null,t.prototype.dispose.call(this)},e.createClass(SpriteTexture,[{key:"frames",get:function get(){return this._frames},set:function set(e){this._frames=e}}]),SpriteTexture}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Texture=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11),s=n(66),a=n(33);t.Texture=function(t){function Texture(n,o,r,i,s){e.classCallCheck(this,Texture);var a=e.possibleConstructorReturn(this,t.call(this,n,o,i,s));return a.internalID=a._generateId(),a._extraFormatOptions=r,a}return e.inherits(Texture,t),Texture.prototype.get=function get(){return system.renderer.getTextureAsset(this.internalID)},Texture.prototype._setupSources=function _setupSources(){var e=this.sources[0];if(-1!==e.type.indexOf("image")&&!0===this._extraFormatOptions&&system.device.supportedTextureFormats.length>1){var t=e.src[0].substring(0,e.src[0].lastIndexOf("png"))+system.device.supportedTextureFormats[0],n=this.sources[0];n.src[0]=t,n.type="application/octet-stream"}else this._extraFormatOptions=!1},Texture.prototype._generateId=function _generateId(){return"asset_"+i.Asset.nextNumberInSequence()+"_"+this.id},Texture.prototype._generate=function _generate(e){var t=!0,n=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var s=r.value;this._frames[s]=this._generateId()+"_"+s}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}},Texture.prototype._loadToMemory=function _loadToMemory(e){var t=this;if(e.length>0){var n=2===this.sources.length&&this.sources[1].src[0].includes(".alpha."),o=1===this.sources.length&&this.sources[0].src[0].includes(".half."),i=1===this.sources.length&&this.sources[0].src[0].includes(".quarter."),c=1===this.sources.length&&this.sources[0].src[0].includes(".half-x."),u=1===this.sources.length&&this.sources[0].src[0].includes(".half-y."),l=e[0].data;if(!0===this._extraFormatOptions)return r.default.Observable.fromPromise(a.blobToArrayBuffer(l)).switchMap((function(e){return(l=new s.CompressedImage(e)).loadFromArrayBuffer(e),e=null,system.renderer.loadTexture(t.sources[0],l,t.internalID).mapTo(t)}));var p={};return n&&(p.alphaData=e[1].data),o&&(p.mustMirror=!0),i&&(p.isQuarter=!0),c&&(p.isHalfX=!0),u&&(p.isHalfY=!0),system.renderer.loadTexture(this.sources[0],l,this.internalID,p).mapTo(this)}return r.default.Observable.UNDEFINED},Texture.prototype.unload=function unload(){return!0===this._isLoaded?(t.prototype.unload.call(this),system.renderer.unloadTextureAsset(this.internalID)):r.default.Observable.UNDEFINED},Texture.prototype.dispose=function dispose(){this._extraFormatOptions=null,t.prototype.dispose.call(this)},Texture}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.BitmapFont=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.BitmapFont=function(t){function BitmapFont(){return e.classCallCheck(this,BitmapFont),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(BitmapFont,t),BitmapFont.prototype._loadToMemory=function _loadToMemory(e){return e.length>0?"application/xml"===e[0].type?system.renderer.loadFont(this.sources[1],e[1].data,e[0].data).mapTo(this):system.renderer.loadFont(this.sources[0],e[0].data,e[1].data).mapTo(this):r.default.Observable.UNDEFINED},BitmapFont.prototype.unload=function unload(){return!0===this._isLoaded?(t.prototype.unload.call(this),"application/xml"===this.sources[0].type?system.renderer.unloadTextureAsset(this.sources[1].src):system.renderer.unloadTextureAsset(this.sources[0].src)):r.default.Observable.UNDEFINED},BitmapFont}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioSprite=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.AudioSprite=function(t){function AudioSprite(n,o,r,i){e.classCallCheck(this,AudioSprite);var s=e.possibleConstructorReturn(this,t.call(this,n,o,r,i));return s._format,s._setupSources(),s}return e.inherits(AudioSprite,t),AudioSprite.prototype._loadToMemory=function _loadToMemory(t){if(t.length===this.sources.length){var n="application/json"===t[0].type,o=e.extends({},t[n?0:1]),r=t[n?1:0];return o.data=JSON.parse(JSON.stringify(o.data)),o.data.format=[this._format],system.sound.load(r.data,o.data,this.id).filter((function(e){return r.data=null,o.data=null,0!==e.type||0===e.id}))}},AudioSprite.prototype.unload=function unload(){return!0===this._isLoaded?(t.prototype.unload.call(this),system.sound.unload(this.id)):r.default.Observable.UNDEFINED},AudioSprite.prototype._setupSources=function _setupSources(){var e=this;this.sources.map((function(t){-1===t.type.indexOf("application/json")&&(t.src=e.substitutePath(t),e._format=t.src[0].format,t.src=[t.src[0].file])}))},AudioSprite.prototype.substitutePath=function substitutePath(e){var t=[],n=e.src[0].substring(0,e.src[0].lastIndexOf(".")),o=!0,r=!1,i=void 0;try{for(var s,a=system.device.supportedAudioFormats[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var c=s.value,u=system.resource.findCachebustedAltAudioURL(n+"."+c);null!=u&&t.push({file:u,format:c})}}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}return t},AudioSprite}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.WebFont=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.WebFont=function(t){function WebFont(n,o,r,i){e.classCallCheck(this,WebFont);var s=e.possibleConstructorReturn(this,t.call(this,n,o,r,i));return s._format,s}return e.inherits(WebFont,t),WebFont.prototype._loadToMemory=function _loadToMemory(e){var t=this,n=new FileReader;return r.default.Observable.create((function(t){n.readAsDataURL(e[0].data),n.onloadend=function(){t.next(n.result),t.complete()}})).switchMap((function(e){return t._createAndLoadFont(e)}))},WebFont.prototype._createAndLoadFont=function _createAndLoadFont(e){if(!window.FontFace)return r.default.Observable.NULL;var t=new FontFace(this.id,"url("+e+")");return r.default.Observable.fromPromise(t.load()).do((function(){return document.fonts.add(t)}))},WebFont.prototype.unload=function unload(){return r.default.Observable.UNDEFINED},WebFont}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStream=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.AudioStream=function(t){function AudioStream(n,o,r,i,s){e.classCallCheck(this,AudioStream);var a=e.possibleConstructorReturn(this,t.call(this,n,o,r));return a._loop=i,a._duration=s,a._duration,a}return e.inherits(AudioStream,t),AudioStream.prototype.load=function load(){var e=this;return this._isLoaded?r.default.Observable.of([]):void 0===this._loadingObs?(this._loadingObs=new r.default.Subject,this._loadingObs.subscribeExt(this,(function(t){e._isLoaded=void 0!==t})),r.default.Observable.from(this.substitutePath(this.sources[0])).toArray().map((function(e){return e.filter((function(e){return void 0!==e}))})).switchMap((function(t){return e._loadToMemory(t)})).first().switchMap((function(t){return e._loadingObs.next(t),e._loadingObs.complete(),r.default.Observable.of([])}))):this._loadingObs},AudioStream.prototype._loadToMemory=function _loadToMemory(e){return e.length>0?system.sound.stream(e,this.id,this._loop,this._duration).filter((function(e){return 0!==e.type||0===e.id})):r.default.Observable.UNDEFINED},AudioStream.prototype.download=function download(){return[r.default.Observable.NULL]},AudioStream.prototype.unload=function unload(){return!0===this._isLoaded?(t.prototype.unload.call(this),system.sound.unload(this.id)):r.default.Observable.UNDEFINED},AudioStream.prototype.substitutePath=function substitutePath(e){var t=[],n=e.src[0].substring(0,e.src[0].lastIndexOf(".")),o=!0,r=!1,i=void 0;try{for(var s,a=system.device.supportedAudioFormats[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var c=s.value,u=system.resource.findCachebustedAltAudioURL(n+"."+c);null!=u&&t.push({file:u,format:c})}}catch(e){r=!0,i=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}return t},AudioStream.prototype.dispose=function dispose(){this._loop=null,t.prototype.dispose.call(this)},AudioStream}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.JSObject=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.JSObject=function(t){function JSObject(n,o,r,i){e.classCallCheck(this,JSObject);var s=e.possibleConstructorReturn(this,t.call(this,n,o,r,i));return s._clonedJson=null,s._loadedJson=null,s._content=o[0].content,s._vflSolverScriptsInjected=!1,null!=s._content&&(s._isLoaded=!0,s._isDownloaded=!0,s._loadedJson=s._content,s._handleVflSolverScripts()),s}return e.inherits(JSObject,t),JSObject.prototype.get=function get(){return null!=this._clonedJson?this._clonedJson:(this._clonedJson=JSON.parse(JSON.stringify(this._loadedJson)),this._clonedJson)},JSObject.prototype._loadToMemory=function _loadToMemory(e){return e.length>0?(this._loaded=!0,this._loadedJson=e[0].data,this._handleVflSolverScripts(),r.default.Observable.of(this)):r.default.Observable.UNDEFINED},JSObject.prototype._injectVflSolverScripts=function _injectVflSolverScripts(){if(!0!==this._vflSolverScriptsInjected){this._vflSolverScriptsInjected=!0;var e="\nObject.assign(window.__playnext_vflSolverScriptsActual, {",t=0;for(var n in this._loadedJson.vflSolverScripts)null==window.__playnext_vflSolverScriptsActual[n]&&(t++>0&&(e+=","),e+="\n  '"+n+"': "+this._loadedJson.vflSolverScripts[n]);if(e+="\n});",t>0){var o=document.createElement("script");o.type="text/javascript",o.text=e,document.body.appendChild(o)}}},JSObject.prototype._handleVflSolverScripts=function _handleVflSolverScripts(){var e=this;if(null!=this._loadedJson.vflSolverScripts){null==window.__playnext_vflSolverScripts&&(window.__playnext_vflSolverScripts={},window.__playnext_vflSolverScriptsActual={});var t=function _loop(t){null==window.__playnext_vflSolverScripts[t]&&(window.__playnext_vflSolverScripts[t]=function(n,o){return!0!==e._vflSolverScriptsInjected&&e._injectVflSolverScripts(),window.__playnext_vflSolverScriptsActual[t](n,o)})};for(var n in this._loadedJson.vflSolverScripts)t(n)}},JSObject.prototype.unload=function unload(){return!0===this._isLoaded&&null==this._content&&(t.prototype.unload.call(this),this._clonedJson=null,this._loadedJson=null,!0)},JSObject.prototype.dispose=function dispose(){this._clonedJson=null,this._loadedJson=null,this._content=null,t.prototype.dispose.call(this)},JSObject}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=void 0;var o=n(1),r=e.interopRequireDefault(o);t.Frame=function(){function Frame(t,n,o){e.classCallCheck(this,Frame),this._id=t,this._uid=n,this._sourceAsset=o}return Frame.prototype.get=function get(){if(!0===this._sourceAsset.isLoaded)return system.renderer.getTextureAsset(this.uid)},Frame.prototype.load=function load(){return!0!==this._sourceAsset.isLoaded?this._sourceAsset.load():r.default.Observable.UNDEFINED},Frame.prototype.download=function download(){return this._sourceAsset.download()},Frame.prototype.dispose=function dispose(){this._id=null,this._uid=null,this._sourceAsset=null},e.createClass(Frame,[{key:"id",get:function get(){return this._id}},{key:"uid",get:function get(){return this._uid}}]),Frame}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Video=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.Video=function(t){function Video(){return e.classCallCheck(this,Video),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Video,t),Video.prototype.get=function get(){return system.renderer.getVideoAsset(this.id)},Video.prototype.download=function download(){var e=this,t=this.sources[0];return system.resource.loadResourceData(t,this.isBkg).do((function(){e._downloadObs.next(!0),e._isDownloaded=!0,!0===e.autoLoad&&e.load().subscribe((function(){}))})).map((function(e){return[e]}))},Video.prototype._loadToMemory=function _loadToMemory(e){if(e.length>0){var t=e[0].data;return system.renderer.loadVideo(this.sources[0],t,this.id).mapTo(this)}return r.default.Observable.of(this)},Video.prototype.unload=function unload(){return t.prototype.unload.call(this),system.renderer.unloadVideoAsset(this.id)},Video}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SpineTexture=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.SpineTexture=function(t){function SpineTexture(n,o,r,i){e.classCallCheck(this,SpineTexture);var s=e.possibleConstructorReturn(this,t.call(this,n,o,r,i));return s._idToSourceMap={},s._extraFormatOptions=!1,s._hasAlphaCompanion=!1,s._loadedJson=null,s._loadedAtlas=null,s._setupSources(),s}return e.inherits(SpineTexture,t),SpineTexture.prototype.get=function get(){var e=this,t=[];if(Object.keys(this._idToSourceMap).forEach((function(n){var o=system.renderer.getTextureAsset(e._idToSourceMap[n],!0);null!=o&&t.push(o)})),!(t.length<this.sources.length-2)){var n={id:this.id,json:this._loadedJson,atlas:this._loadedAtlas,idToSourceMap:this._idToSourceMap};if(null!=n.json&&null!=n.atlas&&0!==Object.keys(n.idToSourceMap))return n}},SpineTexture.prototype._loadToMemory=function _loadToMemory(t){var n=this;if(t.length>0){var o;this._loadedJson=t[0].data,this._loadedAtlas=t[1].data;var i=[];return t.forEach((function(o,r){if(r>=2){var s=n.sources[r];i.push(system.renderer.loadTextureAtlas(s,t[r].data,{id:n.id},{isSpineTexture:!0}).take(1));var a=s.src[0].match(/^(.*\/)?([^\/]+)(\.[^\/\.]+)$/),c=e.slicedToArray(a,4)[3],u=s.file+c;n._idToSourceMap[u]=s.src[0]}})),(o=r.default.Observable).forkJoin.apply(o,i).mapTo(this)}return r.default.Observable.UNDEFINED},SpineTexture.prototype._setupSources=function _setupSources(){},SpineTexture.prototype.unload=function unload(){var e=this;return!0===this._isLoaded&&(t.prototype.unload.call(this),this._loadedJson=null,this._loadedAtlas=null,this.sources.forEach((function(t,n){n>=2&&system.renderer.unloadTextureAsset(e.sources[n])}))),r.default.Observable.UNDEFINED},SpineTexture.prototype.dispose=function dispose(){this._extraFormatOptions=null,this._idToSourceMap=null,this._loadedJson=null,this._loadedAtlas=null,t.prototype.dispose.call(this)},SpineTexture}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RenderTexture=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(11);t.RenderTexture=function(t){function RenderTexture(n,o){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3],s=arguments[4];e.classCallCheck(this,RenderTexture);var a=e.possibleConstructorReturn(this,t.call(this,n,o,r,i));return a._downloadObs.next(!0),a._isLoaded=!1,a._isDownloaded=!0,a._autoLoad=r,a._group=i,a._props=s,a.internalID=a._generateId(),a._texture=null,a}return e.inherits(RenderTexture,t),RenderTexture.prototype._generateId=function _generateId(){return"asset_"+i.Asset.nextNumberInSequence()+"_"+this.id},RenderTexture.prototype.get=function get(){if(!0===this._isLoaded)return this.publicAPI},RenderTexture.prototype.load=function load(){return this._isLoaded?r.default.Observable.of([]):this._loadToMemory()},RenderTexture.prototype._loadToMemory=function _loadToMemory(){var e=this;return r.default.Observable.create((function(t){system.renderer.createRenderTexture(e.internalID,e._props),e._isLoaded=!0,r.default.Observable.of([]).subscribe(t)}))},RenderTexture.prototype.download=function download(){return[r.default.Observable.NULL]},RenderTexture.prototype.unload=function unload(){!0===this._isLoaded&&(t.prototype.unload.call(this),system.renderer.unloadTextureAsset(this.internalID))},RenderTexture.prototype.dispose=function dispose(){this._group=null,this._props=null,t.prototype.dispose.call(this)},e.createClass(RenderTexture,[{key:"publicAPI",get:function get(){var e=this;return{texture:this.texture,renderToTexture:function renderToTexture(t,n,o){system.renderer.renderIntoTexture(t,e.internalID,n,o)}}}},{key:"texture",get:function get(){return null==this._texture&&(this._texture=system.renderer.getTextureAsset(this.internalID)),this._texture}}]),RenderTexture}(i.Asset)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.AssetBundle=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(7);t.AssetBundle=function(t){function AssetBundle(n,o){e.classCallCheck(this,AssetBundle);var i=e.possibleConstructorReturn(this,t.call(this));return i._owner=n,i._assets=o,i._progressObs=new r.default.Subject,i._progressChunk=0,i._currentProgress=0,null!=n._compositeDisposable&&n._compositeDisposable.add((function(){i.dispose()})),i}return e.inherits(AssetBundle,t),AssetBundle.prototype.download=function download(){var t;return(t=[]).concat.apply(t,e.toConsumableArray(this._assets.map((function(e){return"function"!=typeof e.download?r.default.Observable.NULL:e.download()}))))},AssetBundle.prototype.get=function get(){var e={};return this._assets.forEach((function(t){var n=void 0;t.get?(n=t.get(),e[t.id]=n):e[t.id]=null})),e},AssetBundle.prototype.load=function load(){var e=this;return this._progressChunk=0,this._assets.length>0&&(this._progressChunk=100/this._assets.length),r.default.Observable.from(this._assets).flatMap((function(t){return(t.load?t.load():r.default.Observable.of(t)).do((function(){null!=e._progressObs&&(e._currentProgress+=e._progressChunk,e._progressObs.next(e._currentProgress))}))})).toArray().filter((function(){return null!=e._progressObs})).do((function(){e._progressObs.next(100),e._progressObs.complete(),e._currentProgress=0,e._progressChunk=0}))},AssetBundle.prototype.loadAndGet=function loadAndGet(){var e=this;return this.load().map((function(){return e.get()}))},AssetBundle.prototype.getAssetMetaData=function getAssetMetaData(e){var t=this._assets.get(e);return void 0!==t?t:"Asset not found"},AssetBundle.prototype.dispose=function dispose(){this._owner=null,this._assets=null,this._progressObs=null,this._progressChunk=null,this._currentProgress=null,t.prototype.dispose.call(this)},e.createClass(AssetBundle,[{key:"progress",get:function get(){return this._progressObs}},{key:"assets",get:function get(){return this._assets}},{key:"owner",get:function get(){return this._owner}}]),AssetBundle}(i.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.LifeCycleManager=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(23),s=n(132),a=n(67),c=n(13),u=n(2);t.LifeCycleManager=function(t){function LifeCycleManager(){return e.classCallCheck(this,LifeCycleManager),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(LifeCycleManager,t),LifeCycleManager.prototype._init=function _init(){this._contextMap=new s.LifeCycleObjectMap},LifeCycleManager.prototype._destroy=function _destroy(){this._contextMap=null},LifeCycleManager.prototype.__lifeCycleFailure=function __lifeCycleFailure(e,t,n){var o=this._contextMap.get(t);throw e.message="GID: "+t.gid+"\nCTOR: "+t.constructor.name+"\ninstance.lifeState: "+(null!=t.lifeState?t.lifeState.value:t.lifeState)+"\nobjectContext.lifeCycleExecutingState: "+(null!=o?o.lifeCycleExecutingState.value:null)+"\nobjectContext.waitingForSubComponentsLifeState: "+(null!=o?o.waitingForSubComponentsLifeState.value:null)+"\nparam lifeCycleState: "+n,e},LifeCycleManager.prototype.create=function create(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=new(Function.prototype.bind.apply(e,[null].concat(n)));return this._executeLifeCycleStep(r,i.LifeCycleStep.CONSTRUCT_AFTER)((function(){u.Component._enterLifeCycleBusySection()})),r},LifeCycleManager.prototype.initialize=function initialize(e,t){var n=null!=e.owner?this._getExecutingLifeState(e.owner):void 0,o=null!=e.owner?this._getObjectContext(e.owner):null,r=this._getObjectContext(e);r.selfInitializing=!0,this._executeSequence([this._executeLifeCycleState(e,i.LifeCycleState.preload),this._executeLifeCycleState(e,i.LifeCycleState.init),this._executeLifeCycleState(e,i.LifeCycleState.bind),this._executeLifeCycleState(e,i.LifeCycleState.ready)],(function(o){r.selfInitializing=!1,null!=e.owner&&(null==n||n.value>i.LifeCycleState.ready)&&e.dispose(),t&&t(o)}),(function(t){var n=null!=o?o.waitingForSubComponentsLifeState.value:i.LifeCycleState.ready;return null!=e.lifeState&&e.lifeState.value<n}))},LifeCycleManager.prototype.finalize=function finalize(e,t){var n=this,o=this._getObjectContext(e);e.lifeState.value<i.LifeCycleState.ready?u.Component.waitForCreated(e).subscribe((function(){n.finalize(e,t)})):o.lifeCycleExecutingState.value>i.LifeCycleState.ready?t&&t(value):this._executeSequence([this._executeLifeCycleState(e,i.LifeCycleState.unbind),this._executeLifeCycleState(e,i.LifeCycleState.destroy),this._executeLifeCycleState(e,i.LifeCycleState.null)],(function(e){t&&t(e)}),(function(t){return!!e.lifeState&&e.lifeState.value<i.LifeCycleState.null}))},LifeCycleManager.prototype._executeLifeCycleMethodUnscheduled=function _executeLifeCycleMethodUnscheduled(e,t){return function(n){if(t){var o=t.call(e);o instanceof r.default.Observable?o.subscribe(null,null,(function(){n(null)})):n(o)}else n(null)}},LifeCycleManager.prototype._executeLifeCycleMethodScheduled=function _executeLifeCycleMethodScheduled(e,t){return function(n){t?system.scheduler.schedule((function(){var o=t.call(e);o instanceof r.default.Observable?o.subscribe(null,null,(function(){system.scheduler.schedule((function(){n(null)}))})):n(o)})):n(null)}},LifeCycleManager.prototype._executeLifeCycleMethod=function _executeLifeCycleMethod(e,t){return!0===r.default.Scheduler.playnextAsap._relaxationActive?this._executeLifeCycleMethodUnscheduled(e,t):this._executeLifeCycleMethodScheduled(e,t)},LifeCycleManager.prototype._executeLifeCycleStep=function _executeLifeCycleStep(e,t){var n=this,o=this._getObjectContext(e).lifeCycleMethods.get(t);return function(t){if(o)if(o instanceof Array){for(var r=Array(o.length),i=0;i<o.length;i++)r[i]=n._executeLifeCycleMethod(e,o[i]);n._executeSequence(r,t)}else{n._executeLifeCycleMethod(e,o)(t)}else t(null)}},LifeCycleManager.prototype._executeSubComponentLifeState=function _executeSubComponentLifeState(e,t,n){var o=this;e.lifeState.first((function(e){return e===t})).subscribe(null,null,n);var r=this._getObjectContext(e);!0===r.selfInitializing?e.lifeState.value===r.lifeCycleExecutingState.value===t-1&&this._executeLifeCycleState(e,t)((function(){})):e.lifeState.value===r.lifeCycleExecutingState.value&&e.lifeState.value<t&&(e.lifeState.value===t-1?this._executeLifeCycleState(e,t)((function(){})):this._executeSubComponentLifeState(e,t-1,(function(){o._executeLifeCycleState(e,t)((function(){}))})))},LifeCycleManager.prototype._processSubComponentsLifeCycle=function _processSubComponentsLifeCycle(e,t){var n=this;return function(o){e._lifeInitSubsAdded=!0;var r=e.getComponents().slice().filter((function(e){return e.lifeState.value<t})),s=r.length,a=0;if(s>0){var c=function lifeStateCompleteFunc(){++a>s&&n.__lifeCycleFailure(new Error,e,t),a===s&&n._processSubComponentsLifeCycle(e,t)(o)},u=(0,i.getLifeCyclePhase)(t);if(u===i.LifeCyclePhase.CONSTRUCT)for(var l=0;l<s;l++){var p=r[l];n._executeSubComponentLifeState(p,t,c)}else if(u===i.LifeCyclePhase.DESTRUCT)for(var d=s-1;d>=0;d--){var f=r[d];n._executeSubComponentLifeState(f,t,c)}}else{var h=n._getObjectContext(e);h.waitingForSubComponentsLifeState.value!=t&&n.__lifeCycleFailure(new Error,e,t),h.waitingForSubComponentsLifeState.next(t+1),o(null)}}},LifeCycleManager.prototype._executeSequence=function _executeSequence(e,t,n){!function executeMethodAtIndex(o){var r=!n||n(o);o<e.length&&r?(0,e[o])((function(){executeMethodAtIndex(++o)})):t(null)}(0)},LifeCycleManager.prototype._executeConstructLifeCycleState=function _executeConstructLifeCycleState(e,t){var n=this;return function(o){system.scheduler.schedule((function(){n._getExecutingLifeState(e).value;var r=n._getLifeCycleStateSteps(e,t);n._executeSequence([n._executeLifeCycleStep(e,r.before),n._executeLifeCycleStep(e,r.current),n._processSubComponentsLifeCycle(e,t),n._executeLifeCycleStep(e,r.after)],(function(r){e._lifeStateMachine.value!=t&&n.__lifeCycleFailure(new Error,e,t),e.lifeState.value!=t-1&&n.__lifeCycleFailure(new Error,e,t),e.lifeState.next(t),t===i.LifeCycleState.ready&&u.Component._leaveLifeCycleBusySection(),o(r)}),(function(){return!0}))}))}},LifeCycleManager.prototype._executeDestructLifeCycleState=function _executeDestructLifeCycleState(e,t){var n=this;return function(o){system.scheduler.schedule((function(){var r=e.lifeState;if(t===i.LifeCycleState.null)n._executeSequence([n._processSubComponentsLifeCycle(e,t),n._executeLifeCycleStep(e,i.LifeCycleStep.DESTROY)],(function(i){e._lifeStateMachine.value!=t&&n.__lifeCycleFailure(new Error,e,t),r.value!=t-1&&n.__lifeCycleFailure(new Error,e,t),r.next(t),o(i)}));else{var s=n._getLifeCycleStateSteps(e,t);n._executeSequence([n._executeLifeCycleStep(e,s.before),n._processSubComponentsLifeCycle(e,t),n._executeLifeCycleStep(e,s.current),n._executeLifeCycleStep(e,s.after)],(function(i){e._lifeStateMachine.value!=t&&n.__lifeCycleFailure(new Error,e,t),e.lifeState.value!=t-1&&n.__lifeCycleFailure(new Error,e,t),r.next(t),o(i)}))}}))}},LifeCycleManager.prototype._executeLifeCycleState=function _executeLifeCycleState(e,t){var n=this;return function(o){var r=n._getExecutingLifeState(e);e._lifeStateMachine.value!=t-1&&n.__lifeCycleFailure(new Error,e,t),e.lifeState.value!=t-1&&n.__lifeCycleFailure(new Error,e,t),r.next(t);var s=(0,i.getLifeCyclePhase)(t);s===i.LifeCyclePhase.CONSTRUCT?n._executeConstructLifeCycleState(e,t)(o):s===i.LifeCyclePhase.DESTRUCT?n._executeDestructLifeCycleState(e,t)(o):o(null)}},LifeCycleManager.prototype._createContextObject=function _createContextObject(e){var t={before:void 0,current:void 0,after:void 0},n={gid:e.gid,params:0,selfInitializing:!1,lifeCycleMethods:this._getInstanceLifeCycleMethodMap(e),lifeCycleStateSteps:t,lifeCycleExecutingState:new a.ScheduledBehaviorSubject(i.LifeCycleState.undefined),waitingForSubComponentsLifeState:new r.default.BehaviorSubject(i.LifeCycleState.preload)};return this._contextMap.set(e,n),n},LifeCycleManager.prototype._getRegisterLifeCycleMethod=function _getRegisterLifeCycleMethod(e){return function(t,n){var o=e.get(t);o?o instanceof Array?o.push(n):e.set(t,[o,n]):e.set(t,n)}},LifeCycleManager.prototype._getInstanceLifeCycleMethodMap=function _getInstanceLifeCycleMethodMap(e){var t=new Map,n=this._getRegisterLifeCycleMethod(t);return e.getLifeCycleMethods(n),t},LifeCycleManager.prototype._getObjectContext=function _getObjectContext(e){return this._contextMap.get(e)||this._createContextObject(e)},LifeCycleManager.prototype._getExecutingLifeState=function _getExecutingLifeState(e){return this._getObjectContext(e).lifeCycleExecutingState},LifeCycleManager.prototype._getLifeCycleStateSteps=function _getLifeCycleStateSteps(e,t){var n=this._getObjectContext(e);switch(t){case i.LifeCycleState.preload:n.lifeCycleStateSteps.before=i.LifeCycleStep.PRELOAD_BEFORE,n.lifeCycleStateSteps.current=i.LifeCycleStep.PRELOAD,n.lifeCycleStateSteps.after=i.LifeCycleStep.PRELOAD_AFTER;break;case i.LifeCycleState.init:n.lifeCycleStateSteps.before=i.LifeCycleStep.INIT_BEFORE,n.lifeCycleStateSteps.current=i.LifeCycleStep.INIT,n.lifeCycleStateSteps.after=i.LifeCycleStep.INIT_AFTER;break;case i.LifeCycleState.bind:n.lifeCycleStateSteps.before=i.LifeCycleStep.BIND_BEFORE,n.lifeCycleStateSteps.current=i.LifeCycleStep.BIND,n.lifeCycleStateSteps.after=i.LifeCycleStep.BIND_AFTER;break;case i.LifeCycleState.ready:n.lifeCycleStateSteps.before=i.LifeCycleStep.READY_BEFORE,n.lifeCycleStateSteps.current=i.LifeCycleStep.READY,n.lifeCycleStateSteps.after=i.LifeCycleStep.READY_AFTER;break;case i.LifeCycleState.unbind:n.lifeCycleStateSteps.before=i.LifeCycleStep.UNBIND_BEFORE,n.lifeCycleStateSteps.current=i.LifeCycleStep.UNBIND,n.lifeCycleStateSteps.after=i.LifeCycleStep.UNBIND_AFTER;break;case i.LifeCycleState.destroy:n.lifeCycleStateSteps.before=i.LifeCycleStep.FINALIZE_BEFORE,n.lifeCycleStateSteps.current=i.LifeCycleStep.FINALIZE,n.lifeCycleStateSteps.after=i.LifeCycleStep.FINALIZE_AFTER;break;case i.LifeCycleState.null:n.lifeCycleStateSteps.before=void 0,n.lifeCycleStateSteps.current=i.LifeCycleStep.DESTROY,n.lifeCycleStateSteps.after=void 0;break;default:n.lifeCycleStateSteps.before=void 0,n.lifeCycleStateSteps.current=void 0,n.lifeCycleStateSteps.after=void 0}return n.lifeCycleStateSteps},LifeCycleManager}(c.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.LifeCycleObjectMap=function(){function LifeCycleObjectMap(){e.classCallCheck(this,LifeCycleObjectMap),this._map=new WeakMap}return LifeCycleObjectMap.prototype.get=function get(e){return this._map.get(e)},LifeCycleObjectMap.prototype.has=function has(e){return this._map.has(e)},LifeCycleObjectMap.prototype.set=function set(e,t){if(!this.has(e))return this._map.set(e,t),this;throw new Error("LifeCycleObjectMap#set called more than once with the same key")},LifeCycleObjectMap.prototype.dispose=function dispose(){this._map=null},LifeCycleObjectMap}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Fallback=void 0;var o=n(2);t.Fallback=function(t){function Fallback(n,o,r){e.classCallCheck(this,Fallback);var i=e.possibleConstructorReturn(this,t.call(this,n,o));return i._loader=r,i._instance=void 0,i}return e.inherits(Fallback,t),Fallback.prototype.initInstance=function initInstance(){},Fallback.prototype.play=function play(){},Fallback.prototype.stop=function stop(){},Fallback.prototype.checkCachedItemResources=function checkCachedItemResources(e){return this._loader._checkCachedResources(e)},Fallback.prototype.loadResources=function loadResources(e){return this._loader.loadResources(e)},Fallback.prototype.dispose=function dispose(){this._loader=null,this._instance=null,t.prototype.dispose.call(this)},Fallback}(o.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ControlProperties=void 0;var o=n(65),r=n(24),i="__lh",s=void 0,a=function isValidProperty(e){return null!=e&&""!==e&&e==e},c=function extractOrientedPropertyFromIndex(e,t,n){var o=e._orientedProps.get(t);return null!=o&&o.get(0===n&&r.RenderIO.leftHandedMode?s:r.RenderIO.Orientations[n])};t.ControlProperties=function(t){function ControlProperties(n){e.classCallCheck(this,ControlProperties);var o=e.possibleConstructorReturn(this,t.call(this,n));return null==s&&(s=r.RenderIO.Orientations[0]+i),o._orientationIndex=system.renderService._dimensionAdapter.orientation,o._orientedProps=new Map,o}return e.inherits(ControlProperties,t),ControlProperties.prototype.overrideSetter=function overrideSetter(e,t){return this._descriptors.get(e),a(t)&&function checkOrientedPropertiesExist(e){return a(e[r.RenderIO.Orientations[0]])}(t)&&(!function assignOrientedProperty(e,t,n){var o=r.RenderIO.Orientations,i=function assign(o){var r=e._orientedProps;null==r&&(e._orientedProps=r=new Map);var i=r.get(t);null==i&&r.set(t,i=new Map),i.set(o,n[o])},a=!0,c=!1,u=void 0;try{for(var l,p=o[Symbol.iterator]();!(a=(l=p.next()).done);a=!0){var d=l.value;d===o[0]&&(n.hasOwnProperty(s)||(n[s]=n[o[0]]),i(s)),i(d)}}catch(e){c=!0,u=e}finally{try{!a&&p.return&&p.return()}finally{if(c)throw u}}}(this,e,t),t=c(this,e,this._orientationIndex)),t},ControlProperties.prototype.updateOrientation=function updateOrientation(e){var t=this;this._orientationIndex=e,this.beginChange(),this._orientedProps.forEach((function(n,o){var r=c(t,o,e);a(r)&&(t[o]=r)})),this.endChange()},ControlProperties.prototype.toSOCreateProperties=function toSOCreateProperties(){var e=this,t={};return this._descriptors.forEach((function(n,o){var r=n;"parent"!==o&&r.hasOwnProperty("sceneObjectProperty")&&(t["string"==typeof r.sceneObjectProperty?r.sceneObjectProperty:o]=e[o])})),t.id=this._component.gid,t},ControlProperties.prototype.asSceneObject=function asSceneObject(){var e=this._component.properties,t=this._component._sceneObject;return this._descriptors.forEach((function(n,o){t.hasOwnProperty(o)&&(t[o]=e[o])})),t.parent=e.parent?e.parent.gid:e.parent,t},e.createClass(ControlProperties,[{key:"orientationIndex",get:function get(){return this._orientationIndex}}]),ControlProperties}(o.ComponentProperties)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RuleCollection=void 0;var o=n(2),r=n(17),i=n(36),s=n(70),a=n(50),c=n(69);t.RuleCollection=function(t){function RuleCollection(n,o){if(e.classCallCheck(this,RuleCollection),!(n instanceof r.Scene||n instanceof i.Game))throw new Error("Rule Collection owner must be of type Scene or Game");return e.possibleConstructorReturn(this,t.call(this,n,o))}return e.inherits(RuleCollection,t),RuleCollection.prototype.createRule=function createRule(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!(e.prototype instanceof s.Rule))throw new Error("RuleCollection.createRule: RuleClass must be of type Rule");return t=t||e.name,this.createComponent(e,t,n)},RuleCollection.prototype.createState=function createState(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!(e.prototype instanceof a.State))throw new Error("RuleCollection.createState: StateClass must be of type State");return n=n||e.name,this.createComponent(e,n,t)},RuleCollection.prototype.createModel=function createModel(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!(e.prototype instanceof c.Model))throw new Error("RuleCollection.createModel: ModelClass must be of type Model");return n=n||e.name,this.createComponent(e,n,t)},RuleCollection}(o.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var o=n(1),r=e.interopRequireDefault(o);t.State=function(t){function State(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.classCallCheck(this,State);var o=e.possibleConstructorReturn(this,t.call(this,n));return o._initialised=void 0!==n,o._asObservable=o.filter((function(){return!0===o._initialised})),o}return e.inherits(State,t),State.prototype.asObservable=function asObservable(){return this._asObservable},State.prototype.next=function next(e){this._initialised=!0,t.prototype.next.call(this,e)},State.prototype.error=function error(){throw new Error("Cannot use 'error()' on '"+State.name+"' class.")},State.prototype.complete=function complete(){throw new Error("Cannot use 'complete()' on '"+State.name+"' class.")},State}(r.default.BehaviorSubject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentGroup=void 0;var o=n(7);t.ComponentGroup=function(t){function ComponentGroup(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.classCallCheck(this,ComponentGroup);var o=e.possibleConstructorReturn(this,t.call(this));return o._components={},n.forEach((function(e){return o.add(e)})),o}return e.inherits(ComponentGroup,t),ComponentGroup.createGroup=function createGroup(e){return new ComponentGroup(e)},ComponentGroup.prototype.add=function add(e){if(this._components.hasOwnProperty(e.gid))throw new Error("ComponentGroup.Add() : Attempting to add a component to a group that already contains it");this._components[e.gid]=e},ComponentGroup.prototype.remove=function remove(e){this._components.hasOwnProperty(e.gid)&&delete this._components[e.gid]},ComponentGroup.prototype.forEach=function forEach(e){for(var t in this._components)e(this._components[t])},ComponentGroup.prototype.dispose=function dispose(){this._components=null,t.prototype.dispose.call(this)},ComponentGroup}(o.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutCache=t.ALIGNMENT_DATA_TYPE=void 0;var o=n(7),r=t.ALIGNMENT_DATA_TYPE={CALCULATED:1,SCENE:2};t.LayoutCache=function(t){function LayoutCache(){e.classCallCheck(this,LayoutCache);var n=e.possibleConstructorReturn(this,t.call(this));return n._cache={},n._lastKey=0,n._lastKeyString=null,n}return e.inherits(LayoutCache,t),LayoutCache.prototype.getData=function getData(e,t,n){var o=this._getSubCacheKeyString(t,n),r=this._cache[o]=this._cache[o]||{};return r.__timeMs__=Date.now(),r[e.gid]},LayoutCache.prototype.updateData=function updateData(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.CALCULATED,s=this._getSubCacheKeyString(t,n),a=this._cache[s]=this._cache[s]||{};a.__timeMs__=Date.now(),this._applyCacheLimit();var c=a[e.gid]=a[e.gid]||{};for(var u in c.gid=o.gid,c.timeMs=o.timeMs,c.vfl=o.vfl,c.subControls=c.subControls||{},c.subControls)c.subControls.__dataType===i&&delete c.subControls[u];for(var l in o.subControls)c.subControls[l]=o.subControls[l],c.subControls[l].__dataType=i;return c},LayoutCache.prototype._applyCacheLimit=function _applyCacheLimit(){var e=this,t=Object.keys(this._cache);if(t.length>6)for(var n=(t=t.sort((function(t,n){return e._cache[n].__timeMs__-e._cache[t].__timeMs__}))).length-1;n>=6;n--){var o=t[n];delete this._cache[o]}},LayoutCache.prototype._getSubCacheKeyString=function _getSubCacheKeyString(e,t){var n=e<<30|t.width<<13|t.height;return n===this._lastKey?this._lastKeyString:(this._lastKey=n,this._lastKeyString=n.toString(),this._lastKeyString)},LayoutCache.prototype._dispose=function _dispose(){this._cache=null,t.prototype._dispose.call(this)},LayoutCache}(o.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";n(16).Container.prototype._layoutView=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneManager=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(17),s=n(2),a=n(22),c=n(51),u=n(52),l=n(25);t.SceneManager=function(t){function SceneManager(n,o,i){e.classCallCheck(this,SceneManager);for(var c=arguments.length,l=Array(c>3?c-3:0),p=3;p<c;p++)l[p-3]=arguments[p];var d=e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,i].concat(l)));return d._ownerSceneMap={},d._mainScene=new r.default.BehaviorSubject,d._onSceneCreated=new a.Event,d._onSceneDestroyed=new a.Event,s.Component.onComponentRemove.subscribeExt(d,(function(e){if(e.owner instanceof s.Component&&null!==d._ownerSceneMap&&d._ownerSceneMap.hasOwnProperty(e.owner.gid)){var t=d._ownerSceneMap[e.owner.gid];void 0!==t&&t.hasOwnProperty(e.gid)&&(delete t[e.gid],d._mainScene.value===e&&d._mainScene.next(void 0),d._onSceneDestroyed.next(e),d.sendMessage(new u.SceneDestroyedMessage(d,e)))}e instanceof s.Component&&null!==d._ownerSceneMap&&d._ownerSceneMap.hasOwnProperty(e.gid)&&delete d._ownerSceneMap[e.gid]})),d}return e.inherits(SceneManager,t),SceneManager.prototype.createScene=function createScene(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(e instanceof s.Component))throw new Error("Owner must be of type '"+s.Component.name+"'.");if(!(t.prototype instanceof i.Scene))throw new Error("SceneClass must be of type '"+t.name+"'.");var r=l.LayoutManager.getInstance(),a=r._safeAreaLocal,u=r.currentDimensions;o.x=a.x,o.y=a.y,o.width=a.w,o.height=a.h,o.designW=u.safeArea.designW,o.designH=u.safeArea.designH;var p=e.createControl(t,void 0,o);this._game&&s.Component.waitForCreated(p).subscribe((function(){n._onSceneCreated.next(p),n.sendMessage(new c.SceneCreatedMessage(n,p))}));var d=this.__getSceneMap(e);return d[p.gid]=p,p},SceneManager.prototype.destroyScene=function destroyScene(e,t){var n=this.getScene(e,t);if(void 0===n)throw Error("Unable to destroy scene. No instance found!");return n.dispose(),n},SceneManager.prototype.getScene=function getScene(e,t){if(null!=t){var n=void 0;if(t instanceof i.Scene)n=t.gid;else if(t.prototype instanceof i.Scene){var o=s.Component.getComponentsByClass(t,e);if(void 0!==o)if(1===o.length)n=o[0].gid;else if(o.length>0)throw Error("Unable to determine scene gid. There are multiple instances.")}if(void 0!==n){var r=this.__getSceneMap(e);if(r.hasOwnProperty(n))return r[n]}}},SceneManager.prototype.getScenes=function getScenes(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(!0===e){var n=this._mainScene.value;if(n){t.push(n);var o=this._ownerSceneMap[n.gid];for(var r in o){var i=o[r];t.push(i)}}}for(var s in this._ownerSceneMap){var a=this._ownerSceneMap[s];for(var c in a){var u=a[c];-1===t.indexOf(u)&&t.push(u)}}return t},SceneManager.prototype.getOrderedListOfVisibleScenes=function getOrderedListOfVisibleScenes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.values(this._ownerSceneMap.game).filter((function(t){return e.includes(t.id)||t.properties.alpha>0&&t.properties.visible})).sort((function(e,t){return e.properties.z>t.properties.z?-1:e.properties.z<t.properties.z?1:0}))},SceneManager.prototype.__getSceneMap=function __getSceneMap(e){return this._ownerSceneMap[e.gid]?this._ownerSceneMap[e.gid]:this._ownerSceneMap[e.gid]={}},SceneManager.prototype.setMainScene=function setMainScene(e){if(e){if(e instanceof i.Scene)this._mainScene.next(e);else if(e.prototype instanceof i.Scene){var t=s.Component.getComponentsByClass(e);if(t&&1===t.length){var n=t[0];this._mainScene.value!==n&&this._mainScene.next(n)}}}else void 0!==this._mainScene.value&&this._mainScene.next(void 0)},SceneManager.prototype.activateScene=function activateScene(e){if(e&&e.prototype instanceof i.Scene){var t=s.Component.getComponentsByClass(e);t&&1===t.length&&(!0!==t[0]._isSubscribeExtFlowEnabled.value&&t[0]._resumeSubscribeExtFlow(),t[0]._activate())}},SceneManager.prototype.deactivateScene=function deactivateScene(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.prototype instanceof i.Scene){var n=s.Component.getComponentsByClass(e);n&&1===n.length&&(n[0]._deactivate(),!0===t&&n[0]._pauseSubscribeExtFlow())}},SceneManager.prototype._dispose=function _dispose(){for(var e in this._ownerSceneMap){var n=this._ownerSceneMap[e];for(var o in n){var r=n[o];r&&r.dispose()}}t.prototype._dispose.call(this)},SceneManager.prototype.dispose=function dispose(){t.prototype.dispose.call(this)},SceneManager.prototype._destroy=function _destroy(){this._mainScene=null,this._ownerSceneMap=null,this._onSceneDestroyed=null,this._onSceneCreated=null,t.prototype._destroy.call(this)},e.createClass(SceneManager,[{key:"onSceneCreated",get:function get(){return this._onSceneCreated.asObservable()}},{key:"onSceneDestroyed",get:function get(){return this._onSceneDestroyed.asObservable()}},{key:"mainScene",get:function get(){return this._mainScene}}]),SceneManager}(s.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.GameWorkflow=void 0;var a=n(1),c=e.interopRequireDefault(a),u=n(2),l=n(17),p=n(36),d=n(78),f=n(79),h=n(80),m=n(142),g=n(44),_=n(24);function _applyDecoratedDescriptor(e,t,n,o,r){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}t.GameWorkflow=(o=(0,g.MessageBinding)(d.ShowSceneMessage),r=(0,g.MessageBinding)(f.HideSceneMessage),i=(0,g.MessageBinding)(m.DestroySceneMessage),_applyDecoratedDescriptor((s=function(t){function GameWorkflow(n,o){if(e.classCallCheck(this,GameWorkflow),!(n instanceof p.Game))throw new Error("Owner must be of class type 'Game'.");var r=e.possibleConstructorReturn(this,t.call(this,n,o));return r._game=n,r._sceneManager=n.sceneManager,r}return e.inherits(GameWorkflow,t),GameWorkflow.prototype._init=function _init(){var e=this;t.prototype._init.call(this),this._autoDisposeSceneMap={},this._hideVProgress=new c.default.BehaviorSubject(!1),u.Component.onComponentRemove.filter((function(t){return e._autoDisposeSceneMap&&e._autoDisposeSceneMap.hasOwnProperty(t.className)})).switchMap((function(t){var n=Object.values(e._autoDisposeSceneMap[t.className]);return n.length>0?c.default.Observable.from(n).concatMap((function(t){return e.waitForSceneDestroyed(e.destroyScene(t))})).toArray().mapTo(t):c.default.Observable.of(t)})).subscribeExt(this,(function(t){delete e._autoDisposeSceneMap[t.className]}))},GameWorkflow.prototype._destroy=function _destroy(){this._autoDisposeSceneMap=null,this._hideVProgress=null,this._sceneManager=null,this._game=null,t.prototype._destroy.call(this)},GameWorkflow.prototype._bind=function _bind(){var e=this;t.prototype._bind.call(this),this._hideVProgress.filter((function(e){return!0===e})).take(1).subscribeExt(this,(function(){window.__engineStart&&(window.__engineStart(),window.__engineStart=null),e.ownerGame.gameLoadingProgressObs.filter((function(e){return 100===e})).take(1).delay(1).do((function(){system.scene.enableSpatialHashAfterInitialLoad(),system.scene.update(),e._game.updateUnsafeAreaFillers()})).switchMap((function(){return null!=e.ownerGame.initialSlotIdleMessageReceivedObs?e.ownerGame.initialSlotIdleMessageReceivedObs.filter((function(e){return e})).take(1):c.default.Observable.NULL})).do((function(){e.sendMessage(new h.ResumingRenderAfterBootMessage(e)),_.RenderIO.resumeAfterInitialLoad()})).switchMap((function(){return e.ownerGame.postPreloadSplashGateObs.filter((function(e){return e})).take(1)})).switchMap((function(){return system.timeProvider.ticker.skip(1).take(1)})).switchMap((function(){return c.default.Observable.create((function(e){window.__gamePreloader.triggerWait((function(){e.next(1),e.complete()}))}))})).subscribeExt(e,e._onGameReady.bind(e))}))},GameWorkflow.prototype._onGameReady=function _onGameReady(){if(null!=window.vLoadCallback.toString().replace(/^\s*function\s*\([^\{]*\)\s*\{\s*/,"").replace(/\bfunction\b[\s\S]*$/,"").match(/setInterval/)){var e=window.setInterval;window.setInterval=function(t,n){return window.setInterval=e,e=null,window.setInterval(t,16.6666)}}window.vLoadCallback(window.vLoadCallbackObj)},GameWorkflow.prototype.__showSceneMessage=function __showSceneMessage(e){this.showScene(e.SceneClass,e.zOrder)},GameWorkflow.prototype.__hideSceneMessage=function __hideSceneMessage(e){this.hideScene(e.SceneClass)},GameWorkflow.prototype.__destroySceneMessage=function __destroySceneMessage(e){this.destroyScene(e.SceneClass)},GameWorkflow.prototype.createScene=function createScene(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.game.createScene(e,t),r=this._sceneManager.mainScene.value;if(n&&r){var i=this._autoDisposeSceneMap[r.className]=this._autoDisposeSceneMap[r.className]||{};i[o.className]=o}return o},GameWorkflow.prototype.showScene=function showScene(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=this.getScene(t);if(i&&Object.assign(i.properties,n),i||!0!==r||(i=this.game.createScene(t,e.extends({},n,{visible:!1}),o)),i)return u.Component.waitForCreated(i).subscribe((function(){i.show()})),i;throw Error("Unable to show scene. No instance found.")},GameWorkflow.prototype.showMainSceneAsync=function showMainSceneAsync(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.waitForMainSceneDestroy().switchMap((function(){return u.Component.waitForCreated(t.game.createScene(e,n))})).do((function(e){return t._sceneManager.setMainScene(e)}))},GameWorkflow.prototype.hideScene=function hideScene(e){var t=this.getScene(e);return t&&t.hide(),t},GameWorkflow.prototype.getScene=function getScene(e){return this.game.getScene(e)},GameWorkflow.prototype.destroyScene=function destroyScene(e){return this.game.destroyScene(e)},GameWorkflow.prototype.activateScene=function activateScene(e){var t=this;this._hideVProgress.filter((function(e){return!0===e})).first().subscribe((function(){t._sceneManager.activateScene(e)}))},GameWorkflow.prototype.deactivateScene=function deactivateScene(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._sceneManager.deactivateScene(e,t)},GameWorkflow.prototype.hideVProgressScene=function hideVProgressScene(){this._hideVProgress.next(!0)},GameWorkflow.prototype.waitForMainSceneDestroy=function waitForMainSceneDestroy(){var e=this._sceneManager.mainScene.value;return null!=e?this.waitForSceneDestroyed(e):c.default.Observable.UNDEFINED},GameWorkflow.prototype.waitForMainSceneNotBusy=function waitForMainSceneNotBusy(){var e=this._sceneManager.mainScene.value;return null!=e?e._isBusy.filter((function(e){return!1===e})).first():c.default.Observable.UNDEFINED},GameWorkflow.prototype.waitForSceneNotBusy=function waitForSceneNotBusy(e){var t=this.getScene(e);return null!=t?t._isBusy.filter((function(e){return!1===e})).first():c.default.Observable.UNDEFINED},GameWorkflow.prototype.waitForSceneCreated=function waitForSceneCreated(e){var t=this.getScene(e);return null!=t?u.Component.waitForCreated(t):c.default.Observable.UNDEFINED},GameWorkflow.prototype.waitForSceneDestroyed=function waitForSceneDestroyed(e){var t=this.getScene(e);return null!=t?u.Component.waitForDestroyed(t):c.default.Observable.UNDEFINED},GameWorkflow.prototype.waitForSceneShowing=function waitForSceneShowing(e){var t=this.getScene(e);return null!=t?l.Scene.waitForShowing(t):c.default.Observable.UNDEFINED},GameWorkflow.prototype.waitForSceneHidden=function waitForSceneHidden(e){var t=this.getScene(e);return null!=t?l.Scene.waitForHidden(t):c.default.Observable.UNDEFINED},e.createClass(GameWorkflow,[{key:"game",get:function get(){return this._game}}]),GameWorkflow}(u.Component)).prototype,"__showSceneMessage",[o],Object.getOwnPropertyDescriptor(s.prototype,"__showSceneMessage"),s.prototype),_applyDecoratedDescriptor(s.prototype,"__hideSceneMessage",[r],Object.getOwnPropertyDescriptor(s.prototype,"__hideSceneMessage"),s.prototype),_applyDecoratedDescriptor(s.prototype,"__destroySceneMessage",[i],Object.getOwnPropertyDescriptor(s.prototype,"__destroySceneMessage"),s.prototype),s)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.DestroySceneMessage=void 0;var o=n(37);t.DestroySceneMessage=function(t){function DestroySceneMessage(){return e.classCallCheck(this,DestroySceneMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(DestroySceneMessage,t),DestroySceneMessage}(o.BaseSceneMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneWorkflow=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(2),s=n(17);t.SceneWorkflow=function(t){function SceneWorkflow(n,o){if(e.classCallCheck(this,SceneWorkflow),!(n instanceof s.Scene))throw new Error("Owner must be of class type 'Scene'.");var r=e.possibleConstructorReturn(this,t.call(this,n,o));return r._scene=n,r._sceneManager=n.sceneManager,r}return e.inherits(SceneWorkflow,t),SceneWorkflow.prototype._destroy=function _destroy(){this._sceneManager=null,this._scene=null,t.prototype._destroy.call(this)},SceneWorkflow.prototype.createSubScene=function createSubScene(e,t){return this.scene.createSubScene(e,t)},SceneWorkflow.prototype.showSubScene=function showSubScene(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.getSubScene(e);if(o||!0!==n||(o=this.game.createScene(SceneClass,t)),o)return o.show(),o;throw Error("Unable to show sub-scene. No instance found. ")},SceneWorkflow.prototype.hideSubScene=function hideSubScene(e){var t=this.scene.getSubScene(e);return t&&t.hide(),t},SceneWorkflow.prototype.getSubScene=function getSubScene(e){return this.scene.getSubScene(e)},SceneWorkflow.prototype.destroySubScene=function destroySubScene(e){return this.scene.destroySubScene(e)},SceneWorkflow.prototype.waitForSubSceneCreated=function waitForSubSceneCreated(e){var t=this.getSubScene(e);return null!=t?i.Component.waitForCreated(t):r.default.Observable.UNDEFINED},SceneWorkflow.prototype.waitForSubSceneDestroyed=function waitForSubSceneDestroyed(e){var t=this.getSubScene(e);return null!=t?i.Component.waitForDestroyed(t):r.default.Observable.UNDEFINED},SceneWorkflow.prototype.waitForSubSceneShowing=function waitForSubSceneShowing(e){var t=this.getSubScene(e);return null!=t?s.Scene.waitForShowing(t):r.default.Observable.UNDEFINED},SceneWorkflow.prototype.waitForSubSceneHidden=function waitForSubSceneHidden(e){var t=this.getSubScene(e);return null!=t?s.Scene.waitForHidden(t):r.default.Observable.UNDEFINED},e.createClass(SceneWorkflow,[{key:"scene",get:function get(){return this._scene}}]),SceneWorkflow}(i.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.StorageIO=function(){function StorageIO(){e.classCallCheck(this,StorageIO)}return StorageIO.getValue=function getValue(e){return system.storage.getValue(e)},StorageIO.setValue=function setValue(e,t){return system.storage.setValue(e,t)},StorageIO.removeValue=function removeValue(e){return system.storage.removeValue(e)},StorageIO.clearAllValues=function clearAllValues(){return system.storage.clearAllValues()},StorageIO.getAllValues=function getAllValues(){return system.storage.getAllValues()},StorageIO}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Repository=void 0;var o=n(2),r=n(81);t.Repository=function(t){function Repository(){return e.classCallCheck(this,Repository),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Repository,t),e.createClass(Repository,null,[{key:"Message",get:function get(){return r.RepositoryMessage}}]),Repository}(o.Component)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableModel=void 0;var o=n(2);t.ObservableModel=function(t){function ObservableModel(n,o,r,i){e.classCallCheck(this,ObservableModel);var s=e.possibleConstructorReturn(this,t.call(this,n,o,r));return s._initialValue=i,s}return e.inherits(ObservableModel,t),ObservableModel.prototype.setModel=function setModel(t){var n=this.__getStore();if(n)return n.getModel(this).next(e.extends({},this._initialValue,t))},ObservableModel.getSources=function getSources(){},ObservableModel.prototype._build=function _build(){},ObservableModel.prototype._transform=function _transform(){},ObservableModel.prototype._destroy=function _destroy(){this._initialValue=null;var e=this.__getStore();e&&e.remove(this),t.prototype._destroy.call(this)},ObservableModel}(o.Component)}).call(this,n(0))},function(e,t){Object.observe||function(e,t,n,o){"use strict";var r,i,s,a,c,u,l=["add","update","delete","reconfigure","setPrototype","preventExtensions"],p=t.isArray||(u=e.prototype.toString,function(e){return"[object Array]"===u.call(e)}),d=t.prototype.indexOf?t.indexOf||function(e,n,o){return t.prototype.indexOf.call(e,n,o)}:function(e,t,n){for(var o=n||0;o<e.length;o++)if(e[o]===t)return o;return-1},f=void 0!==n.Map&&Map.prototype.forEach?function(){return new Map}:function(){var e=[],t=[];return{size:0,has:function(t){return d(e,t)>-1},get:function(n){return t[d(e,n)]},set:function(n,o){var r=d(e,n);-1===r?(e.push(n),t.push(o),this.size++):t[r]=o},delete:function(n){var o=d(e,n);o>-1&&(e.splice(o,1),t.splice(o,1),this.size--)},forEach:function(n){for(var o=0;o<e.length;o++)n.call(arguments[1],t[o],e[o],this)}}},h=e.getOwnPropertyNames?function(){var t=e.getOwnPropertyNames;try{arguments.callee}catch(o){var n=(t(d).join(" ")+" ").replace(/prototype |length |name /g,"").slice(0,-1).split(" ");n.length&&(t=function(t){var o=e.getOwnPropertyNames(t);if("function"==typeof t)for(var r,i=0;i<n.length;)(r=d(o,n[i++]))>-1&&o.splice(r,1);return o})}return t}():function(t){var n,o,r=[];if("hasOwnProperty"in t)for(n in t)t.hasOwnProperty(n)&&r.push(n);else for(n in o=e.hasOwnProperty,t)o.call(t,n)&&r.push(n);return p(t)&&r.push("length"),r},m=e.getPrototypeOf,g=e.defineProperties&&e.getOwnPropertyDescriptor,_=n.requestAnimationFrame||n.webkitRequestAnimationFrame||(c=+new Date,function(e){return setTimeout((function(){e(+new Date-c)}),17)}),createObjectData=function(t,n){var o,i=h(t),s=[],a=0;n={handlers:f(),frozen:!!e.isFrozen&&e.isFrozen(t),extensible:!e.isExtensible||e.isExtensible(t),proto:m&&m(t),properties:i,values:s,notifier:retrieveNotifier(t,n)};if(g)for(o=n.descriptors=[];a<i.length;)o[a]=g(t,i[a]),s[a]=t[i[a++]];else for(;a<i.length;)s[a]=t[i[a++]];return r.set(t,n),n},y=(s=g?function(e,t,n,o,r){var i=t.properties[n],s=e[i],a=t.values[n],c=t.descriptors[n];"value"in r&&(a===s?0===a&&1/a!=1/s:a==a||s==s)&&(addChangeRecord(e,t,{name:i,type:"update",object:e,oldValue:a},o),t.values[n]=s),!c.configurable||r.configurable&&r.writable===c.writable&&r.enumerable===c.enumerable&&r.get===c.get&&r.set===c.set||(addChangeRecord(e,t,{name:i,type:"reconfigure",object:e,oldValue:a},o),t.descriptors[n]=r)}:function(e,t,n,o){var r=t.properties[n],i=e[r],s=t.values[n];(s===i?0===s&&1/s!=1/i:s==s||i==i)&&(addChangeRecord(e,t,{name:r,type:"update",object:e,oldValue:s},o),t.values[n]=i)},a=g?function(e,t,n,o,r){for(var i,a=t.length;n&&a--;)null!==t[a]&&(n--,(i=g(e,t[a]))?s(e,o,a,r,i):(addChangeRecord(e,o,{name:t[a],type:"delete",object:e,oldValue:o.values[a]},r),o.properties.splice(a,1),o.values.splice(a,1),o.descriptors.splice(a,1)))}:function(e,t,n,o,r){for(var i=t.length;n&&i--;)null!==t[i]&&(addChangeRecord(e,o,{name:t[i],type:"delete",object:e,oldValue:o.values[i]},r),o.properties.splice(i,1),o.values.splice(i,1),n--)},function(t,n,o){if(t.handlers.size&&!t.frozen){var r,i,c,u,l,p,f,_,y=t.values,b=t.descriptors,v=0;if(t.extensible)if(i=(r=t.properties.slice()).length,c=h(n),b){for(;v<c.length;)l=c[v++],u=d(r,l),_=g(n,l),-1===u?(addChangeRecord(n,t,{name:l,type:"add",object:n},o),t.properties.push(l),y.push(n[l]),b.push(_)):(r[u]=null,i--,s(n,t,u,o,_));a(n,r,i,t,o),e.isExtensible(n)||(t.extensible=!1,addChangeRecord(n,t,{type:"preventExtensions",object:n},o),t.frozen=e.isFrozen(n))}else{for(;v<c.length;)l=c[v++],u=d(r,l),p=n[l],-1===u?(addChangeRecord(n,t,{name:l,type:"add",object:n},o),t.properties.push(l),y.push(p)):(r[u]=null,i--,s(n,t,u,o));a(n,r,i,t,o)}else if(!t.frozen){for(;v<r.length;v++)l=r[v],s(n,t,v,o,g(n,l));e.isFrozen(n)&&(t.frozen=!0)}m&&(f=m(n))!==t.proto&&(addChangeRecord(n,t,{type:"setPrototype",name:"__proto__",object:n,oldValue:t.proto}),t.proto=f)}}),runGlobalLoop=function(){r.size&&(r.forEach(y),i.forEach(deliverHandlerRecords),_(runGlobalLoop))},deliverHandlerRecords=function(e,t){var n=e.changeRecords;n.length&&(e.changeRecords=[],t(n))},retrieveNotifier=function(e,t){return arguments.length<2&&(t=r.get(e)),t&&t.notifier||{notify:function(t){t.type;var n=r.get(e);if(n){var o,i={object:e};for(o in t)"object"!==o&&(i[o]=t[o]);addChangeRecord(e,n,i)}},performChange:function(t,n){if("string"!=typeof t)throw new TypeError("Invalid non-string changeType");if("function"!=typeof n)throw new TypeError("Cannot perform non-function");var o,i,s=r.get(e),a=arguments[2],c=void 0===a?n():n.call(a);if(s&&y(s,e,t),s&&c&&"object"==typeof c){for(o in i={object:e,type:t},c)"object"!==o&&"type"!==o&&(i[o]=c[o]);addChangeRecord(e,s,i)}}}},setHandler=function(e,t,n,o){var r=i.get(n);r||i.set(n,r={observed:f(),changeRecords:[]}),r.observed.set(e,{acceptList:o.slice(),data:t}),t.handlers.set(n,r)},addChangeRecord=function(e,t,n,o){t.handlers.forEach((function(t){var r=t.observed.get(e).acceptList;("string"!=typeof o||-1===d(r,o))&&d(r,n.type)>-1&&t.changeRecords.push(n)}))};r=f(),i=f(),e.observe=function observe(t,n,o){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object.observe cannot observe non-object");if("function"!=typeof n)throw new TypeError("Object.observe cannot deliver to non-function");if(e.isFrozen&&e.isFrozen(n))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(void 0===o)o=l;else if(!o||"object"!=typeof o)throw new TypeError("Third argument to Object.observe must be an array of strings.");return function(e,t,n){var o=r.get(e);o?(y(o,e),setHandler(e,o,t,n)):(o=createObjectData(e),setHandler(e,o,t,n),1===r.size&&_(runGlobalLoop))}(t,n,o),t},e.unobserve=function unobserve(e,t){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!=typeof t)throw new TypeError("Object.unobserve cannot deliver to non-function");var n,o=i.get(t);return o&&(n=o.observed.get(e))&&(o.observed.forEach((function(e,t){y(e.data,t)})),_((function(){deliverHandlerRecords(o,t)})),1===o.observed.size&&o.observed.has(e)?i.delete(t):o.observed.delete(e),1===n.data.handlers.size?r.delete(e):n.data.handlers.delete(t)),e},e.getNotifier=function getNotifier(t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return e.isFrozen&&e.isFrozen(t)?null:retrieveNotifier(t)},e.deliverChangeRecords=function deliverChangeRecords(e){if("function"!=typeof e)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var t=i.get(e);t&&(t.observed.forEach((function(e,t){y(e.data,t)})),deliverHandlerRecords(t,e))}}(Object,Array,this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFormat=convertFormat;var o=n(82);function convertFormat(e){var t=!1,n=Array.from(e).map((function(e){switch(e){case"[":return t=!0,"'";case"]":return t=!1,"'";default:if(t)return e.toString();switch(e){case"M":return"m";case"m":return"M";case"D":return"d";case"Y":return"y";default:return e.toString()}}})).join("");return n.includes("UTC Z")?"UTC:"+n.replace(" UTC Z"," Z"):n}"undefined"==typeof moment&&(window.moment=function(e){return e=e||Date.now(),{format:function format(t){return function formatDate(e,t){var n=convertFormat(t);return o(e,n)}(e,t)}}})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.XMan=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(150),s=n(151),a=n(156),c=n(158),u=n(159),l=n(160),p=n(161),d=n(162),f=n(163),h=n(164),m=n(165),g=n(166),_=n(167),y=n(168),b=n(169),v=n(170),C=n(171),S=n(172),M=n(173),O=n(174);t.XMan=function(t){function XMan(){return e.classCallCheck(this,XMan),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(XMan,t),XMan.prototype.getBalance=function getBalance(){var e=this;return r.default.Observable.create((function(t){var n=e._getBalance.first().subscribe(t);return e._getBalance.next(),n}))},XMan.prototype.playerInfo=function playerInfo(){var e=this;return r.default.Observable.create((function(t){var n=e._playerInfoCommand.first().subscribe(t);return e._playerInfoCommand.next(),n}))},XMan.prototype.ping=function ping(){var e=this;return r.default.Observable.create((function(t){var n=e._pingCommand.first().subscribe(t);return e._pingCommand.next(),n}))},XMan.prototype.configurations=function configurations(e){var t=this;return r.default.Observable.create((function(n){var o=t._configurationsCommand.first().subscribe(n);return t._configurationsCommand.next(e),o}))},XMan.prototype.freeGames=function freeGames(){var e=this;return r.default.Observable.create((function(t){var n=e._freeGamesCommand.first().subscribe(t);return e._freeGamesCommand.next(),n}))},XMan.prototype.refresh=function refresh(e){var t=this;return r.default.Observable.create((function(n){var o=t._refreshCommand.first().subscribe(n);return t._refreshCommand.next(e),o}))},XMan.prototype.singleSignOn=function singleSignOn(e,t){var n=this;return r.default.Observable.create((function(o){var r=n._singleSignOnCommand.first().subscribe(o);return n._singleSignOnCommand.next({pracUsername:e,pracPassword:t}),r}))},XMan.prototype.spin=function spin(e){var t=this;return r.default.Observable.create((function(n){var o=t._spinCommand.first().subscribe(n);return t._spinCommand.next(e),o}))},XMan.prototype.respin=function respin(e){var t=this;return r.default.Observable.create((function(n){var o=t._respinCommand.first().subscribe(n);return t._respinCommand.next({reelId:e}),o}))},XMan.prototype.freeSpin=function freeSpin(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return r.default.Observable.create((function(o){var r=e._freeSpinCommand.first().subscribe(o);return e._freeSpinCommand.next({jackpotNumbers:t,gamePayIds:n}),r}))},XMan.prototype.bonusPick=function bonusPick(e){var t=this;return r.default.Observable.create((function(n){var o=t._bonusPickCommand.first().subscribe(n);return e=null!=e.item?e:{item:e},t._bonusPickCommand.next(e),o}))},XMan.prototype.selection=function selection(e){var t=this;return r.default.Observable.create((function(n){var o=t._selectionCommand.first().subscribe(n);return t._selectionCommand.next({item:e}),o}))},XMan.prototype.rejectFreeGame=function rejectFreeGame(e,t){var n=this;return r.default.Observable.create((function(o){var r=n._freeGamesRejectCommand.first().subscribe(o);return n._freeGamesRejectCommand.next({offerId:e,instanceId:t}),r}))},XMan.prototype.gamble=function gamble(e,t){var n=this;return r.default.Observable.create((function(o){var r=n._gambleCommand.first().subscribe(o);return n._gambleCommand.next({type:e,segment:t}),r}))},XMan.prototype.gambleBank=function gambleBank(){var e=this;return r.default.Observable.create((function(t){var n=e._gambleBankCommand.first().subscribe(t);return e._gambleBankCommand.next(),n}))},XMan.prototype.gambleCollect=function gambleCollect(){var e=this;return r.default.Observable.create((function(t){var n=e._gambleCollectCommand.first().subscribe(t);return e._gambleCollectCommand.next(),n}))},XMan.prototype.getProgInfo=function getProgInfo(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return r.default.Observable.create((function(n){var o=e._getProgInfoCommand.first().subscribe(n);return e._getProgInfoCommand.next({jackpots:t}),o}))},XMan.prototype.buyFeature=function buyFeature(e){var t=this,n=e.chipSize,o=e.numChips,i=e.selectedBuyOption;return r.default.Observable.create((function(e){var r=t._buyFeatureCommand.first().subscribe(e);return t._buyFeatureCommand.next({chipSize:n,numChips:o,selectedBuyOption:i}),r}))},XMan.prototype._init=function _init(e){t.prototype._init.call(this,e),this._commsIO=new s.CommsVIO,this.onError=this._commsIO.filter((function(e){return e.Id&&"Error"===e.Id.verb})).map((function(e){return e.response})),this._getBalance=this.createCommand(a.GetBalanceCommand,this._commsIO),this._playerInfoCommand=this.createCommand(c.PlayerInfoCommand,this._commsIO),this._configurationsCommand=this.createCommand(u.ConfigurationsCommand,this._commsIO),this._freeGamesCommand=this.createCommand(l.FreeGamesCommand,this._commsIO),this._refreshCommand=this.createCommand(p.RefreshCommand,this._commsIO),this._singleSignOnCommand=this.createCommand(d.SingleSignOnCommand,this._commsIO),this._spinCommand=this.createCommand(f.SpinCommand,this._commsIO),this._respinCommand=this.createCommand(h.RespinCommand,this._commsIO),this._freeSpinCommand=this.createCommand(m.FreeSpinCommand,this._commsIO),this._bonusPickCommand=this.createCommand(g.BonusPickCommand,this._commsIO),this._selectionCommand=this.createCommand(_.SelectionCommand,this._commsIO),this._freeGamesRejectCommand=this.createCommand(y.FreeGamesRejectCommand,this._commsIO),this._gambleCommand=this.createCommand(v.GambleCommand,this._commsIO),this._gambleBankCommand=this.createCommand(C.GambleBankCommand,this._commsIO),this._gambleCollectCommand=this.createCommand(S.GambleCollectCommand,this._commsIO),this._pingCommand=this.createCommand(b.PingCommand,this._commsIO),this._getProgInfoCommand=this.createCommand(M.GetProgInfoCommand,this._commsIO),this._buyFeatureCommand=this.createCommand(O.BuyFeatureCommand,this._commsIO)},XMan.prototype._destroy=function _destroy(){this._getBalance=null,this._playerInfoCommand=null,this._refreshCommand=null,this._singleSignOnCommand=null,this._spinCommand=null,this._respinCommand=null,this._freeSpinCommand=null,this._freeGamesRejectCommand=null,this._gambleCommand=null,this._gambleBankCommand=null,this._gambleCollectCommand=null,this._bonusPickCommand=null,this._pingCommand=null,this._getProgInfoCommand=null,this._commsIO.dispose(),this._commsIO=null,t.prototype._destroy.call(this)},XMan}(i.Comms)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Comms=void 0;var o=n(13);t.Comms=function(t){function Comms(){return e.classCallCheck(this,Comms),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Comms,t),Comms.prototype.createCommand=function createCommand(e,t){var n=new e(t);return this._commands.push(n),n},Comms.prototype._init=function _init(e){t.prototype._init.call(this,e),this._commands=[]},Comms.prototype._destroy=function _destroy(){var e=!0,n=!1,o=void 0;try{for(var r,i=this._commands[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.dispose()}}catch(e){n=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(n)throw o}}this._commands=null,t.prototype._destroy.call(this)},Comms}(o.Singleton)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.CommsVIO=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(19),s=n(42),a=n(152);t.CommsVIO=function(t){function CommsVIO(){e.classCallCheck(this,CommsVIO);var n=e.possibleConstructorReturn(this,t.call(this));if(n._casino=s.Casino.getInstance(),!1===n._casino.namespaceLoaded())throw new Error("Casino namespace not loaded.");return n._xmlToJson=new a.XMLToJson,n._requestSub=n._request.flatMap((function(e){return Object.exists(window.mgsConfig)&&Object.exists(window.mgsConfig.game)&&"AdvSlot"===e.command.verb&&(e.command.cid=window.mgsConfig.game.clientID,e.command.mid=window.mgsConfig.game.moduleID,e.command.sid=window.mgsConfig.game.casinoID),n._casino.createPacket(e).flatMap((function(t){if("string"!=typeof t&&["SDK","PURE_SDK"].includes(system.serviceType)){if(null==t.Response){var o={};Object.keys(t).forEach((function(e){o[e]=t[e],delete t[e]})),t.response={},t.attributes=o}else null==t.Response.Error&&null!=t.Response.GameData&&null!=t.Response.GameData["#text"]?t.response=JSON.parse(t.Response.GameData["#text"])||{}:t.response=t.Response;return"SDK"===system.serviceType?(null!=t.Response.PlayerInfo&&(t.response.playerInfo=t.Response.PlayerInfo.attributes),delete t.Response,t.Id=t.Id.attributes):"PURE_SDK"===system.serviceType&&(delete t.Response,t=n._removeAttributesProp(t)),r.default.Observable.of(t)}return r.default.Observable.create((function(o){var r=n._xmlToJson.map((function(e){return e.data})).map(CommsVIO.fromXManResponsePacket).filter((function(t){return n._casino.getHost().isViper()?null!==t:!!t&&e.command.mid===t.Id.mid&&e.command.cid===t.Id.cid})).subscribe(o);return n._xmlToJson.next(t),r}))})).first()})).subscribe((function(e){n._response.next(e)})),n}return e.inherits(CommsVIO,t),CommsVIO.prototype._removeAttributesProp=function _removeAttributesProp(e){var t=this;if(null==e)return null;delete e["#text"];var n=e.attributes;return e.attributes=null,delete e.attributes,Object.keys(e).forEach((function(n){e[n]=t._removeAttributesProp(e[n])})),null!=n&&Object.keys(n).forEach((function(t){return e[t]=n[t]})),e},CommsVIO.prototype.dispose=function dispose(){this._requestSub=null,this._casino=null,this._xmlToJson.dispose(),this._xmlToJson=null,t.prototype.dispose.call(this)},CommsVIO.fromXManResponsePacket=function fromXManResponsePacket(e){if(e&&e.Pkt)return{Id:{mid:Number(e.Pkt.Id.mid),cid:Number(e.Pkt.Id.cid),serverID:Number(e.Pkt.Id.sid),sessionid:e.Pkt.Id.sessionid,verb:e.Pkt.Id.verb,verbex:e.Pkt.Id.Inverb?e.Pkt.Id.Inverb:e.Pkt.Id.verb},response:e.Pkt.Response}},CommsVIO}(i.CommandObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.XMLToJson=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(19);t.XMLToJson=function(t){function XMLToJson(){e.classCallCheck(this,XMLToJson);var o=e.possibleConstructorReturn(this,t.call(this)),i=n(153),s=n(154).DOMParser;return o._requestSub=o._request.subscribe((function(t){if("string"==typeof t){var n=(new s).parseFromString(t),a=i.XmlToJson(n);r.default.Scheduler.playnextAsap.schedule((function(){o._response.next({data:a})}))}else"object"===(void 0===t?"undefined":e.typeof(t))&&r.default.Scheduler.playnextAsap.schedule((function(){o._response.next(t)}))})),o}return e.inherits(XMLToJson,t),XMLToJson.prototype.dispose=function dispose(){this._requestSub.unsubscribe(),this._requestSub=null,t.prototype.dispose.call(this)},XMLToJson}(i.CommandObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(t){var n=function(){function JsonXmlConverter(){t.classCallCheck(this,JsonXmlConverter)}return JsonXmlConverter.prototype.XmlToJson=function XmlToJson(e){var t={};if(1===e.nodeType){if(e.attributes.length>0)for(var n=0;n<e.attributes.length;n++){var o=e.attributes.item(n);t[o.nodeName]=o.nodeValue}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes.item(r),s=i.nodeName;if(void 0===t[s])t[s]=this.XmlToJson(i);else{if(void 0===t[s].push){var a=t[s];t[s]=[],t[s].push(a)}t[s].push(this.XmlToJson(i))}}return t},JsonXmlConverter.prototype.JsonToXml=function JsonToXml(e){var n="";for(var o in e)"object"===t.typeof(e[o])&&(n+="<"+o,n+=this.addAttributes(e[o],o));return n},JsonXmlConverter.prototype.addAttributes=function addAttributes(e,n){var o="",r=!1;for(var i in e)"object"!==t.typeof(e[i])?o+=" "+i.replace("_","")+"='"+e[i]+"'":r=!0;return r?o+">"+this.addObs(e)+"</"+n+">":o+"/>"},JsonXmlConverter.prototype.addObs=function addObs(e){var n="";for(var o in e)"object"===t.typeof(e[o])&&(n+="<"+o+this.addAttributes(e[o],o));return n},JsonXmlConverter}();e.exports=new n}).call(this,n(0))},function(e,t,n){function DOMParser(e){this.options=e||{locator:{}}}function DOMHandler(){this.cdata=!1}function position(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function _toString(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function appendElement(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}DOMParser.prototype.parseFromString=function(e,t){var n=this.options,r=new o,i=n.domBuilder||new DOMHandler,s=n.errorHandler,a=n.locator,c=n.xmlns||{},u={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&i.setDocumentLocator(a),r.errorHandler=function buildErrorHandler(e,t,n){if(!e){if(t instanceof DOMHandler)return t;e=t}var o={},r=e instanceof Function;function build(t){var i=e[t];!i&&r&&(i=2==e.length?function(n){e(t,n)}:e),o[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+function _locator(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(n))}||function(){}}return n=n||{},build("warning"),build("error"),build("fatalError"),o}(s,i,a),r.domBuilder=n.domBuilder||i,/\/x?html?$/.test(t)&&(u.nbsp=" ",u.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?r.parse(e,c,u):r.errorHandler.error("invalid doc source"),i.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new r).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,o){var r=this.doc,i=r.createElementNS(e,n||t),s=o.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var a=0;a<s;a++){e=o.getURI(a);var c=o.getValue(a),u=(n=o.getQName(a),r.createAttributeNS(e,n));this.locator&&position(o.getLocator(a),u),u.value=u.nodeValue=c,i.setAttributeNode(u)}},endElement:function(e,t,n){var o=this.currentElement;o.tagName;this.currentElement=o.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=_toString.apply(this,arguments)){if(this.cdata)var o=this.doc.createCDATASection(e);else o=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(o):/^\s*$/.test(e)&&this.doc.appendChild(o),this.locator&&position(this.locator,o)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=_toString.apply(this,arguments);var o=this.doc.createComment(e);this.locator&&position(this.locator,o),appendElement(this,o)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var o=this.doc.implementation;if(o&&o.createDocumentType){var r=o.createDocumentType(e,t,n);this.locator&&position(this.locator,r),appendElement(this,r)}},warning:function(e){},error:function(e){},fatalError:function(e){throw e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){DOMHandler.prototype[e]=function(){return null}}));var o=n(155).XMLReader,r=t.DOMImplementation=n(83).DOMImplementation;t.XMLSerializer=n(83).XMLSerializer,t.DOMParser=DOMParser},function(e,t){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+n.source+o.source+"*(?::"+n.source+o.source+"*)?$"),i=0,s=1,a=2,c=3,u=4,l=5,p=6,d=7;function XMLReader(){}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,n,o,r,f){for(var h,m=++t,g=i;;){var _=e.charAt(m);switch(_){case"=":if(g===s)h=e.slice(t,m),g=c;else{if(g!==a)throw new Error("attribute equal must after attrName");g=c}break;case"'":case'"':if(g===c||g===s){if(g===s&&(f.warning('attribute value must after "="'),h=e.slice(t,m)),t=m+1,!((m=e.indexOf(_,t))>0))throw new Error("attribute value no end '"+_+"' match");y=e.slice(t,m).replace(/&#?\w+;/g,r),n.add(h,y,t-1),g=l}else{if(g!=u)throw new Error('attribute value must after "="');y=e.slice(t,m).replace(/&#?\w+;/g,r),n.add(h,y,t),f.warning('attribute "'+h+'" missed start quot('+_+")!!"),t=m+1,g=l}break;case"/":switch(g){case i:n.setTagName(e.slice(t,m));case l:case p:case d:g=d,n.closed=!0;case u:case s:case a:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),g==i&&n.setTagName(e.slice(t,m)),m;case">":switch(g){case i:n.setTagName(e.slice(t,m));case l:case p:case d:break;case u:case s:"/"===(y=e.slice(t,m)).slice(-1)&&(n.closed=!0,y=y.slice(0,-1));case a:g===a&&(y=h),g==u?(f.warning('attribute "'+y+'" missed quot(")!!'),n.add(h,y.replace(/&#?\w+;/g,r),t)):("http://www.w3.org/1999/xhtml"===o[""]&&y.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+y+'" missed value!! "'+y+'" instead!!'),n.add(y,y,t));break;case c:throw new Error("attribute value missed!!")}return m;case"":_=" ";default:if(_<=" ")switch(g){case i:n.setTagName(e.slice(t,m)),g=p;break;case s:h=e.slice(t,m),g=a;break;case u:var y=e.slice(t,m).replace(/&#?\w+;/g,r);f.warning('attribute "'+y+'" missed quot(")!!'),n.add(h,y,t);case l:g=p}else switch(g){case a:n.tagName;"http://www.w3.org/1999/xhtml"===o[""]&&h.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+h+'" missed value!! "'+h+'" instead2!!'),n.add(h,h,t),t=m,g=s;break;case l:f.warning('attribute space is required"'+h+'"!!');case p:g=s,t=m;break;case c:g=u,t=m;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function appendElement(e,t,n){for(var o=e.tagName,r=null,i=e.length;i--;){var s=e[i],a=s.qName,c=s.value;if((d=a.indexOf(":"))>0)var u=s.prefix=a.slice(0,d),l=a.slice(d+1),p="xmlns"===u&&l;else l=a,u=null,p="xmlns"===a&&"";s.localName=l,!1!==p&&(null==r&&(r={},_copy(n,n={})),n[p]=r[p]=c,s.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,c))}for(i=e.length;i--;){(u=(s=e[i]).prefix)&&("xml"===u&&(s.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(s.uri=n[u||""]))}var d;(d=o.indexOf(":"))>0?(u=e.prefix=o.slice(0,d),l=e.localName=o.slice(d+1)):(u=null,l=e.localName=o);var f=e.uri=n[u||""];if(t.startElement(f,l,o,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,!0;if(t.endElement(f,l,o),r)for(u in r)t.endPrefixMapping(u)}function parseHtmlSpecialContent(e,t,n,o,r){if(/^(?:script|textarea)$/i.test(n)){var i=e.indexOf("</"+n+">",t),s=e.substring(t+1,i);if(/[&<]/.test(s))return/^script$/i.test(n)?(r.characters(s,0,s.length),i):(s=s.replace(/&#?\w+;/g,o),r.characters(s,0,s.length),i)}return t+1}function fixSelfClosed(e,t,n,o){var r=o[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),o[n]=r),r<t}function _copy(e,t){for(var n in e)t[n]=e[n]}function parseDCC(e,t,n,o){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(o.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var i=function split(e,t){var n,o=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=t,r.exec(e);for(;n=r.exec(e);)if(o.push(n),n[1])return o}(e,t),s=i.length;if(s>1&&/!doctype/i.test(i[0][0])){var a=i[1][0],c=s>3&&/^public$/i.test(i[2][0])&&i[3][0],u=s>4&&i[4][0],l=i[s-1];return n.startDTD(a,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function parseInstruction(e,t,n){var o=e.indexOf("?>",t);if(o){var r=e.substring(t,o).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),o+2}return-1}return-1}function ElementAttributes(e){}function _set_proto_(e,t){return e.__proto__=t,e}XMLReader.prototype={parse:function(e,t,n){var o=this.domBuilder;o.startDocument(),_copy(t,t={}),function parse(e,t,n,o,r){function entityReplacer(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function fixedFromCharCode(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function appendText(t){if(t>p){var n=e.substring(p,t).replace(/&#?\w+;/g,entityReplacer);c&&position(p),o.characters(n,0,t-p),p=t}}function position(t,n){for(;t>=s&&(n=a.exec(e));)i=n.index,s=i+n[0].length,c.lineNumber++;c.columnNumber=t-i+1}var i=0,s=0,a=/.*(?:\r\n?|\n)|.*$/g,c=o.locator,u=[{currentNSMap:t}],l={},p=0;for(;;){try{var d=e.indexOf("<",p);if(d<0){if(!e.substr(p).match(/^\s*$/)){var f=o.doc,h=f.createTextNode(e.substr(p));f.appendChild(h),o.currentElement=h}return}switch(d>p&&appendText(d),e.charAt(d+1)){case"/":var m=e.indexOf(">",d+3),g=e.substring(d+2,m),_=u.pop();m<0?(g=e.substring(d+2).replace(/[\s<].*/,""),r.error("end tag name: "+g+" is not complete:"+_.tagName),m=d+1+g.length):g.match(/\s</)&&(g=g.replace(/[\s<].*/,""),r.error("end tag name: "+g+" maybe not complete"),m=d+1+g.length);var y=_.localNSMap,b=_.tagName==g;if(b||_.tagName&&_.tagName.toLowerCase()==g.toLowerCase()){if(o.endElement(_.uri,_.localName,g),y)for(var v in y)o.endPrefixMapping(v);b||r.fatalError("end tag name: "+g+" is not match the current start tagName:"+_.tagName)}else u.push(_);m++;break;case"?":c&&position(d),m=parseInstruction(e,d,o);break;case"!":c&&position(d),m=parseDCC(e,d,o,r);break;default:c&&position(d);var C=new ElementAttributes,S=u[u.length-1].currentNSMap,M=(m=parseElementStartPart(e,d,C,S,entityReplacer,r),C.length);if(!C.closed&&fixSelfClosed(e,m,C.tagName,l)&&(C.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),c&&M){for(var O=copyLocator(c,{}),w=0;w<M;w++){var P=C[w];position(P.offset),P.locator=copyLocator(c,{})}o.locator=O,appendElement(C,o,S)&&u.push(C),o.locator=c}else appendElement(C,o,S)&&u.push(C);"http://www.w3.org/1999/xhtml"!==C.uri||C.closed?m++:m=parseHtmlSpecialContent(e,m,C.tagName,entityReplacer,o)}}catch(e){r.error("element parse error: "+e),m=-1}m>p?p=m:appendText(Math.max(d,p)+1)}}(e,t,n,o,this.errorHandler),o.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!r.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,n){if(!r.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function p(){}for(t in p.prototype=t,p=new p,e)p[t]=e[t];return p}),t.XMLReader=XMLReader},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GetBalanceCommand=void 0;var o=n(3);t.GetBalanceCommand=function(t){function GetBalanceCommand(){return e.classCallCheck(this,GetBalanceCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(GetBalanceCommand,t),GetBalanceCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"GetBalance",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},GetBalanceCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.CommsCommand=void 0;var o=n(19);t.CommsCommand=function(t){function CommsCommand(n){e.classCallCheck(this,CommsCommand);var o=e.possibleConstructorReturn(this,t.call(this));return o._commsIO=n,o}return e.inherits(CommsCommand,t),CommsCommand.prototype.dispose=function dispose(){this._commsIO=null},e.createClass(CommsCommand,[{key:"commsIO",get:function get(){return this._commsIO}}]),CommsCommand}(o.CommandObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerInfoCommand=void 0;var o=n(3);t.PlayerInfoCommand=function(t){function PlayerInfoCommand(){return e.classCallCheck(this,PlayerInfoCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(PlayerInfoCommand,t),PlayerInfoCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"PlayerInformationRequest",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},PlayerInfoCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationsCommand=void 0;var o=n(3);t.ConfigurationsCommand=function(t){function ConfigurationsCommand(){return e.classCallCheck(this,ConfigurationsCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(ConfigurationsCommand,t),ConfigurationsCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"Configurations",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},ConfigurationsCommand.prototype._requestToDto=function _requestToDto(e){return{command:this.commandInfo,data:e}},ConfigurationsCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.FreeGamesCommand=void 0;var o=n(3);t.FreeGamesCommand=function(t){function FreeGamesCommand(){return e.classCallCheck(this,FreeGamesCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(FreeGamesCommand,t),FreeGamesCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"FreeGames",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},FreeGamesCommand.prototype._toResponseDto=function _toResponseDto(e){var t=e.response;return t.Id=e.Id,t.gameResponse={offers:t.offers},delete t.offers,t},FreeGamesCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshCommand=void 0;var o=n(3);t.RefreshCommand=function(t){function RefreshCommand(){return e.classCallCheck(this,RefreshCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(RefreshCommand,t),RefreshCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"Refresh",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},RefreshCommand.prototype._requestToDto=function _requestToDto(e){return{command:this.commandInfo,data:e}},RefreshCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SingleSignOnCommand=void 0;var o=n(3);t.SingleSignOnCommand=function(t){function SingleSignOnCommand(){return e.classCallCheck(this,SingleSignOnCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SingleSignOnCommand,t),SingleSignOnCommand.prototype._requestToDto=function _requestToDto(e){return{command:this.commandInfo,data:{Credentials:{SSName:"",SSPass:"test",userType:"1",clientType:"40",langCode:""},OldCred:{RUN:"",RPWD:"",PUN:e.pracUsername?e.pracUsername:"",PPWD:e.pracPassword?e.pracPassword:""},FC:{ID1:"",IPAddress:"10.0.0.1",ID2:""}}}},SingleSignOnCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"SingleSignOn",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},SingleSignOnCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SpinCommand=void 0;var o=n(3);t.SpinCommand=function(t){function SpinCommand(){return e.classCallCheck(this,SpinCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SpinCommand,t),SpinCommand.prototype._requestToDto=function _requestToDto(e){if("SDK"===system.serviceType)return{command:this.commandInfo,balance:e.currentBalance,data:e};var t={command:this.commandInfo,balance:e.currentBalance,data:{chipSize:e.chipSize,numChips:e.numChips,activePaylines:String(e.activePaylines)}};return void 0!==e.jackpotNumbers&&null!==e.jackpotNumbers&&(t.data.jackpotNumbers=e.jackpotNumbers.join(",")),void 0!==e.gamePayIds&&null!==e.gamePayIds&&(t.data.gamePayIds=e.gamePayIds.join(",")),void 0!==e.freeGameOfferId&&null!==e.freeGameOfferId&&void 0!==e.freeGameInstanceId&&null!==e.freeGameInstanceId&&(t.data.offerId=e.freeGameOfferId,t.data.instanceId=e.freeGameInstanceId),e.reelSetChoiceId>-1&&(t.data.reelSetChoiceId=e.reelSetChoiceId),e.sideBetConstant>-1&&(t.data.sideBetConstant=e.sideBetConstant),t},SpinCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"Spin",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},SpinCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RespinCommand=void 0;var o=n(3);t.RespinCommand=function(t){function RespinCommand(){return e.classCallCheck(this,RespinCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(RespinCommand,t),RespinCommand.prototype._requestToDto=function _requestToDto(e){var t={command:this.commandInfo,data:{}};return void 0!==e.reelId&&null!==e.reelId&&(t.data.reelId=e.reelId),t},RespinCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"Respin",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},RespinCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.FreeSpinCommand=void 0;var o=n(3);t.FreeSpinCommand=function(t){function FreeSpinCommand(){return e.classCallCheck(this,FreeSpinCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(FreeSpinCommand,t),FreeSpinCommand.prototype._requestToDto=function _requestToDto(e){var t={command:this.commandInfo,data:{}};return void 0!==e.jackpotNumbers&&null!==e.jackpotNumbers&&(t.data.jackpotNumbers=e.jackpotNumbers.length>0?e.jackpotNumbers.join(","):e.jackpotNumbers),void 0!==e.gamePayIds&&null!==e.gamePayIds&&(t.data.gamePayIds=e.gamePayIds.length>0?e.gamePayIds.join(","):e.gamePayIds),t},FreeSpinCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"FreeSpin",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},FreeSpinCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.BonusPickCommand=void 0;var o=n(3);t.BonusPickCommand=function(t){function BonusPickCommand(){return e.classCallCheck(this,BonusPickCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(BonusPickCommand,t),BonusPickCommand.prototype._requestToDto=function _requestToDto(e){var t={command:this.commandInfo,data:{}};return void 0!==e.item&&null!==e.item&&(t.data.item=e.item),void 0!==e.jackpotNumbers&&null!==e.jackpotNumbers&&(t.data.jackpotNumbers=e.jackpotNumbers.join(",")),void 0!==e.gamePayIds&&null!==e.gamePayIds&&(t.data.gamePayIds=e.gamePayIds.join(",")),t},BonusPickCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"BonusPick",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},BonusPickCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionCommand=void 0;var o=n(3);t.SelectionCommand=function(t){function SelectionCommand(){return e.classCallCheck(this,SelectionCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SelectionCommand,t),SelectionCommand.prototype._requestToDto=function _requestToDto(e){var t={command:this.commandInfo,data:{}};return void 0!==e.item&&null!==e.item&&(t.data.item=e.item),t},SelectionCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"PlayerSelection",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},SelectionCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.FreeGamesRejectCommand=void 0;var o=n(3);t.FreeGamesRejectCommand=function(t){function FreeGamesRejectCommand(){return e.classCallCheck(this,FreeGamesRejectCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(FreeGamesRejectCommand,t),FreeGamesRejectCommand.prototype._requestToDto=function _requestToDto(e){return{command:this.commandInfo,data:{FreeGames:{FreeGame:{offerId:e.offerId,instanceId:e.instanceId}}}}},FreeGamesRejectCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"RejectFreeGames",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},FreeGamesRejectCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PingCommand=void 0;var o=n(3);t.PingCommand=function(t){function PingCommand(){return e.classCallCheck(this,PingCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(PingCommand,t),PingCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"Ping",verbex:"Ping",mid:0,cid:Game.instance.config.game.clientID}},PingCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GambleCommand=void 0;var o=n(3);t.GambleCommand=function(t){function GambleCommand(){return e.classCallCheck(this,GambleCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(GambleCommand,t),GambleCommand.prototype._requestToDto=function _requestToDto(e){var t={command:this.commandInfo,data:{}};return void 0!==e.segment&&null!==e.segment&&(t.data.segment=e.segment),void 0!==e.type&&null!==e.type&&(t.data.type=e.type),t},GambleCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"Gamble",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},GambleCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GambleBankCommand=void 0;var o=n(3);t.GambleBankCommand=function(t){function GambleBankCommand(){return e.classCallCheck(this,GambleBankCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(GambleBankCommand,t),GambleBankCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"GambleBank",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},GambleBankCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GambleCollectCommand=void 0;var o=n(3);t.GambleCollectCommand=function(t){function GambleCollectCommand(){return e.classCallCheck(this,GambleCollectCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(GambleCollectCommand,t),GambleCollectCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"Collect",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},GambleCollectCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GetProgInfoCommand=void 0;var o=n(3);t.GetProgInfoCommand=function(t){function GetProgInfoCommand(){return e.classCallCheck(this,GetProgInfoCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(GetProgInfoCommand,t),GetProgInfoCommand.prototype._requestToDto=function _requestToDto(e){var t={command:this.commandInfo,data:{}};return void 0!==e.jackpots&&null!==e.jackpots&&(t.data.jackpots=e.jackpots),t},GetProgInfoCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"AdvSlot",verbex:"GetProgInfo",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},GetProgInfoCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.BuyFeatureCommand=void 0;var o=n(3);t.BuyFeatureCommand=function(t){function BuyFeatureCommand(){return e.classCallCheck(this,BuyFeatureCommand),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(BuyFeatureCommand,t),BuyFeatureCommand.prototype._requestToDto=function _requestToDto(e){var t={command:this.commandInfo,data:{chipSize:e.chipSize,numChips:e.numChips}};return null!=e.selectedBuyOption&&(t.data.selectedBuyOption=e.selectedBuyOption),t},BuyFeatureCommand.prototype._getCommandInfo=function _getCommandInfo(){return{verb:"BuyFeature",verbex:"BuyFeature",mid:Game.instance.config.game.moduleID,cid:Game.instance.config.game.clientID}},BuyFeatureCommand}(o.XManCommand)}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FrameworkState={PLAYING_MAIN_GAME:0,GAMBLING:1,PLAYING_ACTIVE_BONUS:2,BONUS_COMPLETE:3,GAMBLE_COMPLETE:4,CHOOSING_BONUS:5,GAMBLING_AFTER_BONUS:6,BONUS_SUSPENDED:7},t.SlotState={NORMAL_SPINMODE:0,STARTING_FREESPIN_MODE:1,FREESPIN_MODE:2,FREESPIN_MODE_COMPLETE:3,STARTING_SUPERHOLD_MODE:4,SUPERHOLD_MODE:5,SUPERHOLD_MODE_COMPLETE:6,NUDGEMODE:7,HOLDMODE:8},t.BonusState={COLLECTING_TICKETS:0,STARTING_BONUS:1,PLAY_MODE:2,COMPLETE:3,GAMBLE_PLAY_MODE:4,GAMBLE_COMPLETE:5},t.BonusLevelState={NEVERPLAYED:0,STARTING:1,PLAYING:2,COMPLETE:3},t.PickedBy={GAME:0,PLAYER:1},t.TriggerWinType={FREE_SPIN_ADDER:"FreeSpinAdder",SYMBOLS_IN_POSITION:"SymbolsInPosition",EXTRA_WIN:"ExtraWin"},t.SlotBetMethod={ONE_COIN_PER_LINE:0,MULTIPLE_COINS_PER_LINE:1},t.FreeGameCreditType={CREDITS:0,BONUS:1}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ShowMessage=void 0;var o=n(9);t.ShowMessage=function(t){function ShowMessage(){return e.classCallCheck(this,ShowMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(ShowMessage,t),ShowMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.HideMessage=void 0;var o=n(9);t.HideMessage=function(t){function HideMessage(){return e.classCallCheck(this,HideMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(HideMessage,t),HideMessage}(o.BaseMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RichTextSprite=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(4),s=n(5),a=n(6),c=n(21),u=0,l=t.RichTextSprite=function(t){function RichTextSprite(n,o,i){e.classCallCheck(this,RichTextSprite);for(var s=arguments.length,a=Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];var u=e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,i].concat(a)));if(u.isTextureReadyObs=new r.default.BehaviorSubject(!1),!u.properties.texture){var l=i.resources.filter((function(e){return"texture"===e.propName}));u._textureIds=l.map((function(e){return e.propValue}))}return u}return e.inherits(RichTextSprite,t),RichTextSprite.prototype._getSceneObjectType=function _getSceneObjectType(e){return i.Control.SceneObjectType.SPRITE},RichTextSprite.prototype._bind=function _bind(){var n=this;if(this.properties.text&&""!==this.properties.text||(this.properties.texture=PIXI.Texture.WHITE,this._textureIds=null,this.isTextureReadyObs.next(!0)),this.properties.texture&&!this.properties.texture.isDummyTexture)this.isTextureReadyObs.next(!0);else{var o=this.assets([].concat(e.toConsumableArray(this._textureIds))),i=o.get();(Object.keys(i).find((function(e){return!i[e]}))?o.loadAndGet():r.default.Observable.of(i)).subscribeExt(this,(function(e){var t=n._generateTexture(e);n.properties.texture=t,n.properties.height=t.height,n.properties.width=t.width,n._textureIds=null,n.isTextureReadyObs.next(!0)}))}return t.prototype._bind.call(this)},RichTextSprite.prototype.dispose=function dispose(){this.properties.texture.destroy(),t.prototype.dispose.call(this)},RichTextSprite.prototype._generateTexture=function _generateTexture(t){var n=this.properties.defaultStyle,o=this.properties.interLineSpace,r=this.properties.customTags,i=this.properties.text.split("</br>"),s=[],a=i.map((function(o){var i=[];return o.split(/<i>|<\/i>/).filter((function(e){return""!==e})).forEach((function(o){if(o.indexOf("{")>-1){var s=o.split(/<([^>]+)>/gi).filter((function(e){return""!==e})),a=null;s.length>1&&(a=s.shift(),o=s[0]);var c=o.replace(/{|}/g,"").split(";"),u=c.shift(),l=new PIXI.Sprite(t[u]);if(c.forEach((function(t){var n=t.split(":"),o=e.slicedToArray(n,2),r=o[0],i=o[1];l[r]=i})),r[a]){var p=r[a];l.style=l.style||{},Object.keys(p).forEach((function(e){l.style[e]=p[e]}))}i.push(l)}else{for(var d=/\/[a-zA-Z]+/gi,f=o.split(/<([^>]+)>/gi).filter((function(e){return""!==e})),h=[],m=null,g="",_=f.length-1;_>=0;_--)if(m&&f[_]===m)!function(){var e=new PIXI.Text(g,n);if(r[m]){var t=r[m];Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}h.unshift(e),g="",m=null}();else if(f[_].match(d))m=f[_].replace("/","");else if(m)g=f[_]+g;else{var y=new PIXI.Text(f[_],n);h.unshift(y)}i.push.apply(i,h)}})),i})),c=Math.max.apply(Math,e.toConsumableArray(a.map((function(e){return e.map((function(e){return e.width})).reduce((function(e,t){return t+e}),0)}))));a.forEach((function(t,r){var i=Math.max.apply(Math,e.toConsumableArray(t.map((function(e){return e.height})))),u=t.map((function(e,t){var n=e.style&&e.style.leftPadding&&t>0?e.style.leftPadding:0,o=e.style&&e.style.rightPadding&&t<a.length-1?e.style.rightPadding:0;return e.width+n+o})).reduce((function(e,t){return t+e}),0),l=0;"center"===n.align?l=(c-u)/2:"right"===n.align&&(l=c-u),t.forEach((function(n,c){var u=n.style&&n.style.leftPadding?n.style.leftPadding:0,p=c>0&&t[c-1].style&&t[c-1].style.rightPadding?t[c-1].style.rightPadding:0,d=n.style&&n.style.topPadding?n.style.topPadding:0,f=r>0?Math.max.apply(Math,e.toConsumableArray(a[r-1].map((function(e){return e.style&&e.style.bottomPadding?e.style.bottomPadding:0})))):0,h=0;r>0&&(h=Math.max.apply(Math,e.toConsumableArray(a[r-1].map((function(e){return e.y+e.height}))))+o),n.x=0===c?Math.floor(l+u):Math.floor(t[c-1].width+t[c-1].x+p+u),n.y=Math.floor((i-n.height)/2+h+f+d),s.push(n)}))}));var u=new PIXI.Container;u.addChild.apply(u,s);var l=u.getLocalBounds().x,p=u.getLocalBounds().y;(l<0||p<0)&&u.children.forEach((function(e){e.x+=Math.abs(l),e.y+=Math.abs(p)}));var d=PIXI.currentRenderer.generateTexture(u);return s.forEach((function(e){return e.destroy()})),d},RichTextSprite.prototype._beforeReady=function _beforeReady(){var e=this;return r.default.ensureObservable(t.prototype._beforeReady.call(this)).switchMap((function(){return e.isTextureReadyObs.filter((function(e){return e})).take(1)}))},RichTextSprite.prototype._defineProperties=function _defineProperties(n){var o=this;t.prototype._defineProperties.call(this,n),n(e.extends({texture:{priority:1,type:s.DataType.texture,sceneObjectProperty:!0,get:function get(){return o._sceneObject.texture},set:function set(e){var t=o._sceneObject.texture;if(t!==e){if(null!=t&&"function"==typeof t.doAfterUse&&t.doAfterUse(o),null!=e&&"function"==typeof e.doBeforeUse&&e.doBeforeUse(o),o._sceneObject.texture=e,!0!==o.properties.matchTextureSize||null!=t&&null!=t.orig&&null!=e&&null!=e.orig&&t.width==e.width&&t.height==e.height)return;o.align(!0)}}},blendMode:{type:s.DataType.int(),sceneObjectProperty:!0,default:u,get:function get(){return o._sceneObject.blendMode},set:function set(e){o._sceneObject.blendMode=e}},filters:{type:s.DataType.array,sceneObjectProperty:!0,get:function get(){return o._sceneObject.filters},set:function set(e){o._sceneObject.filters=e}},matchTextureSize:{type:s.DataType.boolean,sceneObjectProperty:!0,default:!1,get:function get(){return o._sceneObject.matchTextureSize},set:function set(e){o._sceneObject.matchTextureSize=e}},customTags:{type:s.DataType.object,default:{},get:function get(){return o._customTags},set:function set(e){o._customTags=e}},defaultStyle:{type:s.DataType.object,default:{},get:function get(){return o._defaultStyle},set:function set(e){o._defaultStyle=e}},interLineSpace:{type:s.DataType.int,default:0,get:function get(){return o._interLineSpace},set:function set(e){o._interLineSpace=e}},text:{default:"",type:s.DataType.string,subProperty:!0,get:function get(){return o._textString},set:function set(e){o._textString=e}}},(0,c.TintPropertiesMixin)(this)))},RichTextSprite}(i.Control);a.MacawTypes.getInstance().registerType("RichTextSprite",l)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TilingSprite=void 0;var o=n(4),r=n(38),i=n(6),s=t.TilingSprite=function(t){function TilingSprite(){return e.classCallCheck(this,TilingSprite),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(TilingSprite,t),TilingSprite.prototype._getSceneObjectType=function _getSceneObjectType(e){return o.Control.SceneObjectType.TILINGSPRITE},TilingSprite}(r.Sprite);i.MacawTypes.getInstance().registerType("TilingSprite",s)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SpriteBatch=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(15),s=e.interopRequireWildcard(i),a=n(4),c=n(16),u=n(5),l=n(6),p=n(34),d=function _extractResourceValue(e,t){var n=void 0;for(n=0;n<e.length&&e[n].propName!==t;n++);return e[n].propValue},f=t.SpriteBatch=function(t){function SpriteBatch(n,o,r){e.classCallCheck(this,SpriteBatch);var i=e.possibleConstructorReturn(this,t.call(this,n,o,r));return i._props=r,i}return e.inherits(SpriteBatch,t),SpriteBatch.prototype._getSceneObjectType=function _getSceneObjectType(){return a.Control.SceneObjectType.CONTAINER},SpriteBatch.prototype._init=function _init(){var e=this;t.prototype._init.call(this);var n=[],o=this._props,r=void 0,i=void 0;if(this._sceneObjectsMap={},this._sceneObjects=[],this._controlNames=[],o.width=this.properties.width,o.height=this.properties.height,r=this._createView(),null!==o.sprites&&void 0!==o.sprites){var s=void 0,a=void 0;for(this._spritesInput={},i=0;i<o.sprites.length;i++)s=o.sprites[i].name,a=d(o.sprites[i].resources,"texture"),o.sprites[i].textureName=a,this._spritesInput[s]=o.sprites[i],n.push(a);r=r.flatMap((function(){return e.assets(n).loadAndGet()})).do(this._createSpriteSceneObjects.bind(this))}return r},SpriteBatch.prototype._createView=function _createView(){var e=this;return this._childrenData?s.Macaw.Builder.buildControl(this,this._childrenData).do((function(t){e._controlNames.push(t.id)})):r.default.Observable.FALSE},SpriteBatch.prototype._createSpriteSceneObjects=function _createSpriteSceneObjects(e){var t=void 0,n=void 0;for(var o in this._spritesInput)(n=this._spritesInput[o]).id=this._gid+".batch."+o,(t=e[n.textureName])&&delete n.textureName,this.addSpriteSceneObject(t,n,o)},SpriteBatch.prototype.addSpriteSceneObject=function addSpriteSceneObject(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return-1;t.texture=e,t.w=t.width,t.h=t.height,t.tiled&&(t.texture.type="TILING");var o=p.SceneIO.createObject(a.Control.SceneObjectType.SPRITE,t);if(!n){var r=o.id.split(".");n=r[r.length-1]||r[0]}return p.SceneIO.addObject(o,this._sceneObject),t.sceneObject=o,this._sceneObjects.push(o),this._sceneObjectsMap[n]=o,n},SpriteBatch.prototype.removeChildSceneObject=function removeChildSceneObject(e){this._sceneObjectsMap[e]&&(p.SceneIO.removeObject(this._sceneObjectsMap[0]),p.SceneIO.destroyObject(this._sceneObject[0]),this._sceneObjects.splice(this._sceneObjects.indexOf(this._sceneObjectsMap[e]),1),delete this._sceneObjectsMap[e])},SpriteBatch.prototype.childOnNext=function childOnNext(e,t){for(var n in t)this._sceneObjectsMap[e]&&void 0!==this._sceneObjectsMap[e][n]&&(this._sceneObjectsMap[e][n]=t[n]);this.update(e)},SpriteBatch.prototype.update=function update(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t.prototype.update.call(this),e&&this._sceneObjectsMap[e])p.SceneIO.modifyObject(this._sceneObjectsMap[e]);else if(this._sceneObjects&&this._sceneObjects.length>0){var n=void 0;for(n=0;n<this._sceneObjects.length;n++)p.SceneIO.modifyObject(this._sceneObjects[n])}},SpriteBatch.prototype.setSceneObjectLayout=function setSceneObjectLayout(e){if(this._view.subViews[e]){var t=this._sceneObjectsMap[e],n=c.Container.propsFromLayout(this._view.subViews[e]);0===n.width&&t.texture&&0===t.w?n.width=t.texture.width:0===n.width&&0!==t.w&&(n.width=t.w),0===n.height&&t.texture&&0===t.h?n.height=t.texture.height:0===n.height&&0!==t.h&&(n.height=t.h),t.w=n.width,t.h=n.height,t.x=n.x,t.y=n.y,t.z=n.z,this.update(e)}},SpriteBatch.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({childCount:{type:u.DataType.int(),get:function get(){return n._sceneObjects.length}}})},SpriteBatch.prototype._destroy=function _destroy(){for(;this._sceneObjects[0];)p.SceneIO.removeObject(this._sceneObjects[0]),p.SceneIO.destroyObject(this._sceneObjects[0]),this._sceneObjects.shift();this._saveTiled=null,this._sceneObjectsMap=null,this._sceneObjects=null,this._spritesInput=this._spritesInput?null:this._spritesInput,t.prototype._destroy.call(this)},SpriteBatch}(c.Container);l.MacawTypes.getInstance().registerType("SpriteBatch",f)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Scale9Sprite=void 0;var o=n(4),r=n(5),i=n(6),s=0,a=t.Scale9Sprite=function(t){function Scale9Sprite(n,o,r){e.classCallCheck(this,Scale9Sprite);var i=r.textures;i.topLeft=r.topLeft,i.topMid=r.topMid,i.topRight=r.topRight,i.midLeft=r.midLeft,i.mid=r.mid,i.midRight=r.midRight,i.botLeft=r.botLeft,i.botMid=r.botMid,i.botRight=r.botRight;for(var s=arguments.length,a=Array(s>3?s-3:0),c=3;c<s;c++)a[c-3]=arguments[c];return e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,r].concat(a)))}return e.inherits(Scale9Sprite,t),Scale9Sprite.prototype._getSceneObjectType=function _getSceneObjectType(e){return o.Control.SceneObjectType.SCALE9SPRITE},Scale9Sprite.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({textures:{priority:2,default:{},type:r.DataType.object,sceneObjectProperty:!0,get:function get(){return n._sceneObject.textures},set:function set(e){n._sceneObject.textures=e}},topLeft:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.topLeft},set:function set(e){var t=n._sceneObject.textures;t.topLeft=e,t.forceUpdate=!0,n._sceneObject.textures=t}},topMid:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.topMid},set:function set(e){var t=n._sceneObject.textures;t.topMid=e,t.forceUpdate=!0,n._sceneObject.textures=t}},topRight:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.topRight},set:function set(e){var t=n._sceneObject.textures;t.topRight=e,t.forceUpdate=!0,n._sceneObject.textures=t}},midLeft:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.midLeft},set:function set(e){var t=n._sceneObject.textures;t.midLeft=e,t.forceUpdate=!0,n._sceneObject.textures=t}},mid:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.mid},set:function set(e){var t=n._sceneObject.textures;t.mid=e,t.forceUpdate=!0,n._sceneObject.textures=t}},midRight:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.midRight},set:function set(e){var t=n._sceneObject.textures;t.midRight=e,t.forceUpdate=!0,n._sceneObject.textures=t}},botLeft:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.botLeft},set:function set(e){var t=n._sceneObject.textures;t.botLeft=e,t.forceUpdate=!0,n._sceneObject.textures=t}},botMid:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.botMid},set:function set(e){var t=n._sceneObject.textures;t.botMid=e,t.forceUpdate=!0,n._sceneObject.textures=t}},botRight:{priority:1,type:r.DataType.texture,get:function get(){return n._sceneObject.textures.botRight},set:function set(e){var t=n._sceneObject.textures;t.botRight=e,t.forceUpdate=!0,n._sceneObject.textures=t}},segments:{priority:1,type:r.DataType.object,sceneObjectProperty:!0,get:function get(){return n._sceneObject.segments}},blendMode:{type:r.DataType.int(),sceneObjectProperty:!0,default:s,get:function get(){return n._sceneObject.blendMode},set:function set(e){n._sceneObject.blendMode=e}},filters:{type:r.DataType.array,sceneObjectProperty:!0,get:function get(){return n._sceneObject.filters},set:function set(e){n._sceneObject.filters=e}},tint:{sceneObjectProperty:!0,default:16777215,get:function get(){return n._sceneObject.tint},set:function set(e){n._sceneObject.tint=0|e}},tintR:{get:function get(){return n._sceneObject.tint>>>16},set:function set(e){var t=0|e;n._sceneObject.tint=(65535&n._sceneObject.tint)+(t<<16)}},tintG:{get:function get(){return(65280&n._sceneObject.tint)>>>8},set:function set(e){var t=0|e;n._sceneObject.tint=(16711935&n._sceneObject.tint)+(t<<8)}},tintB:{get:function get(){return 255&n._sceneObject.tint},set:function set(e){var t=0|e;n._sceneObject.tint=(16776960&n._sceneObject.tint)+t}}})},Scale9Sprite}(o.Control);i.MacawTypes.getInstance().registerType("Scale9Sprite",a)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Video=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(4),s=n(6),a=n(5),c=n(22),u="idle",l="play",p="playing",d="pause",f="stopped",h=t.Video=function(t){function Video(){return e.classCallCheck(this,Video),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Video,t),Video.prototype._init=function _init(){t.prototype._init.call(this),this._createStateMachine(),this._onStartEvent=new c.Event,this._onStopEvent=new c.Event,this._onCompleteEvent=new c.Event,this._onNamedFrameEvent=new c.Event},Video.prototype._createStateMachine=function _createStateMachine(){this._stateMachine=this.createStateMachine("videoStateMachine",u,(function(e,t){return e===u&&t===l?t:e===l&&t===p?t:e===p&&t===d?t:e===p&&t===f?t:e===d&&t===f?t:e===f&&t===u?t:e}))},Video.prototype._bind=function _bind(){t.prototype._bind.call(this),this._bindToStateMachine(),this._bindSceneObjectEvents()},Video.prototype._unbind=function _unbind(){this._unbindSceneObjectEvents(),t.prototype._unbind.call(this)},Video.prototype._bindToStateMachine=function _bindToStateMachine(){var e=this;this._stateMachine.debug("video.stateMachine").switchMap((function(t){switch(t){case u:break;case l:e.properties.playing=!0;break;case p:e._onStartEvent.next(e);break;case d:e.properties.playing=!1;break;case f:return e.properties.playing=!1,e._onStopEvent.next(e),r.default.Observable.of(u)}return r.default.Observable.UNDEFINED})).filter((function(e){return void 0!==e})).delay(1).subscribeExt(this,(function(t){e._stateMachine.next(t)}))},Video.prototype._bindSceneObjectEvents=function _bindSceneObjectEvents(){var e=this;this.beginUpdate();try{this._sceneObject.onStart=function(){e._stateMachine.next(p)},this._sceneObject.onStop=function(){e._stateMachine.next(f)},this._sceneObject.onComplete=function(){e._onCompleteEvent.next(e)},this._sceneObject.onNamedFrame=function(t){e._onNamedFrameEvent.next(t)}}finally{this.endUpdate()}},Video.prototype._unbindSceneObjectEvents=function _unbindSceneObjectEvents(){this._sceneObject&&(this._sceneObject.onStart=void 0,this._sceneObject.onStop=void 0,this._sceneObject.onComplete=void 0,this._sceneObject.onNamedFrame=void 0)},Video.prototype.play=function play(){this._stateMachine.next(l)},Video.prototype.pause=function pause(){this._stateMachine.next(d)},Video.prototype._getSceneObjectType=function _getSceneObjectType(){return i.Control.SceneObjectType.VIDEO},Video.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({video:{type:a.DataType.string,sceneObjectProperty:!0,get:function get(){return n._sceneObject.video},set:function set(e){n._sceneObject.video=e}},playing:{type:a.DataType.boolean,sceneObjectProperty:!0,get:function get(){return n._sceneObject.playing},set:function set(e){n._sceneObject.playing=e}},scaleX:{default:1,type:a.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.scaleX},set:function set(e){n._sceneObject.scaleX=e}},scaleY:{default:1,type:a.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.scaleY},set:function set(e){n._sceneObject.scaleY=e}},originX:{default:.5,type:a.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.originX},set:function set(e){n._sceneObject.originX=e}},originY:{default:.5,type:a.DataType.float(),sceneObjectProperty:!0,get:function get(){return n._sceneObject.originY},set:function set(e){n._sceneObject.originY=e}},loop:{type:a.DataType.int(),default:-1,get:function get(){return n._sceneObject.loop},set:function set(e){n._sceneObject.loop=e}}})},Video.prototype._destroy=function _destroy(){this._onStartEvent=null,this._onStopEvent=null,this._onCompleteEvent=null,this._onNamedFrameEvent=null,this._model=null,this._stateMachine=null,t.prototype._destroy.call(this)},e.createClass(Video,[{key:"onStartEvent",get:function get(){return this._onStartEvent.asObservable()}},{key:"onStopEvent",get:function get(){return this._onStopEvent.asObservable()}},{key:"onCompleteEvent",get:function get(){return this._onCompleteEvent.asObservable()}},{key:"onNamedFrameEvent",get:function get(){return this._onNamedFrameEvent.asObservable()}}]),Video}(i.Control);s.MacawTypes.getInstance().registerType("Video",h)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Mask=void 0;var o=n(4),r=n(5),i=n(6),s=t.Mask=function(t){function Mask(){return e.classCallCheck(this,Mask),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Mask,t),Mask.prototype._getSceneObjectType=function _getSceneObjectType(e){return o.Control.SceneObjectType.MASK},Mask.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({vertices:{type:r.DataType.array,default:null,sceneObjectProperty:!0,get:function get(){return n._vertices},set:function set(e){n._vertices=e}}})},Mask}(o.Control);i.MacawTypes.getInstance().registerType("Mask",s)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Graphic=void 0;var o=n(4),r=n(5);t.Graphic=function(t){function Graphic(n,o,r){e.classCallCheck(this,Graphic);var i=e.possibleConstructorReturn(this,t.call(this,n,o,r));return i._graphicsCommand=system.graphics.getNewGraphicsCommandObject(),i._sceneObject.gfxcommObject=i._graphicsCommand,i}return e.inherits(Graphic,t),Graphic.prototype._getSceneObjectType=function _getSceneObjectType(e){return o.Control.SceneObjectType.GRAPHICS},Graphic.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({blendMode:{default:0,sceneObjectProperty:!0,get:function get(){return n._sceneObject.blendMode},set:function set(e){n._sceneObject.blendMode=e}},forceRegenerate:{default:!1,type:r.DataType.boolean,sceneObjectProperty:!0,get:function get(){return n._sceneObject.forceRegenerate},set:function set(e){n._sceneObject.forceRegenerate=e}}})},Graphic.prototype._destroy=function _destroy(){this._graphicsCommand=null,t.prototype._destroy.call(this)},Graphic.prototype.setLineStyle=function setLineStyle(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._graphicsCommand.setLineStyle(e,t,n)},Graphic.prototype.drawCircle=function drawCircle(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._graphicsCommand.drawCircle(e,t,n,o,r)},Graphic.prototype.drawEllipse=function drawEllipse(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this._graphicsCommand.drawEllipse(e,t,n,o,r,i)},Graphic.prototype.drawRect=function drawRect(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;this._graphicsCommand.drawRect(e,t,n,o,r,i,s)},Graphic.prototype.drawLine=function drawLine(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this._graphicsCommand.drawLine(e,t,n,o,r,i,s)},Graphic.prototype.drawPolygon=function drawPolygon(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._graphicsCommand.drawPolygon(e,t,n)},Graphic.prototype.drawBezierCurve=function drawBezierCurve(e,t,n,o,r,i,s,a){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1;this._graphicsCommand.drawBezierCurve(e,t,n,o,r,i,s,a,c,u)},Graphic.prototype.clear=function clear(){this._graphicsCommand.clear()},Graphic}(o.Control)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var o=n(4),r=n(5),i=n(6),s=n(21),a=t.Text=function(t){function Text(){return e.classCallCheck(this,Text),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(Text,t),Text.prototype._getSceneObjectType=function _getSceneObjectType(e){return o.Control.SceneObjectType.TEXT},Text.prototype._defineProperties=function _defineProperties(n){var o=this;t.prototype._defineProperties.call(this,n),n(e.extends({text:{default:"",type:r.DataType.string,sceneObjectProperty:!0,get:function get(){return o._sceneObject.text},set:function set(e){o._sceneObject.text=e}},fontSize:{default:10,type:r.DataType.int(),sceneObjectProperty:!0,get:function get(){return o._sceneObject.fontSize},set:function set(e){o._sceneObject.fontSize=e}},fontFace:{type:r.DataType.font,sceneObjectProperty:!0,get:function get(){return o._sceneObject.fontFace},set:function set(e){o._sceneObject.fontFace=e}},colour:{type:r.DataType.colour,sceneObjectProperty:!0,get:function get(){return o.properties.tint},set:function set(e){o.properties.tint=e}}},(0,s.TintPropertiesMixin)(this),{wordWrapAlign:{default:"center",type:r.DataType.string,sceneObjectProperty:!0,get:function get(){return o._sceneObject.wordWrapAlign},set:function set(e){o._sceneObject.wordWrapAlign=e}}}))},Text}(o.Control);i.MacawTypes.getInstance().registerType("Text",a)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SystemText=void 0;var o=n(4),r=n(5),i=n(6),s=n(21),a={fill:"0xffffff",padding:12},c=t.SystemText=function(t){function SystemText(n,o,r){e.classCallCheck(this,SystemText),r.style=e.extends({},a,r.style);for(var i=arguments.length,s=Array(i>3?i-3:0),c=3;c<i;c++)s[c-3]=arguments[c];return e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,r].concat(s)))}return e.inherits(SystemText,t),SystemText.prototype._getSceneObjectType=function _getSceneObjectType(){return o.Control.SceneObjectType.SYSTEMTEXT},SystemText.prototype._defineProperties=function _defineProperties(n){var o=this;t.prototype._defineProperties.call(this,n),n(e.extends({text:{default:"",type:r.DataType.string,sceneObjectProperty:!0,get:function get(){return o._sceneObject.text},set:function set(e){o._sceneObject.text=e}},style:{default:a,sceneObjectProperty:!0,get:function get(){return o._sceneObject.style},set:function set(e){o._sceneObject.style=e}},sharpness:{default:2,sceneObjectProperty:!0,get:function get(){return o._sceneObject.sharpness},set:function set(e){o._sceneObject.sharpness=e}}},(0,s.TintPropertiesMixin)(this)))},SystemText}(o.Control);i.MacawTypes.getInstance().registerType("SystemText",c)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SyncedMovieClip=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(6),s=n(84),a=n(55),c=n(36),u=n(54),l=n(5),p=n(38),d=n(53),f=t.SyncedMovieClip=function(t){function SyncedMovieClip(){return e.classCallCheck(this,SyncedMovieClip),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SyncedMovieClip,t),SyncedMovieClip.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({syncID:{type:l.DataType.string,get:function get(){return n._syncID},set:function set(e){n._syncID!==e&&(void 0!==n._model&&null!==n._model&&(void 0!==n._syncID&&null!==n._syncID&&n._stateMachine.value===s.MovieClip.MovieClipState.PLAYING&&h.removeListener(n._syncID),void 0!==n._model.value.updateObs&&null!==n._model.value.updateObs&&n._model.value.updateObs.unsubscribe(),n._model.next({updater:h.getUpdater(e,n._textureSources.length,n.properties.frameRate,n.properties.loopFrom,n.properties.startFrom)}),void 0!==n._syncID&&null!==n._syncID&&n._stateMachine.value===s.MovieClip.MovieClipState.PLAYING&&h.addListener(e),n._bindToSyncUpdates()),n._syncID=e)}},startFrom:{priority:2,default:0,type:l.DataType.int(),get:function get(){return n._startFrom},set:function set(e){n._startFrom=e}}})},SyncedMovieClip.prototype._createMovieClipModel=function _createMovieClipModel(){this._model=this.createModel(d.AggregateModel,"movieClipModel",{spriteControl:this.createControl(p.Sprite,"mc_"+this._id,{texture:this._properties.textureSources[0],originX:this.properties.originX,originY:this.properties.originY}),onStartEvent:new r.default.Subject,onCompleteEvent:new r.default.Subject})},SyncedMovieClip.prototype._createUpdater=function _createUpdater(){return h.getUpdater(this._syncID,this._textureSources.length,this.properties.frameRate,this.properties.loopFrom,this.properties.startFrom)},SyncedMovieClip.prototype._bindToStateMachine=function _bindToStateMachine(){var e=this;this._stateMachine.subscribeExt(this,(function(t){switch(t){case s.MovieClip.MovieClipState.INIT:break;case s.MovieClip.MovieClipState.PLAYING:h.addListener(e._syncID),e.sendMessage(new u.MovieClipMessage(e,{state:u.MovieClipMessage.MovieClipStates.START}));break;case s.MovieClip.MovieClipState.STOPPED:h.removeListener(e._syncID),e.sendMessage(new u.MovieClipMessage(e,{state:u.MovieClipMessage.MovieClipStates.STOP}))}}))},SyncedMovieClip.prototype._bindToUpdates=function _bindToUpdates(){},SyncedMovieClip.prototype._bindToSyncUpdates=function _bindToSyncUpdates(){var e=this;this._model.next({updateObs:this._model.value.updater.filter((function(){return null!=e._stateMachine&&e._stateMachine.value===s.MovieClip.MovieClipState.PLAYING})).subscribeExt(this,(function(t){return e._onUpdate(t)}))})},SyncedMovieClip.prototype._stopUpdater=function _stopUpdater(){},SyncedMovieClip}(s.MovieClip);i.MacawTypes.getInstance().registerType("SyncedMovieClip",f);var h=function(){function SyncMap(){e.classCallCheck(this,SyncMap)}return SyncMap.getUpdater=function getUpdater(e,t,n,o,r){return void 0!==SyncMap.syncObsMap[e]&&null!==SyncMap.syncObsMap[e]?SyncMap.syncObsMap[e].bSubject:SyncMap._createNewObservable(e,t,n,o,r).bSubject},SyncMap.addListener=function addListener(e){void 0!==SyncMap.syncObsMap[e]&&null!==SyncMap.syncObsMap[e]&&++SyncMap.syncObsMap[e].refCount},SyncMap.removeListener=function removeListener(e){void 0!==SyncMap.syncObsMap[e]&&null!==SyncMap.syncObsMap[e]&&(--SyncMap.syncObsMap[e].refCount,0===SyncMap.syncObsMap[e].refCount?SyncMap.syncObsMap[e].bSubject.next(0):SyncMap.syncObsMap[e].refCount<0&&(SyncMap.syncObsMap[e].refCount=0))},SyncMap._createNewObservable=function _createNewObservable(e,t,n,o,i){var s=null;s=void 0!==SyncMap.tickerMap[n]&&null!==SyncMap.tickerMap[n]?SyncMap.tickerMap[n]:SyncMap._createNewTicker(n);var a=new r.default.BehaviorSubject(i);if(o>0){var c=t-o;s.onUpdateEvent.filter((function(){return SyncMap.syncObsMap[e].refCount>0})).subscribe((function(){var e=a.value+1;e<o?a.next(e):a.next((e-o)%c+o)}))}else s.onUpdateEvent.filter((function(){return SyncMap.syncObsMap[e].refCount>0})).subscribe((function(){a.next((a.value+1)%t)}));return SyncMap.syncObsMap[e]={bSubject:a,refCount:0}},SyncMap._createNewTicker=function _createNewTicker(e){if(void 0===SyncMap.tickerMap[e]||null===SyncMap.tickerMap[e])return SyncMap.tickerMap[e]=c.Game.instance.createAnimation(a.Ticker,"syncedMC_ticker_"+e,e),SyncMap.tickerMap[e].start(),SyncMap.tickerMap[e]},SyncMap}();h.syncObsMap={},h.tickerMap={}}).call(this,n(0))},function(e,t,n){"use strict";(function(e){var o,r,i,s,a,c;Object.defineProperty(t,"__esModule",{value:!0}),t.SoundManager=void 0;var u=n(1),l=e.interopRequireDefault(u),p=n(2),d=n(85),f=n(86),h=n(87),m=n(88),g=n(89),_=n(90),y=n(189),b=n(44),v=n(26);function _applyDecoratedDescriptor(e,t,n,o,r){var i={};return Object.keys(o).forEach((function(e){i[e]=o[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,o){return o(e,t,n)||n}),i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}t.SoundManager=(o=(0,b.MessageObsBinding)(d.SoundFadeMessage),r=(0,b.MessageObsBinding)(f.SoundPlayMessage),i=(0,b.MessageObsBinding)(m.SoundStopMessage),s=(0,b.MessageObsBinding)(h.SoundPlaySwapMessage),a=(0,b.MessageBinding)(g.SoundManagerMuteMessage),_applyDecoratedDescriptor((c=function(t){function SoundManager(n,o){e.classCallCheck(this,SoundManager);var r=e.possibleConstructorReturn(this,t.call(this,n,o)),i=window.__gamePreloader.helpers.getUA();r._oppoR17=/|(Android.+(PBET00))/.test(i),r._systemMute=!1;var s=r._getIOSVersion(),a=null!=s&&Number(s.major)>=13;return r._preventMuteOrDublicate=a,r}return e.inherits(SoundManager,t),SoundManager.prototype._getIOSVersion=function _getIOSVersion(){if(!(/iPad|iPhone|iPod/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1))return null;var e=window.navigator.userAgent,t=e.match(/OS (\d+)_(\d+)_?(\d+)?/)||e.match(/Version\/(\d+)\.(\d+)\.?(\d+)?/);return t?{major:t[1],minor:t[2],patch:t[3]}:null},SoundManager.prototype._bind=function _bind(){var e=this;t.prototype._bind.call(this),this._hasAudio=!1!==window.mgsConfig.gameBuild.gameParams.audio&&"mute"!==window.mgsConfig.gameBuild.gameParams.audio,this._game.getSoundModel().next({hasAudio:this._hasAudio}),system.sound.noAudio=!this._hasAudio,this._bindToVisibility(),system.sound._soundService.addReportFunction((function(t,n,o){t<=1&&e.sendMessage(new _.SoundReportMessage(e,n,t,o))})),system.hid.globalPointerUp().take(1).subscribeExt(this,(function(){Howler._autoResume()}))},SoundManager.prototype._bindToVisibility=function _bindToVisibility(){var e=this;l.default.Browser.tabVisible.distinctUntilChanged().subscribeExt(this,(function(t){system&&system.sound&&!e._preventMuteOrDublicate&&(t?(e._systemMute=!1,system.sound.volume(1),system.sound.resumePlayback()):(e._systemMute=!0,system.sound.volume(0),system.sound.pausePlayback()),e._updateMute())})),l.default.Browser.tabFocused.distinctUntilChanged().subscribeExt(this,(function(t){!e.ownerGame.isMobile()||e.ownerGame.isIFrame||e._preventMuteOrDublicate||e._oppoR17||(t?(e._systemMute=!1,system.sound.volume(1)):(e._systemMute=!0,system.sound.volume(0)),e._updateMute())}))},SoundManager.prototype._onSoundFadeMessage=function _onSoundFadeMessage(e){var t=this;e.filter((function(){return t._hasAudio})).map((function(e){var n=t._getSources(e.source._scene),o=null!==e.fallbackSoundId&&void 0!==e.fallbackSoundId&&""!==e.fallbackSoundId;if(e.selectedHowl=t._getClosestHowl(n,e.soundId),o&&!e.isFadingIn()){var r=t._getClosestHowl(n,e.fallbackSoundId);if(t._isPlaying(r,e.fallbackSoundId)&&!t._isPlaying(e.selectedHowl,e.soundId))return e.selectedHowl=r,e.useFallback=!0,e}return e.selectedHowl||o&&(e.selectedHowl=t._getClosestHowl(n,e.fallbackSoundId),e.useFallback=!0),e})).filter((function(e){return null!=e.selectedHowl})).switchMap((function(e){return e.useFallback?system.sound.fade(e.fallbackSoundId,e.startVolume,e.endVolume,e.duration,e.selectedHowl,e.stopOnComplete).first().map((function(t){return{message:e,sound:t}})):e.isFadingIn()&&null!==e.fallbackSoundId&&void 0!==e.fallbackSoundId&&""!==e.fallbackSoundId&&t._isPlaying(e.selectedHowl,e.fallbackSoundId)?(system.sound.stop(e.fallbackSoundId,e.selectedHowl),system.sound.play(e.soundId,e.volume,null,e.canLagg,e.selectedHowl).first().map((function(t){return{message:e,sound:t}})),system.sound.fade(e.soundId,e.startVolume,e.endVolume,e.duration,e.selectedHowl,e.stopOnComplete).first().map((function(t){return{message:e,sound:t}}))):system.sound.fade(e.soundId,e.startVolume,e.endVolume,e.duration,e.selectedHowl,e.stopOnComplete).first().map((function(t){return{message:e,sound:t}}))})).subscribeExt(this,(function(){}))},SoundManager.prototype._testSound=function _testSound(){system.sound._soundService._adapter._audioEnabled||(this._hasAudio=!1,this._game.getSoundModel().next({hasAudio:this._hasAudio}),system.sound.noAudio=!this._hasAudio)},SoundManager.prototype._onSoundPlayMessage=function _onSoundPlayMessage(e){var t=this;e.do((function(){t._testSound()})).filter((function(){return t._hasAudio})).map((function(e){var n=t._getSources(null);return e.selectedHowl=t._getClosestHowl(n,e.soundId),e.selectedHowl||null===e.fallbackSoundId||void 0===e.fallbackSoundId||""===e.fallbackSoundId?e:(e.useFallback=!0,e.selectedHowl=t._getClosestHowl(n,e.fallbackSoundId),e)})).filter((function(e){return null!==e.selectedHowl})).switchMap((function(e){return e.useFallback?system.sound.play(e.fallbackSoundId,e.volume,null,e.canLagg,e.selectedHowl,e.pan).filter((function(t){return t.type===v.SoundEvents.PLAY&&t.id===e.fallbackSoundId})).filter((function(e){return!0===e.success})).first().map((function(t){return{message:e,sound:t}})):system.sound.play(e.soundId,e.volume,null,e.canLagg,e.selectedHowl,e.pan).filter((function(t){return t.type===v.SoundEvents.PLAY&&t.id===e.soundId})).filter((function(e){return!0===e.success})).first().map((function(t){return{message:e,sound:t}}))})).subscribeExt(this,(function(e){t.sendMessage(new y.SoundPlayingMessage(t,e.message.soundId,e.message.source,e.message.useFallback?e.message.fallbackSoundId:void 0))}))},SoundManager.prototype._onSoundStopMessage=function _onSoundStopMessage(e){var t=this;e.filter((function(){return t._hasAudio})).map((function(e){var n=t._getSources(e.source._scene),o=null!==e.fallbackSoundId&&void 0!==e.fallbackSoundId&&""!==e.fallbackSoundId;if(e.selectedHowl=t._getClosestHowl(n,e.soundId),o){var r=t._getClosestHowl(n,e.fallbackSoundId);if(t._isPlaying(r,e.fallbackSoundId)&&!t._isPlaying(e.selectedHowl,e.soundId))return e.selectedHowl=r,e.useFallback=!0,e}return e})).filter((function(e){return null!==e.selectedHowl})).subscribeExt(this,(function(e){e.useFallback?system.sound.stop(e.fallbackSoundId,e.selectedHowl):system.sound.stop(e.soundId,e.selectedHowl)}))},SoundManager.prototype._onSoundPlaySwapMessage=function _onSoundPlaySwapMessage(e){var t=this;e.do((function(){t._testSound()})).filter((function(){return t._hasAudio})).map((function(e){var n=t._getSources(null);return e.selectedHowl=t._getClosestHowl(n,e.soundId),e})).filter((function(e){return null!==e.selectedHowl})).switchMap((function(e){return system.sound.play(e.soundId,e.volume,null,!0,e.selectedHowl,!0).map((function(t){return{message:e,sound:t}}))})).subscribeExt(this,(function(e){var n=t._getClosestHowl(t._getSources(e.message.source._scene),e.message.soundId2);if(null!==n){var o=t._getClosestHowl(t._getSources(null),e.message.soundId),r=t._getSound(e.message.soundId);system.sound.stop(e.message.soundId,o),system.sound.play(e.message.soundId2,r._volume,null,!0,n,!1)}}))},SoundManager.prototype._onSoundManagerMuteMessage=function _onSoundManagerMuteMessage(e){this._gameMute=e.data,system.sound.volume(!0===e.data?0:1),this._updateMute()},SoundManager.prototype._updateMute=function _updateMute(){var e=this._gameMute||this._systemMute;e!==system.sound.mute&&(system.sound.mute=e)},SoundManager.prototype._getSound=function _getSound(e){for(var t=0;t<Howler._howls.length;t++)for(var n=Howler._howls[t],o=0;o<n._sounds.length;o++)if(n._sounds[o]._sprite===e)return n._sounds[o];return null},SoundManager.prototype._getSources=function _getSources(){var t=[],n=Game.instance._sceneManager.__getSceneMap(Game.instance);return Object.keys(n).forEach((function(o){var r=n[o];if(r&&r.soundFile){t.push.apply(t,e.toConsumableArray(r.soundFile instanceof Array?r.soundFile:[r.soundFile]));var i=r._sceneManager.__getSceneMap(r);Object.keys(i).forEach((function(n){i[n].soundFile&&t.push.apply(t,e.toConsumableArray(i[n].soundFile instanceof Array?i[n].soundFile:[i[n].soundFile]))}))}})),Game.instance&&Game.instance.soundFile&&t.push.apply(t,e.toConsumableArray(Game.instance.soundFile instanceof Array?Game.instance.soundFile:[Game.instance.soundFile])),t},SoundManager.prototype._getClosestHowl=function _getClosestHowl(e,t){var n=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var a=i.value;if(system.sound.isRegistered(a,t))return a}}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return null},SoundManager.prototype._isPlaying=function _isPlaying(e,t){var n=system.sound.getHowl(e);return!!n&&system.sound.isPlaying(n,t)},SoundManager.mute=function mute(e){system.sound.mute=e},SoundManager.getMute=function getMute(){return system.sound.mute},SoundManager}(p.Component)).prototype,"_onSoundFadeMessage",[o],Object.getOwnPropertyDescriptor(c.prototype,"_onSoundFadeMessage"),c.prototype),_applyDecoratedDescriptor(c.prototype,"_onSoundPlayMessage",[r],Object.getOwnPropertyDescriptor(c.prototype,"_onSoundPlayMessage"),c.prototype),_applyDecoratedDescriptor(c.prototype,"_onSoundStopMessage",[i],Object.getOwnPropertyDescriptor(c.prototype,"_onSoundStopMessage"),c.prototype),_applyDecoratedDescriptor(c.prototype,"_onSoundPlaySwapMessage",[s],Object.getOwnPropertyDescriptor(c.prototype,"_onSoundPlaySwapMessage"),c.prototype),_applyDecoratedDescriptor(c.prototype,"_onSoundManagerMuteMessage",[a],Object.getOwnPropertyDescriptor(c.prototype,"_onSoundManagerMuteMessage"),c.prototype),c)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SoundPlayingMessage=void 0;var o=n(18);t.SoundPlayingMessage=function(t){function SoundPlayingMessage(n,o,r,i){e.classCallCheck(this,SoundPlayingMessage);var s=e.possibleConstructorReturn(this,t.call(this,n));return s._soundId=o,s._target=r,s._fallbackId=i,s}return e.inherits(SoundPlayingMessage,t),e.createClass(SoundPlayingMessage,[{key:"soundId",get:function get(){return this._soundId}},{key:"target",get:function get(){return this._target}},{key:"fallbackId",get:function get(){return this._fallbackId}}]),SoundPlayingMessage}(o.BaseGameMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Tween=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(7),s=n(2),a=n(14);t.Tween=function(t){function Tween(n,o,i,s,a){e.classCallCheck(this,Tween);var c=e.possibleConstructorReturn(this,t.call(this));if(!n)throw Error("Please provide an id for your tween");c._id=n,c._isReady=new r.default.BehaviorSubject(!1);var u=o instanceof Array?o:[o];return c._speedCache=1,c._playObs=new r.default.Subject,c._initObs=new r.default.Subject,c._properties=s,r.default.Observable.combineLatest(c._playObs,c._initObs,(function(e,t){return{play:e,init:t}})).subscribeExt(c,(function(e){c._tween.play(e.play)})),c._setupTargets(u,i,s,a),c}return e.inherits(Tween,t),Tween.prototype.dispose=function dispose(){this._tween.destroy(),this._tween=null,this._isReady=null,this._playObs=null,this._initObs=null,this._id=null,this._targets=null,t.prototype.dispose.call(this)},Tween.prototype.play=function play(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._playObs.next(e)},Tween.prototype.stop=function stop(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this._tween)throw Error("Tween cannot be stopped. Tween does not exist");this._tween.stop(e)},Tween.prototype.update=function update(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!this._tween)throw Error("Tween cannot be updated. Tween does not exist");this._tween.update(e,t)},Tween.prototype.updateTarget=function updateTarget(e){if(!this._tween)throw Error("Tween cannot be updated. Tween does not exist");this._tween.updateTarget(e)},Tween.prototype.restart=function restart(){if(!this._tween)throw Error("Tween cannot be restarted. Tween does not exist");this._tween.restart()},Tween.prototype.reverse=function reverse(){if(!this._tween)throw Error("Tween cannot be reversed. Tween does not exist");this._tween.reverse()},Tween.prototype._setupTargets=function _setupTargets(t,n,o,i){var c=this,u=t.filter((function(e){return null!=e}));u.every((function(e){return e instanceof s.Component&&e.lifeState.value>=a.LifeCycleState.init||!(e instanceof s.Component)}))?(this._targets=u.map((function(e){return e instanceof s.Component?e.properties:e})),this._createTween(n,o,i),this._initObs.next(!0),this._isReady.next(!0)):r.default.Observable.from(t).filter((function(e){return null!=e})).map((function(e){return e instanceof s.Component?(o.paused||(o.paused=!0),e.lifeState.filter((function(e){return e>=a.LifeCycleState.init})).first().map((function(){return e.properties}))):r.default.Observable.of(e)})).toArray().switchMap((function(t){var n;return(n=r.default.Observable).zip.apply(n,e.toConsumableArray(t)).first()})).subscribeExt(this,(function(e){c._targets=e,c._createTween(n,o,i),null!=c._speedCache&&1!==c._speedCache&&(c.speed=c._speedCache,c._speedCache=null),c._initObs.next(!0),c._isReady.next(!0)}))},Tween.prototype._createTween=function _createTween(e,t,n){this._tween=system.animation.createTween(this._targets,e,t,n)},Tween.prototype.delay=function delay(e){this._withTween((function(t){t.delay(e)}))},Tween.prototype.toggleDebug=function toggleDebug(){var e=this;this._withTween((function(t){t.toggleDebug(e._id)}))},Tween.prototype._withTween=function _withTween(e){var t=this;this._tween&&!0===this._isReady.value?e(this._tween):this._isReady.filter((function(e){return!0===e})).first().subscribeExt(this,(function(){e(t._tween)}))},e.createClass(Tween,[{key:"isReverse",get:function get(){return null!=this._tween&&this._tween._isReversed}},{key:"onStartEvent",get:function get(){if(!this._tween)throw Error("Cannot retrieve event stream. Tween does not exist");return this._tween.onStartEvent}},{key:"onUpdateEvent",get:function get(){if(!this._tween)throw Error("Cannot retrieve event stream. Tween does not exist");return this._tween.onUpdateEvent}},{key:"onCompleteEvent",get:function get(){if(!this._tween)throw Error("Cannot retrieve event stream. Tween does not exist");return this._tween.onCompleteEvent}},{key:"onRepeatEvent",get:function get(){if(!this._tween)throw Error("Cannot retrieve event stream. Tween does not exist");return this._tween.onRepeatEvent}},{key:"onReverseCompleteEvent",get:function get(){if(!this._tween)throw Error("Cannot retrieve event stream. Tween does not exist");return this._tween.onReverseCompleteEvent}},{key:"isReady",get:function get(){return this._isReady}},{key:"duration",get:function get(){return this._tween.duration}},{key:"_duration",get:function get(){return this._tween.duration}},{key:"isPlaying",get:function get(){return this._tween.isPlaying}},{key:"tweenType",get:function get(){return this._tween.tweenType}},{key:"elapsedTime",get:function get(){return this._tween.elapsedTime}},{key:"speed",get:function get(){return this._tween?this._tween.speed:this._speedCache},set:function set(e){this._tween?this._tween.speed=e:this._speedCache=e}}],[{key:"Easing",get:function get(){return system.animation.easing}},{key:"Interpolation",get:function get(){return system.animation.interpolation}},{key:"TweenType",get:function get(){return system.animation.tweenType}}]),Tween}(i.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Timeline=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(7);t.Timeline=function(t){function Timeline(n,o){e.classCallCheck(this,Timeline);var i=e.possibleConstructorReturn(this,t.call(this));return i._isReady=new r.default.BehaviorSubject(!1),i._id=n,i._timeline=system.animation.createTimeline(o),i._isReady.next(!0),i}return e.inherits(Timeline,t),Timeline.prototype.play=function play(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._timeline.play(e)},Timeline.prototype.stop=function stop(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._timeline.stop(e)},Timeline.prototype.pause=function pause(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._timeline.pause(e)},Timeline.prototype.dispose=function dispose(){this._isReady=null,this._id=null,this._timeline.destroy(),this._timeline=null,t.prototype.dispose.call(this)},e.createClass(Timeline,[{key:"onCompleteEvent",get:function get(){return this._timeline.onCompleteEvent}},{key:"onStoppedEvent",get:function get(){return this._timeline.onStoppedEvent}},{key:"isReady",get:function get(){return this._isReady}}],[{key:"Condition",get:function get(){return system.animation.Condition}},{key:"Item",get:function get(){return system.animation.Item}}]),Timeline}(i.DisposableObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.ObservableTween=function(){function ObservableTween(){e.classCallCheck(this,ObservableTween)}return ObservableTween.create=function create(){var e;return(e=system.animation.ObservableTween).create.apply(e,arguments)},e.createClass(ObservableTween,null,[{key:"EaseFunction",get:function get(){return system.animation.ObservableTween.EaseFunction}}]),ObservableTween}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=void 0;var o=n(19),r=n(91);t.Emitter=function(t){function Emitter(n,o,i,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.DefaultEmitterManager;e.classCallCheck(this,Emitter);var c=e.possibleConstructorReturn(this,t.call(this));return c._id=n,c._control=s,system.animation.createEmitter(c._id,o,i,s.properties.asSceneObject(),a),c}return e.inherits(Emitter,t),Emitter.prototype.changeSprite=function changeSprite(e){system.animation.changeSprite(this._id,e)},Emitter.prototype.start=function start(e,t){this.startEmitting(e,t)},Emitter.prototype.startEmitting=function startEmitting(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];system.animation.startEmitter(this._id,e,t)},Emitter.prototype.stop=function stop(e){this.stopEmitting(e)},Emitter.prototype.stopEmitting=function stopEmitting(e){system.animation.stopEmitter(this._id,e)},Emitter.prototype.resumeUpdates=function resumeUpdates(){system.animation.resumeEmitterUpdates(this._id)},Emitter.prototype.pauseUpdates=function pauseUpdates(){system.animation.pauseEmitterUpdates(this._id)},Emitter.prototype.dispose=function dispose(){system.animation.disposeEmitter(this._id),this._id=null,this._control=null,t.prototype.dispose.call(this)},Emitter}(o.CommandObject)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.RandomBag=void 0;var o=n(43);t.RandomBag=function(){function RandomBag(t){e.classCallCheck(this,RandomBag),this._array=t,this._isSingle=1==t.length,this._stack=[],this._populate()}return RandomBag.prototype._populate=function _populate(){this._isSingle?this.push(this._array[0]):(this._generateStack(),this._shuffleStack())},RandomBag.prototype._generateStack=function _generateStack(){for(var e=0;e<this._array.length;e++)for(var t=this._array[e].weight;t>0;)this._stack.push(this._array[e]),t--},RandomBag.prototype._shuffleStack=function _shuffleStack(){o.ArrayUtils.shuffle(this._stack)},RandomBag.prototype.push=function push(e){this._stack.push(e)},RandomBag.prototype.pop=function pop(){return 0==this._stack.length&&this._populate(),this._stack.pop()},RandomBag.prototype.reset=function reset(){this._stack.length=0,this._populate()},RandomBag}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivateSceneMessage=void 0;var o=n(37);t.ActivateSceneMessage=function(t){function ActivateSceneMessage(){return e.classCallCheck(this,ActivateSceneMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(ActivateSceneMessage,t),ActivateSceneMessage}(o.BaseSceneMessage)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GameWorkflowStateMessage=void 0;var o=n(10);t.GameWorkflowStateMessage=function(t){function GameWorkflowStateMessage(){return e.classCallCheck(this,GameWorkflowStateMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(GameWorkflowStateMessage,t),GameWorkflowStateMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SceneWorkflowStateMessage=void 0;var o=n(10);t.SceneWorkflowStateMessage=function(t){function SceneWorkflowStateMessage(){return e.classCallCheck(this,SceneWorkflowStateMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SceneWorkflowStateMessage,t),SceneWorkflowStateMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SetLoaderCountMessage=void 0;var o=n(10);t.SetLoaderCountMessage=function(t){function SetLoaderCountMessage(){return e.classCallCheck(this,SetLoaderCountMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(SetLoaderCountMessage,t),SetLoaderCountMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.IncrementLoaderMessage=void 0;var o=n(10);t.IncrementLoaderMessage=function(t){function IncrementLoaderMessage(){return e.classCallCheck(this,IncrementLoaderMessage),e.possibleConstructorReturn(this,t.apply(this,arguments))}return e.inherits(IncrementLoaderMessage,t),IncrementLoaderMessage}(o.Message)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.EnvironmentCapability=function(){function EnvironmentCapability(){e.classCallCheck(this,EnvironmentCapability)}return e.createClass(EnvironmentCapability,null,[{key:"WebGl",get:function get(){return system.capability.webGl}}]),EnvironmentCapability}()}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SpineAnimation=t.SpineAnimationEvents=t.SpineAnimationState=void 0;var o=n(1),r=e.interopRequireDefault(o),i=n(56),s=n(4),a=n(14),c=n(6),u=n(202),l=n(93),p=t.SpineAnimationState=i.SpineAnimationState,d=t.SpineAnimationEvents=i.SpineAnimationEvents,f=t.SpineAnimation=function(t){function SpineAnimation(n,o,r){e.classCallCheck(this,SpineAnimation),r.spineAtlasData=system.animation.prepareSkeletalAnimationData(r.atlasData);for(var i=arguments.length,s=Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];return e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,r].concat(s)))}return e.inherits(SpineAnimation,t),SpineAnimation.prototype._init=function _init(){return this._tracks={},this._actualTrackId=this.properties.defaultTrackId,this._playingTracksCount=0,this._pausedTracksCount=0,this._trackIdToStatusMap={},this._createStateMachine(),this._events={},t.prototype._init.call(this)},SpineAnimation.prototype._bind=function _bind(){return this._bindToStateMachine(),t.prototype._bind.call(this)},SpineAnimation.prototype._ready=function _ready(){return this._pendingPlayCommandData&&this.play(this._pendingPlayCommandData),t.prototype._ready.call(this)},SpineAnimation.prototype._destroy=function _destroy(){var e=this;Object.keys(this._tracks).forEach((function(t){e._tracks[t].dispose()})),this._trackIdToStatusMap=null,this._playingTracksCount=null,this._pausedTracksCount=null,this._tracks=null,t.prototype._destroy.call(this)},SpineAnimation.prototype._getSceneObjectType=function _getSceneObjectType(){return s.Control.SceneObjectType.PIXISPINE},SpineAnimation.prototype._createStateMachine=function _createStateMachine(){this._stateMachine=this.createStateMachine("spineAnimationStateMachine_"+this.id,p.INIT,(function(e,t){return t}))},SpineAnimation.prototype._bindToStateMachine=function _bindToStateMachine(){var e=this;this._stateMachine.subscribeExt(this,(function(t){switch(t){case p.PLAYING:e._onPlaying();break;case p.PAUSED:e._onPaused();break;case p.STOPPED:e._onStopped()}}))},SpineAnimation.prototype._onPlaying=function _onPlaying(){},SpineAnimation.prototype._onPaused=function _onPaused(){},SpineAnimation.prototype._onStopped=function _onStopped(){},SpineAnimation.prototype._updateStateMachine=function _updateStateMachine(e,t){var n=this._stateMachine.value;switch(e){case d.TRACK_STARTED:this._playingTracksCount++,this._trackIdToStatusMap[t.trackIndex]=p.PLAYING,n=p.PLAYING;break;case d.TRACK_PAUSED:this._pausedTracksCount++,this._trackIdToStatusMap[t.trackIndex]=p.PAUSED,0==--this._playingTracksCount&&(n=p.PAUSED);break;case d.TRACK_RESUMED:this._pausedTracksCount--,this._trackIdToStatusMap[t.trackIndex]=p.PLAYING,0===this._playingTracksCount&&(n=p.PLAYING),this._playingTracksCount++;break;case d.TRACK_COMPLETED:this._trackIdToStatusMap[t.trackIndex]=p.STOPPED,--this._playingTracksCount<=0&&(n=0===this._pausedTracksCount?p.STOPPED:p.PAUSED)}return n!==this._stateMachine.value&&this._stateMachine.next(n),n},SpineAnimation.prototype._dispatchEvent=function _dispatchEvent(e,t){e===d.ANIMATION_LOOP&&this._events.onAnimationLoop?this._events.onAnimationLoop.next(t):e===d.ANIMATION_COMPLETED&&this._events.onAnimationCompleted?this._events.onAnimationCompleted.next(t):e===d.TRACK_STARTED&&this._events.onTrackStarted?this._events.onTrackStarted.next(t):e===d.TRACK_LOOP&&this._events.onTrackLoop?this._events.onTrackLoop.next(t):e===d.TRACK_COMPLETED&&this._events.onTrackCompleted?this._events.onTrackCompleted.next(t):e===d.TRACK_RESUMED&&this._events.onTrackResumed?this._events.onTrackResumed.next(t):e===d.TRACK_PAUSED&&this._events.onTrackPaused?this._events.onTrackPaused.next(t):e===d.CUSTOM_EVENT&&this._events.onCustomEvent&&this._events.onCustomEvent.next(t)},SpineAnimation.prototype.informEvents=function informEvents(e,t,n){var o=this._updateStateMachine(e,t);this._dispatchEvent(e,{trackInfo:t,state:o,eventData:n}),this.sendMessage(new l.SpineAnimationMessage(this,{eventName:e,trackInfo:t,state:o,eventData:n}))},SpineAnimation.prototype.play=function play(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackId,n=void 0===t?this._actualTrackId:t,o=e.animations,r=e.repeat,i=void 0===r?0:r,s=e.time,c=void 0===s?-1:s,u=e.animationIdToRepeatMap,l=void 0===u?{}:u,p=e.async,d=void 0===p||p;this.properties.playOnlyOnReady&&this._lifeStateMachine.value!==a.LifeCycleState.ready?this._pendingPlayCommandData={trackId:n,animations:o,repeat:i,time:c,animationIdToRepeatMap:l}:(this._pendingPlayCommandData=null,o=Array.isArray(o)?o:[o],d?this._sceneObject.enqueueAction({method:system.animation.startSkeletalAnimation,params:[this,{trackId:n,animations:o,repeat:i,time:c,animationIdToRepeatMap:l}]}):system.animation.startSkeletalAnimation(this,{trackId:n,animations:o,repeat:i,time:c,animationIdToRepeatMap:l}))},SpineAnimation.prototype.stop=function stop(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackId,n=void 0===t?this._actualTrackId:t,o=e.time,r=void 0===o?-1:o,i=e.async,s=void 0===i||i;s?this._sceneObject.enqueueAction({method:system.animation.stopSkeletalAnimation,params:[this,{trackId:n,time:r}]}):system.animation.stopSkeletalAnimation(this,{trackId:n,time:r})},SpineAnimation.prototype.pause=function pause(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackId,n=void 0===t?this._actualTrackId:t,o=e.async,r=void 0===o||o;r?this._sceneObject.enqueueAction({method:system.animation.pauseSkeletalAnimation,params:[this,{trackId:n}]}):system.animation.pauseSkeletalAnimation(this,{trackId:n})},SpineAnimation.prototype.resume=function resume(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackId,n=void 0===t?this._actualTrackId:t,o=e.async,r=void 0===o||o;r?this._sceneObject.enqueueAction({method:system.animation.resumeSkeletalAnimation,params:[this,{trackId:n}]}):system.animation.resumeSkeletalAnimation(this,{trackId:n})},SpineAnimation.prototype.clearTrack=function clearTrack(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackId,n=void 0===t?this._actualTrackId:t,o=e.async,r=void 0===o||o;r?this._sceneObject.enqueueAction({method:system.animation.clearSkeletalTrack,params:[this,{trackId:n}]}):system.animation.clearSkeletalTrack(this,{trackId:n})},SpineAnimation.prototype.clearAllTracks=function clearAllTracks(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.async,o=void 0===n||n;Object.keys(this._tracks).forEach((function(t){o?e._sceneObject.enqueueAction({method:system.animation.clearSkeletalTrack,params:[e,{trackId:t}]}):system.animation.clearSkeletalTrack(e,{trackId:t})}))},SpineAnimation.prototype.setToSetupPose=function setToSetupPose(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.async,n=void 0===t||t;n?this._sceneObject.enqueueAction({method:system.animation.setSkeletalToSetupPose,params:[this]}):system.animation.setSkeletalToSetupPose(this)},SpineAnimation.prototype.setMix=function setMix(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fromAnim,n=e.toAnim,o=e.mixValue,r=void 0===o?this.properties.defaultMix:o,i=e.async,s=void 0===i||i;s?this._sceneObject.enqueueAction({method:system.animation.setSkeletalAnimationMix,params:[this,{fromAnim:t,toAnim:n,mixValue:r}]}):system.animation.setSkeletalAnimationMix(this,{fromAnim:t,toAnim:n,mixValue:r})},SpineAnimation.prototype.updateSpeedByTrack=function updateSpeedByTrack(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackId,n=void 0===t?this._actualTrackId:t,o=e.speed,r=e.async,i=void 0===r||r;i?this._sceneObject.enqueueAction({method:system.animation.updateSkeletalTrackSpeed,params:[this,{trackId:n,speed:o}]}):system.animation.updateSkeletalTrackSpeed(this,{trackId:n,speed:o})},SpineAnimation.prototype.setSkin=function setSkin(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skinName,n=e.async,o=void 0===n||n;o?this._sceneObject.enqueueAction({method:system.animation.setSkeletalAnimationSkin,params:[this,{skinName:t}]}):system.animation.setSkeletalAnimationSkin(this,{skinName:t})},SpineAnimation.prototype._defineProperties=function _defineProperties(e){var n=this;t.prototype._defineProperties.call(this,e),e({atlasData:{get:function get(){return n._atlasData},set:function set(e){n._atlasData=e}},spineAtlasData:{sceneObjectProperty:!0,get:function get(){return n._sceneObject.spineAtlasData}},spineWidth:{sceneObjectProperty:!0,get:function get(){return n._sceneObject.spineWidth},set:function set(e){n._sceneObject.spineWidth=e}},spineHeight:{sceneObjectProperty:!0,get:function get(){return n._sceneObject.spineHeight},set:function set(e){n._sceneObject.spineHeight=e}},spineOriginX:{sceneObjectProperty:!0,default:0,get:function get(){return n._sceneObject.spineOriginX},set:function set(e){n._sceneObject.spineOriginX=e}},spineOriginY:{sceneObjectProperty:!0,default:0,get:function get(){return n._sceneObject.spineOriginY},set:function set(e){n._sceneObject.spineOriginY=e}},defaultMix:{type:Number,default:0,sceneObjectProperty:!0,get:function get(){return n._sceneObject.defaultMix},set:function set(e){n._sceneObject.defaultMix=e}},defaultTrackId:{type:Number,default:0,get:function get(){return n._defaultTrackId},set:function set(e){n._defaultTrackId=e}},autoUpdate:{default:!1,sceneObjectProperty:!0,get:function get(){return n._sceneObject.autoUpdate},set:function set(e){n._sceneObject.autoUpdate=e}},speed:{default:1,sceneObjectProperty:!0,get:function get(){return n._sceneObject.speed},set:function set(e){n._sceneObject.speed=e}},playOnlyOnReady:{default:!0,get:function get(){return n._playOnlyOnReady||null==n._playOnlyOnReady},set:function set(e){n._playOnlyOnReady=e}},positionOffset:{get:function get(){return n._positionOffset},set:function set(e){n._positionOffset=e,n.properties.x=n.properties.x,n.properties.y=n.properties.y}},x:{default:0,sceneObjectProperty:!0,get:function get(){return n._sceneObject.x},set:function set(e){var t=n.properties.positionOffset&&null!=n.properties.positionOffset.x?n.properties.positionOffset.x:0;n._sceneObject.x===e&&0===t||(n._sceneObject.x=e+t)}},y:{default:0,sceneObjectProperty:!0,get:function get(){return n._sceneObject.y},set:function set(e){var t=n.properties.positionOffset&&null!=n.properties.positionOffset.y?n.properties.positionOffset.y:0;n._sceneObject.y===e&&0===t||(n._sceneObject.y=e+t)}}})},e.createClass(SpineAnimation,[{key:"onAnimationLoop",get:function get(){return this._events.onAnimationLoop||(this._events.onAnimationLoop=new r.default.Subject),this._events.onAnimationLoop}},{key:"onAnimationCompleted",get:function get(){return this._events.onAnimationCompleted||(this._events.onAnimationCompleted=new r.default.Subject),this._events.onAnimationCompleted}},{key:"onTrackStarted",get:function get(){return this._events.onTrackStarted||(this._events.onTrackStarted=new r.default.Subject),this._events.onTrackStarted}},{key:"onTrackLoop",get:function get(){return this._events.onTrackLoop||(this._events.onTrackLoop=new r.default.Subject),this._events.onTrackLoop}},{key:"onTrackCompleted",get:function get(){return this._events.onTrackCompleted||(this._events.onTrackCompleted=new r.default.Subject),this._events.onTrackCompleted}},{key:"onTrackResumed",get:function get(){return this._events.onTrackResumed||(this._events.onTrackResumed=new r.default.Subject),this._events.onTrackResumed}},{key:"onTrackPaused",get:function get(){return this._events.onTrackPaused||(this._events.onTrackPaused=new r.default.Subject),this._events.onTrackPaused}},{key:"onCustomEvent",get:function get(){return this._events.onCustomEvent||(this._events.onCustomEvent=new r.default.Subject),this._events.onCustomEvent}},{key:"tracks",get:function get(){return this._tracks}},{key:"trackIdToStatusMap",get:function get(){return this._trackIdToStatusMap}}]),SpineAnimation}(u.SkeletalAnimationBase);c.MacawTypes.getInstance().registerType("SpineAnimation",f)}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletalAnimationBase=void 0;var o=n(4),r=n(16);t.SkeletalAnimationBase=function(t){function SkeletalAnimationBase(n,o,r){e.classCallCheck(this,SkeletalAnimationBase);for(var i=arguments.length,s=Array(i>3?i-3:0),a=3;a<i;a++)s[a-3]=arguments[a];return e.possibleConstructorReturn(this,t.call.apply(t,[this,n,o,r].concat(s)))}return e.inherits(SkeletalAnimationBase,t),SkeletalAnimationBase.prototype.play=function play(e){},SkeletalAnimationBase.prototype.pause=function pause(e){},SkeletalAnimationBase.prototype.stop=function stop(e){},SkeletalAnimationBase.prototype.gotoAndPlay=function gotoAndPlay(e){},SkeletalAnimationBase.prototype.gotoAndStop=function gotoAndStop(e){},SkeletalAnimationBase.prototype._getSceneObjectType=function _getSceneObjectType(){return o.Control.SceneObjectType.CONTAINER},SkeletalAnimationBase}(r.Container)}).call(this,n(0))}]);